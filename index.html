
<!DOCTYPE html>
<html lang="tl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0f172a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Radio Bingo Live | Social Ecosystem</title>
    
    <script>
        if (window.location.pathname.endsWith("index.html")) {
            var newPath = window.location.pathname.replace(/index\.html$/, "");
            window.history.replaceState({}, document.title, newPath);
        }
    </script>

    <link rel="icon" type="image/png" href="https://i.imgur.com/7D8u8h6.png">
    <link rel="apple-touch-icon" href="https://i.imgur.com/7D8u8h6.png">
    <link rel="manifest" href="manifest.json">
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&family=Comic+Neue:wght@700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-messaging.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://pl28660488.effectivegatecpm.com/9b/f5/85/9bf585b6ee39cb9b515e2fae1fa958c2.js"></script>
    <script src="https://pl28660496.effectivegatecpm.com/a6/64/bf/a664bf7e7084386b4f4b428590030df3.js"></script>

    
<style>
/* === CORE VARIABLES === */
:root { 
    --bg-overlay: rgba(15, 23, 42, 0.95); 
    --glass-surface: rgba(30, 41, 59, 0.75);
    --glass-border: rgba(255, 255, 255, 0.1);
    
    /* Enhanced Glassmorphism Variables */
    --glass-bg: rgba(30, 41, 59, 0.4);
    --glass-bg-strong: rgba(30, 41, 59, 0.65);
    --glass-blur: 20px;
    --glass-blur-strong: 30px;
    
    --accent: #0ea5e9; /* Ocean Blue */
    --accent-glow: #38bdf8;
    
    /* Neon Accent Colors */
    --neon-cyan: #06b6d4;
    --neon-pink: #ec4899;
    --neon-purple: #a855f7;
    --neon-glow-cyan: rgba(6, 182, 212, 0.5);
    --neon-glow-pink: rgba(236, 72, 153, 0.5);
    
    --text: #ffffff; 
    --gold: #fbbf24; 
    --gold-shine: #fcd34d;
    --success: #10b981; 
    --danger: #ef4444; 
    --minigame: #f472b6;
    
    /* Messenger Colors */
    --messenger-blue: #3b82f6;
    --messenger-grey: #334155;
    --messenger-bg: #020617;
    
    /* Spacing System */
    --spacing-xs: 8px;
    --spacing-sm: 12px;
    --spacing-md: 16px;
    --spacing-lg: 20px;
    --spacing-xl: 24px;
    
    /* Border Radius */
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-xl: 20px;
    --radius-full: 50px;

    /* SafeArea for iPhone Notch */
    --safe-top: env(safe-area-inset-top);
    --safe-bottom: env(safe-area-inset-bottom);
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; }

body { 
    font-family: 'Inter', sans-serif; 
    /* Enhanced gradient background for modern look */
    background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
    background-attachment: fixed;
    color: var(--text); 
    margin: 0; 
    padding: 0;
    overflow-x: hidden; 
    min-height: 100vh;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

/* === ENHANCED TYPOGRAPHY === */
h1, h2, h3, h4, h5, h6 {
    font-weight: 700;
    letter-spacing: -0.5px;
    line-height: 1.2;
    margin: 0;
}

h1 {
    font-size: clamp(28px, 5vw, 42px);
    font-weight: 900;
    background: linear-gradient(135deg, var(--neon-cyan), var(--accent-glow));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 16px;
}

h2 {
    font-size: clamp(24px, 4vw, 32px);
    font-weight: 800;
    color: white;
    margin-bottom: 12px;
}

h3 {
    font-size: clamp(20px, 3.5vw, 24px);
    font-weight: 700;
    color: rgba(255, 255, 255, 0.95);
    margin-bottom: 10px;
}

h4 {
    font-size: clamp(16px, 3vw, 18px);
    font-weight: 600;
    color: rgba(255, 255, 255, 0.9);
    margin-bottom: 8px;
}

/* ========================================= */
/* === LAYOUT FIXES (CLEAN UP CHOPSEUY) === */
/* ========================================= */

.main-scroll-container {
    padding-top: calc(70px + var(--safe-top)); /* Clear Fixed Header */
    padding-bottom: calc(100px + var(--safe-bottom)); /* Clear Fixed Nav */
    min-height: 100vh;
}

/* Fixed Header - Enhanced Glassmorphism */
.app-header {
    position: fixed;
    top: 0; left: 0; right: 0;
    height: calc(60px + var(--safe-top));
    padding-top: var(--safe-top);
    /* Enhanced glassmorphism effect */
    background: var(--glass-bg-strong);
    backdrop-filter: blur(var(--glass-blur-strong));
    -webkit-backdrop-filter: blur(var(--glass-blur-strong));
    border-bottom: 1px solid var(--glass-border);
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3), 0 0 1px rgba(255, 255, 255, 0.1) inset;
    z-index: 5000;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding-left: 20px;
    padding-right: 20px;
}

.brand-logo {
    font-weight: 900;
    font-size: 24px;
    letter-spacing: -1px;
    /* Enhanced neon glow effect */
    background: linear-gradient(135deg, var(--neon-cyan), var(--accent-glow));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    filter: drop-shadow(0 0 15px var(--neon-glow-cyan));
}
.brand-logo span { 
    background: linear-gradient(135deg, var(--accent-glow), var(--neon-purple));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.header-right {
    display: flex;
    align-items: center;
    gap: 12px;
}

.header-icon-btn {
    /* Touch-friendly size (min 44x44px) */
    width: 44px; height: 44px;
    border-radius: 12px;
    /* Enhanced glassmorphism */
    background: var(--glass-bg);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    display: flex; align-items: center; justify-content: center;
    cursor: pointer;
    position: relative;
    border: 1px solid var(--glass-border);
    transition: all 0.3s ease;
}
.header-icon-btn:hover {
    background: var(--glass-bg-strong);
    border-color: var(--neon-cyan);
    box-shadow: 0 0 15px var(--neon-glow-cyan);
}
.header-icon-btn:active {
    transform: scale(0.95);
}
.header-icon-btn i { width: 18px; color: #cbd5e1; }
.header-badge {
    position: absolute; top: -2px; right: -2px;
    background: var(--danger); width: 10px; height: 10px;
    border-radius: 50%; border: 1px solid #0f172a;
    display: none;
}

.header-avatar .avatar-frame {
    width: 36px !important; height: 36px !important;
}

/* === HAMBURGER MENU (Mobile-First Design) === */
.hamburger-menu {
    display: none; /* Hidden on desktop */
    flex-direction: column;
    justify-content: space-around;
    width: 28px;
    height: 24px;
    cursor: pointer;
    padding: 4px;
    transition: all 0.3s ease;
}
.hamburger-menu span {
    width: 100%;
    height: 3px;
    background: linear-gradient(90deg, var(--neon-cyan), var(--accent-glow));
    border-radius: 2px;
    transition: all 0.3s ease;
    box-shadow: 0 0 5px var(--neon-glow-cyan);
}
.hamburger-menu.active span:nth-child(1) {
    transform: rotate(45deg) translateY(10px);
}
.hamburger-menu.active span:nth-child(2) {
    opacity: 0;
}
.hamburger-menu.active span:nth-child(3) {
    transform: rotate(-45deg) translateY(-10px);
}

/* Mobile Menu Overlay */
.mobile-menu-overlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
    z-index: 5998;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}
.mobile-menu-overlay.active {
    opacity: 1;
    visibility: visible;
}

/* Mobile Menu Drawer */
.mobile-menu {
    position: fixed;
    top: 0; right: -100%; bottom: 0;
    width: 280px;
    max-width: 80vw;
    background: var(--glass-bg-strong);
    backdrop-filter: blur(var(--glass-blur-strong));
    -webkit-backdrop-filter: blur(var(--glass-blur-strong));
    border-left: 1px solid var(--glass-border);
    box-shadow: -10px 0 40px rgba(0, 0, 0, 0.5);
    z-index: 5999;
    transition: right 0.3s ease;
    display: flex;
    flex-direction: column;
}
.mobile-menu.active {
    right: 0;
}

.mobile-menu-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-xl) var(--spacing-lg);
    border-bottom: 1px solid var(--glass-border);
}
.mobile-menu-header h3 {
    margin: 0;
    font-size: 20px;
    font-weight: 700;
    background: linear-gradient(135deg, var(--neon-cyan), var(--accent-glow));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}
.mobile-menu-close {
    width: 40px; height: 40px;
    display: flex; align-items: center; justify-content: center;
    background: var(--glass-bg);
    border-radius: 10px;
    cursor: pointer;
    border: 1px solid var(--glass-border);
    transition: all 0.3s ease;
}
.mobile-menu-close:active {
    transform: scale(0.95);
}
.mobile-menu-close i {
    width: 20px;
}

.mobile-menu-content {
    flex: 1;
    overflow-y: auto;
    padding: var(--spacing-lg);
}
.mobile-menu-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-xs);
    border-radius: 12px;
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    color: white;
    text-decoration: none;
    font-size: 16px;
    font-weight: 500;
    transition: all 0.3s ease;
    cursor: pointer;
}
.mobile-menu-item:hover {
    background: var(--glass-bg-strong);
    border-color: var(--neon-cyan);
    box-shadow: 0 0 15px var(--neon-glow-cyan);
}
.mobile-menu-item:active {
    transform: scale(0.98);
}
.mobile-menu-item i {
    width: 20px;
    color: var(--neon-cyan);
}

/* Modern Bottom Navigation - Enhanced Glassmorphism */
.bottom-nav {
    position: fixed;
    bottom: calc(20px + var(--safe-bottom));
    left: 20px; right: 20px;
    /* Enhanced glassmorphism */
    background: var(--glass-bg-strong);
    backdrop-filter: blur(var(--glass-blur-strong));
    -webkit-backdrop-filter: blur(var(--glass-blur-strong));
    height: 70px;
    border-radius: 24px;
    display: flex;
    justify-content: space-around;
    align-items: center;
    z-index: 5000;
    border: 1px solid var(--glass-border);
    box-shadow: 0 10px 40px rgba(0,0,0,0.5), 0 0 1px rgba(255, 255, 255, 0.1) inset;
    max-width: 500px;
    margin: 0 auto;
}

.nav-item {
    background: none; border: none;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    gap: 4px; color: #94a3b8; cursor: pointer;
    /* Touch-friendly size */
    min-width: 60px; 
    min-height: 50px;
    padding: 8px;
    border-radius: 12px;
    transition: all 0.3s ease;
}
.nav-item:active {
    transform: scale(0.95);
}
.nav-item i { width: 22px; height: 22px; transition: 0.2s; }
.nav-label { font-size: 10px; font-weight: 700; transition: 0.2s; }

.nav-item.active { 
    color: var(--neon-cyan);
    background: var(--glass-bg);
}
.nav-item.active i { 
    transform: translateY(-2px); 
    filter: drop-shadow(0 0 10px var(--neon-cyan));
}

/* Floating Action Button (Center) - Enhanced with Neon */
.nav-center-fab {
    position: absolute;
    top: -28px; left: 50%; transform: translateX(-50%);
    width: 60px; height: 60px;
    /* Neon gradient */
    background: linear-gradient(135deg, var(--neon-cyan), var(--neon-purple));
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    box-shadow: 0 10px 30px var(--neon-glow-cyan), 0 0 20px var(--neon-glow-pink);
    border: 3px solid #0f172a;
    color: white; cursor: pointer;
    z-index: 5001;
    transition: all 0.3s ease;
}
.nav-center-fab:hover {
    transform: translateX(-50%) scale(1.05);
    box-shadow: 0 15px 40px var(--neon-glow-cyan), 0 0 30px var(--neon-glow-pink);
}
.nav-center-fab:active { 
    transform: translateX(-50%) scale(0.95); 
}

/* Sticky Ad Footer Adjustment */
.sticky-ad-footer {
    position: fixed;
    bottom: 0; left: 0; right: 0;
    height: calc(50px + var(--safe-bottom));
    background: #000;
    z-index: 4999;
    display: flex; align-items: flex-start; justify-content: center;
    padding-top: 5px;
    border-top: 1px solid #222;
}

/* Container Spacing */
.container {
    width: 100%; max-width: 500px; margin: 0 auto;
    padding: 0 15px;
}

/* ========================================= */
/* === END LAYOUT FIXES === */
/* ========================================= */

/* === BADGE & ONLINE SYSTEM === */
.avatar-frame {
    position: relative;
    display: inline-block;
    flex-shrink: 0;
    cursor: pointer;
}
.avatar-frame img {
    display: block;
    border-radius: 50%;
    border: 2px solid rgba(255,255,255,0.1);
    object-fit: cover;
}

/* UPDATED: Green Online Dot */
.online-indicator {
    position: absolute;
    bottom: 2px;
    right: 2px;
    width: 14px;
    height: 14px;
    background-color: #22c55e;
    border: 2px solid #0f172a;
    border-radius: 50%;
    z-index: 20;
    display: none; /* Hidden by default */
    box-shadow: 0 0 5px rgba(34, 197, 94, 0.5);
}
.online-indicator.is-online { display: block; }



.verification-badge {
    position: absolute;
    top: -2px;
    right: -2px;
    width: 35%;
    height: 35%;
    border-radius: 50%;
    background: linear-gradient(135deg, #3b82f6, #2563eb);
    border: 2px solid #0f172a;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    z-index: 11;
    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.5);
}

/* === MODERN POST CREATOR - Enhanced Glassmorphism === */
.post-creator-modern {
    /* Enhanced glassmorphism card */
    background: var(--glass-bg);
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    padding: 28px 24px;
    border-radius: 24px;
    border: 1px solid var(--glass-border);
    margin-bottom: var(--spacing-xl);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 0 1px rgba(255, 255, 255, 0.1) inset;
    display: flex;
    flex-direction: column;
    gap: 20px;
    transition: all 0.3s ease;
    margin-top: 15px;
}
.post-creator-modern:hover {
    border-color: rgba(255, 255, 255, 0.15);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4), 0 0 1px rgba(255, 255, 255, 0.15) inset;
}
.post-creator-title {
    margin: 0;
    color: rgba(255, 255, 255, 0.7);
    font-size: 15px;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 10px;
    letter-spacing: 0.5px;
}
.post-creator-title i {
    width: 16px;
    opacity: 0.7;
}
.post-input-modern {
    background: var(--glass-bg);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-md);
    color: white;
    font-family: 'Inter', sans-serif;
    font-size: 15px;
    line-height: 1.5;
    resize: none;
    min-height: 100px;
    outline: none;
    transition: all 0.3s ease;
}
.post-input-modern::placeholder {
    color: rgba(255, 255, 255, 0.4);
}
.post-input-modern:focus {
    background: var(--glass-bg-strong);
    border-color: var(--neon-cyan);
    box-shadow: 0 0 20px var(--neon-glow-cyan), 0 0 1px rgba(255, 255, 255, 0.2) inset;
}

/* === ACTION BUTTONS ROW (Ghost Buttons) === */
.action-buttons-row {
    display: flex;
    gap: 12px;
    margin-top: 8px;
}

.action-btn-ghost {
    flex: 1;
    /* Enhanced glassmorphism */
    background: var(--glass-bg);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid var(--glass-border);
    /* Touch-friendly padding */
    padding: 12px 0;
    min-height: 44px;
    border-radius: 14px;
    font-size: 13px;
    font-weight: 600;
    color: rgba(255, 255, 255, 0.7);
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}
.action-btn-ghost i {
    width: 18px;
    height: 18px;
    opacity: 0.7;
}
.action-btn-ghost:hover {
    background: var(--glass-bg-strong);
    border-color: var(--neon-cyan);
    color: rgba(255, 255, 255, 0.9);
    box-shadow: 0 0 15px var(--neon-glow-cyan);
}
.action-btn-ghost:hover i {
    opacity: 1;
}
.action-btn-ghost:active {
    transform: scale(0.98);
}
.action-btn-ghost.active {
    background: rgba(6, 182, 212, 0.2);
    border-color: var(--neon-cyan);
    color: var(--neon-cyan);
    box-shadow: 0 0 20px var(--neon-glow-cyan);
}
.action-btn-ghost.active i {
    opacity: 1;
    filter: drop-shadow(0 0 5px var(--neon-cyan));
}

.post-tools {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 12px;
    padding: 0;
    background: transparent;
    border: none;
    border-radius: 0;
}
.btn-post-modern {
    /* Enhanced gradient with neon colors */
    background: linear-gradient(135deg, var(--neon-cyan), var(--neon-purple));
    color: white;
    border: none;
    /* Touch-friendly size */
    padding: 16px;
    min-height: 50px;
    border-radius: 50px;
    font-weight: 800;
    font-size: 14px;
    cursor: pointer;
    box-shadow: 0 8px 30px var(--neon-glow-cyan), 0 0 20px var(--neon-glow-pink);
    transition: all 0.3s ease;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    width: 100%;
    position: relative;
    overflow: hidden;
}
.btn-post-modern:before {
    content: '';
    position: absolute;
    top: 0; left: -100%;
    width: 100%; height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.5s;
}
.btn-post-modern:hover {
    background: linear-gradient(135deg, var(--neon-purple), var(--neon-cyan));
    box-shadow: 0 12px 40px var(--neon-glow-cyan), 0 0 30px var(--neon-glow-pink);
    transform: translateY(-2px);
}
.btn-post-modern:hover:before {
    left: 100%;
}
.btn-post-modern:active {
    transform: translateY(0) scale(0.98);
}

/* === CUSTOM VISIBILITY DROPDOWN === */
.custom-visibility-dropdown {
    position: relative;
    flex: 1;
}
.visibility-trigger {
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid rgba(255, 255, 255, 0.06);
    color: rgba(255, 255, 255, 0.6);
    padding: 10px var(--spacing-md);
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
    outline: none;
    transition: all 0.2s ease;
    text-transform: capitalize;
    letter-spacing: 0.3px;
    min-height: 40px;
    display: flex;
    align-items: center;
    gap: 8px;
    width: 100%;
    justify-content: center;
    border-radius: 12px;
}
.visibility-trigger:hover {
    background: rgba(255, 255, 255, 0.08);
    color: rgba(255, 255, 255, 0.8);
}
.visibility-trigger:active {
    transform: scale(0.98);
}
.visibility-dropdown-menu {
    display: none;
    position: absolute;
    bottom: 100%;
    left: 0;
    right: 0;
    background: rgba(30, 41, 59, 0.98);
    border: 1px solid rgba(59, 130, 246, 0.3);
    border-radius: var(--radius-md);
    margin-bottom: 4px;
    overflow: hidden;
    box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);
    z-index: 10;
}
.visibility-dropdown-menu.show {
    display: block;
}
.visibility-option {
    padding: var(--spacing-sm) var(--spacing-md);
    color: #94a3b8;
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    cursor: pointer;
    transition: all 0.15s ease;
    display: flex;
    align-items: center;
    gap: 8px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}
.visibility-option:last-child {
    border-bottom: none;
}
.visibility-option:hover {
    background: rgba(59, 130, 246, 0.15);
    color: var(--accent-glow);
}
.visibility-option.selected {
    background: rgba(59, 130, 246, 0.2);
    color: var(--accent-glow);
}
.visibility-trigger i, .visibility-option i {
    width: 14px;
    height: 14px;
}

.visibility-selector {
    background: rgba(59, 130, 246, 0.1);
    border: 1px solid rgba(59, 130, 246, 0.2);
    border-right: none;
    color: var(--accent-glow);
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: 0;
    font-size: 11px;
    font-weight: 700;
    cursor: pointer;
    outline: none;
    transition: all 0.2s ease;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    flex: 1.5;
    min-height: 38px;
}
.visibility-selector:hover {
    background: rgba(59, 130, 246, 0.2);
    border-color: rgba(59, 130, 246, 0.4);
    z-index: 1;
}
.visibility-selector:active {
    transform: scale(0.98);
}
.visibility-selector option {
    background: #1e293b;
    color: white;
}

/* === MESSENGER MODERN === */
.msg-image-preview {
    max-width: 200px;
    border-radius: var(--radius-md);
    border: 1px solid rgba(255,255,255,0.1);
    margin-top: 5px;
}
.msg-heart-reaction {
    position: absolute;
    bottom: -8px;
    right: -5px;
    background: #1e293b;
    border: 1px solid #334155;
    border-radius: var(--radius-sm);
    padding: 2px 4px;
    font-size: 10px;
    display: flex;
    align-items: center;
    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
@keyframes popIn { 0% { transform: scale(0); } 100% { transform: scale(1); } }

.pm-footer-modern {
    padding: var(--spacing-sm);
    background: #0f172a;
    display: flex;
    gap: var(--spacing-sm);
    align-items: center;
    border-top: 1px solid #1e293b;
    padding-bottom: calc(15px + env(safe-area-inset-bottom));
}
.pm-attach-btn {
    background: none;
    border: none;
    color: #64748b;
    cursor: pointer;
    padding: 5px;
}

/* === NOTIFICATION UPDATES === */
.notif-card-grouped {
    background: rgba(30, 41, 59, 0.4);
    border-left: 3px solid var(--accent);
    margin-bottom: var(--spacing-xs);
    padding: var(--spacing-sm);
    border-radius: 0 12px 12px 0;
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    cursor: pointer;
    transition: 0.2s;
    position: relative;
}
.notif-card-grouped:active { background: rgba(30, 41, 59, 0.8); transform: scale(0.98); }
.notif-img { width: 36px; height: 36px; border-radius: 50%; object-fit: cover; border: 1px solid rgba(255,255,255,0.1); }
.notif-content-wrap { flex: 1; padding-right: 25px; } /* padding for delete btn */
.btn-delete-notif {
    position: absolute; right: 10px; top: 50%; transform: translateY(-50%);
    background: rgba(239, 68, 68, 0.1); color: #ef4444; border: none;
    width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center;
    cursor: pointer;
}

/* Modern Unfriend Button */
.btn-unfriend-modern {
    background: rgba(239, 68, 68, 0.12);
    color: #f87171;
    border: 1px solid rgba(239, 68, 68, 0.25);
    padding: 14px 32px;
    border-radius: 50px;
    font-weight: 700;
    font-size: 14px;
    cursor: pointer;
    margin-bottom: var(--spacing-sm);
    width: 100%;
    max-width: 280px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-xs);
    transition: all 0.3s ease;
    text-transform: uppercase;
    letter-spacing: 1px;
}
.btn-unfriend-modern:hover {
    background: rgba(239, 68, 68, 0.18);
    border-color: rgba(239, 68, 68, 0.4);
    box-shadow: 0 4px 15px rgba(239, 68, 68, 0.15);
}
.btn-unfriend-modern:active {
    transform: scale(0.97);
}

/* Group Chat UI */
.group-create-btn {
    padding: 8px 15px;
    background: var(--accent);
    color: white;
    border-radius: var(--radius-xl);
    font-size: 11px;
    font-weight: 800;
    border: none;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(14, 165, 233, 0.3);
}

.friend-select-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--spacing-sm);
    border-bottom: 1px solid rgba(255,255,255,0.05);
    cursor: pointer;
}
.friend-select-item.selected { background: rgba(14, 165, 233, 0.1); }
.checkbox-circle {
    width: 20px; height: 20px;
    border: 2px solid #475569;
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
}
.friend-select-item.selected .checkbox-circle {
    background: var(--accent); border-color: var(--accent);
}

#customPopupBanner { display: none; position: fixed; inset: 0; z-index: 9999999; background: rgba(0,0,0,0.85); align-items: center; justify-content: center; flex-direction: column; padding: var(--spacing-lg); backdrop-filter: blur(5px); }

/* === CARD SKINS === */
.card-skin-neon { border: 2px solid #06b6d4 !important; box-shadow: 0 0 20px #06b6d4, inset 0 0 20px rgba(6, 182, 212, 0.2) !important; background: rgba(8, 51, 68, 0.9) !important; }
.card-skin-neon .cell { border-color: #06b6d4 !important; color: #67e8f9 !important; text-shadow: 0 0 5px #06b6d4 !important; }

.card-skin-gold { border: 2px solid #f59e0b !important; box-shadow: 0 0 25px #f59e0b, inset 0 0 10px #f59e0b !important; background: linear-gradient(135deg, #451a03, #000) !important; }
.card-skin-gold .cell { border-color: #fbbf24 !important; color: #fcd34d !important; font-family: 'Times New Roman', serif; }

.card-skin-pink { border: 2px solid #ec4899 !important; box-shadow: 0 0 20px #ec4899 !important; background: rgba(80, 7, 36, 0.9) !important; }
.card-skin-pink .cell { border-color: #f472b6 !important; color: #fbcfe8 !important; border-radius: 50% !important; }

.card-skin-matrix { border: 2px solid #22c55e !important; box-shadow: 0 0 15px #22c55e !important; background: black !important; font-family: 'Courier New', monospace; }
.card-skin-matrix .cell { border-color: #22c55e !important; color: #4ade80 !important; border-radius: 0 !important; }

/* CHARACTER THEMES */
.card-skin-kitty { border: 4px solid #ffc0cb !important; background: radial-gradient(circle, #fff0f5, #ff69b4) !important; box-shadow: 0 0 20px #ff69b4 !important; font-family: 'Comic Neue', cursive; }
.card-skin-kitty .cell { background: white !important; color: #ff1493 !important; border: 2px solid #ffc0cb !important; border-radius: 15px !important; }
.card-skin-kitty .bingo-header .letter { color: #ff1493 !important; text-shadow: 2px 2px 0px white !important; }

.card-skin-doraemon { border: 4px solid #0096df !important; background: linear-gradient(180deg, #0096df 0%, #ffffff 100%) !important; box-shadow: 0 0 20px #dd1616 !important; }
.card-skin-doraemon .cell { background: rgba(255,255,255,0.9) !important; color: #0096df !important; border: 2px solid #dd1616 !important; border-radius: 50% !important; }
.card-skin-doraemon .bingo-header .letter { color: #dd1616 !important; text-shadow: 2px 2px 0px white !important; }

.card-skin-spongebob { border: 4px solid #f7f44d !important; background: url('https://upload.wikimedia.org/wikipedia/commons/thumb/e/e6/SpongeBob_SquarePants_logo.svg/1200px-SpongeBob_SquarePants_logo.svg.png'), #f7f44d !important; background-size: cover !important; box-shadow: 0 0 20px #f7f44d !important; }
.card-skin-spongebob .cell { background: rgba(255,255,255,0.8) !important; color: #7d5837 !important; border: 2px dashed #7d5837 !important; }

.card-skin-kuromi { border: 4px solid #000000 !important; background: linear-gradient(135deg, #000000, #4b0082) !important; box-shadow: 0 0 20px #ea65a2 !important; }
.card-skin-kuromi .cell { background: rgba(234, 101, 162, 0.2) !important; color: #ea65a2 !important; border: 1px solid #ea65a2 !important; border-radius: var(--radius-sm) 0 8px 0 !important; }

/* NEW CHARACTER-INSPIRED SKINS */
.card-skin-electric-mouse { border: 4px solid #000 !important; background: linear-gradient(135deg, #FFD700, #FFA500) !important; box-shadow: 0 0 25px #FFD700, 0 0 40px #FFD700 !important; position: relative; }
.card-skin-electric-mouse .cell { background: linear-gradient(135deg, #FFFFE0, #FFD700) !important; color: #000 !important; border: 2px solid #000 !important; border-radius: var(--radius-sm) !important; box-shadow: 0 0 10px rgba(255, 215, 0, 0.5) !important; }
.card-skin-electric-mouse .bingo-header .letter { color: #000 !important; text-shadow: 2px 2px 4px #FFD700 !important; }

.card-skin-magic-moon { border: 3px solid #FFD700 !important; background: linear-gradient(135deg, #FFB6D9, #9D4EDD, #6A0DAD) !important; box-shadow: 0 0 30px #FFB6D9 !important; }
.card-skin-magic-moon .cell { background: linear-gradient(135deg, rgba(255, 182, 217, 0.3), rgba(157, 78, 221, 0.3)) !important; color: #FFE4F5 !important; border: 2px solid #FFD700 !important; border-radius: 50% !important; box-shadow: 0 0 15px rgba(255, 215, 0, 0.4) !important; }
.card-skin-magic-moon .bingo-header .letter { color: #FFE4F5 !important; text-shadow: 0 0 10px #FFD700 !important; }

.card-skin-orange-ninja { border: 4px solid #0066CC !important; background: linear-gradient(135deg, #FF6B00, #FF8C00) !important; box-shadow: 0 0 25px #FF6B00 !important; }
.card-skin-orange-ninja .cell { background: rgba(255, 140, 0, 0.3) !important; color: #fff !important; border: 3px solid #0066CC !important; border-radius: var(--radius-sm) !important; box-shadow: inset 0 0 10px rgba(0, 102, 204, 0.5) !important; transform: rotate(0deg); transition: transform 0.2s; }
.card-skin-orange-ninja .cell:hover { transform: rotate(2deg); }
.card-skin-orange-ninja .bingo-header .letter { color: #0066CC !important; text-shadow: 2px 2px 0px #FF6B00, -1px -1px 0px #fff !important; }

.card-skin-forest-spirit { border: 3px solid #8B7355 !important; background: linear-gradient(135deg, #B8C5B0, #7A9D7A, #668866) !important; box-shadow: 0 0 20px #8B7355 !important; }
.card-skin-forest-spirit .cell { background: rgba(184, 197, 176, 0.6) !important; color: #3D5C3D !important; border: 2px solid #8B7355 !important; border-radius: 20px !important; }
.card-skin-forest-spirit .bingo-header .letter { color: #3D5C3D !important; text-shadow: 1px 1px 2px #B8C5B0 !important; }

.card-skin-blue-speedster { border: 4px solid #FF0000 !important; background: radial-gradient(circle, #0066FF, #003399) !important; box-shadow: 0 0 30px #0066FF, 0 0 50px rgba(0, 102, 255, 0.5) !important; }
.card-skin-blue-speedster .cell { background: linear-gradient(90deg, rgba(0, 153, 255, 0.4), rgba(0, 102, 255, 0.6)) !important; color: #FFD700 !important; border: 2px solid #FF0000 !important; border-radius: 50% !important; box-shadow: 0 0 10px #FFD700 !important; }
.card-skin-blue-speedster .bingo-header .letter { color: #FFD700 !important; text-shadow: 2px 2px 4px #0066FF !important; }

/* NEW ARTISTIC SKINS */
.card-skin-cyberpunk-neon { border: 3px solid #00FFFF !important; background: linear-gradient(135deg, #8B00FF, #4B0082, #1a001a) !important; box-shadow: 0 0 30px #00FFFF, inset 0 0 30px rgba(0, 255, 255, 0.2) !important; position: relative; }
.card-skin-cyberpunk-neon .cell { background: linear-gradient(135deg, rgba(139, 0, 255, 0.3), rgba(0, 255, 255, 0.2)) !important; color: #00FFFF !important; border: 2px solid #FF00FF !important; border-radius: var(--radius-sm) !important; box-shadow: 0 0 15px rgba(0, 255, 255, 0.5), inset 0 0 10px rgba(255, 0, 255, 0.3) !important; text-shadow: 0 0 10px #00FFFF !important; }
.card-skin-cyberpunk-neon .bingo-header .letter { color: #FF00FF !important; text-shadow: 0 0 15px #00FFFF !important; }

.card-skin-galaxy-dreams { border: 2px solid rgba(138, 43, 226, 0.8) !important; background: radial-gradient(ellipse at center, #1a0033, #000000) !important; box-shadow: 0 0 40px rgba(138, 43, 226, 0.6), inset 0 0 50px rgba(0, 0, 128, 0.5) !important; }
.card-skin-galaxy-dreams .cell { background: radial-gradient(circle, rgba(75, 0, 130, 0.4), rgba(25, 25, 112, 0.3)) !important; color: #E6E6FA !important; border: 1px solid rgba(138, 43, 226, 0.6) !important; border-radius: var(--radius-sm) !important; box-shadow: 0 0 20px rgba(138, 43, 226, 0.4) !important; }
.card-skin-galaxy-dreams .bingo-header .letter { color: #E6E6FA !important; text-shadow: 0 0 15px #8A2BE2 !important; }

.card-skin-vaporwave { border: 3px solid #FF71CE !important; background: linear-gradient(135deg, #FF71CE, #01CDFE, #B967FF) !important; box-shadow: 0 0 30px #01CDFE !important; }
.card-skin-vaporwave .cell { background: linear-gradient(135deg, rgba(255, 113, 206, 0.3), rgba(1, 205, 254, 0.3)) !important; color: #fff !important; border: 2px solid #01CDFE !important; border-radius: 0 !important; box-shadow: 0 0 10px rgba(1, 205, 254, 0.6), inset 0 0 10px rgba(255, 113, 206, 0.3) !important; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8) !important; }
.card-skin-vaporwave .bingo-header .letter { color: #FFFF00 !important; text-shadow: 2px 2px 4px #FF71CE, -1px -1px 2px #01CDFE !important; }

.card-skin-fire-ice { border: 4px solid #FFD700 !important; background: linear-gradient(135deg, #FF4500 0%, #FF6347 50%, #00CED1 50%, #4682B4 100%) !important; box-shadow: 0 0 30px rgba(255, 69, 0, 0.8), 0 0 30px rgba(0, 206, 209, 0.8) !important; }
.card-skin-fire-ice .cell { background: linear-gradient(135deg, rgba(255, 69, 0, 0.3) 0%, rgba(255, 69, 0, 0.3) 50%, rgba(0, 206, 209, 0.3) 50%, rgba(0, 206, 209, 0.3) 100%) !important; color: #fff !important; border: 2px solid #FFD700 !important; border-radius: var(--radius-sm) !important; box-shadow: 0 0 15px rgba(255, 215, 0, 0.5) !important; text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8) !important; }
.card-skin-fire-ice .bingo-header .letter { color: #FFD700 !important; text-shadow: 2px 2px 4px #FF4500, -2px -2px 4px #00CED1 !important; }

.card-skin-disco-fever { border: 4px solid #FFD700 !important; background: linear-gradient(45deg, #FF1493, #FFD700, #00CED1, #9370DB, #FF1493) !important; background-size: 400% 400% !important; box-shadow: 0 0 40px rgba(255, 215, 0, 0.8) !important; animation: disco-gradient 3s ease infinite; }
@keyframes disco-gradient { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
.card-skin-disco-fever .cell { background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 215, 0, 0.3)) !important; color: #000 !important; border: 2px solid #FFD700 !important; border-radius: 50% !important; box-shadow: 0 0 15px rgba(255, 215, 0, 0.6), inset 0 0 10px rgba(255, 255, 255, 0.4) !important; font-weight: 900 !important; }
.card-skin-disco-fever .bingo-header .letter { color: #FFD700 !important; text-shadow: 2px 2px 4px #FF1493, -2px -2px 4px #00CED1 !important; }

/* NEW CHARACTER-INSPIRED SKINS - ANIME & GAME ICONS */
.card-skin-demon-slayer { border: 4px dashed #1a4d4d !important; background: linear-gradient(135deg, #0d2626, #1a4d4d, #004d4d) !important; box-shadow: 0 0 25px rgba(0, 77, 77, 0.8), inset 0 0 30px rgba(26, 77, 77, 0.3) !important; position: relative; }
.card-skin-demon-slayer .cell { background: linear-gradient(135deg, rgba(13, 38, 38, 0.5), rgba(0, 77, 77, 0.3)) !important; color: #67e8f9 !important; border: 2px solid #1a4d4d !important; border-radius: var(--radius-sm) !important; box-shadow: 0 0 10px rgba(26, 77, 77, 0.5), inset 0 0 5px rgba(103, 232, 249, 0.2) !important; }
.card-skin-demon-slayer .bingo-header .letter { color: #67e8f9 !important; text-shadow: 0 0 10px #1a4d4d !important; }

.card-skin-straw-hat { border: 4px solid #dc2626 !important; background: linear-gradient(135deg, #dc2626, #ef4444) !important; box-shadow: 0 0 30px #dc2626 !important; }
.card-skin-straw-hat .cell { background: linear-gradient(135deg, rgba(220, 38, 38, 0.3), rgba(254, 240, 138, 0.2)) !important; color: #fef08a !important; border: 3px solid #fef08a !important; border-radius: var(--radius-sm) !important; box-shadow: 0 0 15px rgba(254, 240, 138, 0.4) !important; font-weight: 900 !important; }
.card-skin-straw-hat .bingo-header .letter { color: #fef08a !important; text-shadow: 2px 2px 4px #dc2626, -1px -1px 2px #fef08a !important; }

.card-skin-super-saiyan { border: 4px solid #fbbf24 !important; background: radial-gradient(circle, #fbbf24, #f59e0b, #d97706) !important; box-shadow: 0 0 40px #fbbf24, 0 0 60px rgba(251, 191, 36, 0.6) !important; animation: saiyan-glow 2s ease-in-out infinite; position: relative; }
@keyframes saiyan-glow { 0%, 100% { box-shadow: 0 0 40px #fbbf24, 0 0 60px rgba(251, 191, 36, 0.6); } 50% { box-shadow: 0 0 50px #fbbf24, 0 0 80px rgba(251, 191, 36, 0.8); } }
.card-skin-super-saiyan .cell { background: radial-gradient(circle, rgba(251, 191, 36, 0.4), rgba(245, 158, 11, 0.5)) !important; color: #fff !important; border: 2px solid #fbbf24 !important; border-radius: var(--radius-sm) !important; box-shadow: 0 0 20px rgba(251, 191, 36, 0.7), inset 0 0 15px rgba(255, 255, 255, 0.3) !important; font-weight: 900 !important; text-shadow: 0 0 10px #fbbf24 !important; }
.card-skin-super-saiyan .bingo-header .letter { color: #fff !important; text-shadow: 0 0 20px #fbbf24, 2px 2px 4px #d97706 !important; }

.card-skin-shadow-king { border: 3px solid #c4b5fd !important; background: linear-gradient(135deg, #e0e7ff, #c7d2fe, #a5b4fc) !important; box-shadow: 0 0 35px #c4b5fd, inset 0 0 40px rgba(196, 181, 253, 0.3) !important; }
.card-skin-shadow-king .cell { background: linear-gradient(135deg, rgba(224, 231, 255, 0.5), rgba(165, 180, 252, 0.4)) !important; color: #4c1d95 !important; border: 2px solid #a78bfa !important; border-radius: var(--radius-sm) !important; box-shadow: 0 0 15px rgba(196, 181, 253, 0.6), inset 0 0 10px rgba(255, 255, 255, 0.4) !important; }
.card-skin-shadow-king .bingo-header .letter { color: #4c1d95 !important; text-shadow: 0 0 15px #c4b5fd !important; }

.card-skin-blue-hedgehog { border: 4px solid #ef4444 !important; background: linear-gradient(90deg, #1e40af, #2563eb, #3b82f6) !important; box-shadow: 0 0 30px #3b82f6 !important; }
.card-skin-blue-hedgehog .cell { background: linear-gradient(90deg, rgba(30, 64, 175, 0.4), rgba(59, 130, 246, 0.5)) !important; color: #fff !important; border: 2px solid #ef4444 !important; border-radius: 50% !important; box-shadow: 0 0 12px rgba(59, 130, 246, 0.7) !important; }
.card-skin-blue-hedgehog .bingo-header .letter { color: #fff !important; text-shadow: 0 0 10px #3b82f6, 2px 2px 4px #ef4444 !important; }

.card-skin-plumber-hero { border: 4px solid #dc2626 !important; background: linear-gradient(180deg, #dc2626 0%, #3b82f6 50%, #1e40af 100%) !important; box-shadow: 0 0 25px rgba(220, 38, 38, 0.8) !important; }
.card-skin-plumber-hero .cell { background: linear-gradient(135deg, rgba(220, 38, 38, 0.2), rgba(59, 130, 246, 0.2)) !important; color: #fbbf24 !important; border: 3px solid #fbbf24 !important; border-radius: 15px !important; box-shadow: 0 0 10px rgba(251, 191, 36, 0.5) !important; font-weight: 800 !important; }
.card-skin-plumber-hero .bingo-header .letter { color: #fbbf24 !important; text-shadow: 2px 2px 4px #dc2626, -1px -1px 2px #fff !important; }

.card-skin-pink-puffball { border: 4px solid #fbcfe8 !important; background: radial-gradient(circle, #fce7f3, #fbcfe8, #f9a8d4) !important; box-shadow: 0 0 30px #fbcfe8 !important; }
.card-skin-pink-puffball .cell { background: linear-gradient(135deg, rgba(252, 231, 243, 0.6), rgba(251, 207, 232, 0.5)) !important; color: #ec4899 !important; border: 2px solid #f9a8d4 !important; border-radius: 50% !important; box-shadow: 0 0 15px rgba(251, 207, 232, 0.6) !important; }
.card-skin-pink-puffball .bingo-header .letter { color: #ec4899 !important; text-shadow: 0 0 10px #fbcfe8 !important; }

.card-skin-web-warrior { border: 4px solid #1e3a8a !important; background: linear-gradient(135deg, #dc2626, #7f1d1d, #1e3a8a) !important; box-shadow: 0 0 25px rgba(220, 38, 38, 0.6) !important; position: relative; }
.card-skin-web-warrior::before { content: ''; position: absolute; inset: 0; background-image: repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(30, 58, 138, 0.1) 10px, rgba(30, 58, 138, 0.1) 20px); pointer-events: none; }
.card-skin-web-warrior .cell { background: linear-gradient(135deg, rgba(220, 38, 38, 0.3), rgba(30, 58, 138, 0.3)) !important; color: #fff !important; border: 2px solid #1e3a8a !important; border-radius: var(--radius-sm) !important; box-shadow: 0 0 10px rgba(30, 58, 138, 0.6), inset 0 0 5px rgba(220, 38, 38, 0.3) !important; }
.card-skin-web-warrior .bingo-header .letter { color: #fff !important; text-shadow: 2px 2px 4px #dc2626, 0 0 10px #1e3a8a !important; }

.card-skin-little-alien { border: 4px solid #7c3aed !important; background: linear-gradient(135deg, #3b82f6, #2563eb, #6366f1) !important; box-shadow: 0 0 30px rgba(99, 102, 241, 0.8) !important; }
.card-skin-little-alien .cell { background: linear-gradient(135deg, rgba(59, 130, 246, 0.4), rgba(124, 58, 237, 0.3)) !important; color: #c4b5fd !important; border: 2px solid #7c3aed !important; border-radius: 20px !important; box-shadow: 0 0 12px rgba(124, 58, 237, 0.5) !important; }
.card-skin-little-alien .bingo-header .letter { color: #c4b5fd !important; text-shadow: 0 0 10px #7c3aed !important; }

.card-skin-cinnamon-puppy { border: 3px solid #bae6fd !important; background: linear-gradient(135deg, #f0f9ff, #e0f2fe, #bae6fd) !important; box-shadow: 0 0 25px rgba(186, 230, 253, 0.8) !important; }
.card-skin-cinnamon-puppy .cell { background: linear-gradient(135deg, rgba(240, 249, 255, 0.7), rgba(224, 242, 254, 0.6)) !important; color: #0369a1 !important; border: 2px solid #7dd3fc !important; border-radius: 50% !important; box-shadow: 0 0 10px rgba(186, 230, 253, 0.6) !important; }
.card-skin-cinnamon-puppy .bingo-header .letter { color: #0369a1 !important; text-shadow: 0 0 10px #bae6fd !important; }

/* CUSTOM BACKGROUND SKIN */
.card-skin-custom { background-size: cover !important; background-position: center !important; border: 2px solid rgba(255,255,255,0.5) !important; box-shadow: 0 0 30px rgba(0,0,0,0.8) !important; }
.card-skin-custom .cell { background: rgba(0,0,0,0.6) !important; backdrop-filter: blur(4px); color: white !important; border: 1px solid rgba(255,255,255,0.3) !important; }

.store-nav { display: flex; gap: var(--spacing-xs); margin-bottom: var(--spacing-md); background: rgba(0,0,0,0.3); padding: 5px; border-radius: var(--radius-md); }
.store-tab-btn { flex: 1; padding: var(--spacing-sm); border: none; background: transparent; color: #94a3b8; font-weight: 800; border-radius: var(--radius-sm); cursor: pointer; font-size: 11px; text-transform: uppercase; }
.store-tab-btn.active { background: var(--accent); color: white; box-shadow: 0 4px 10px rgba(14, 165, 233, 0.3); }
.skins-grid { display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-sm); }
.skin-item { background: rgba(255,255,255,0.05); padding: var(--spacing-sm); border-radius: var(--radius-lg); border: 1px solid rgba(255,255,255,0.1); text-align: center; position: relative; overflow: hidden; }
.skin-preview { height: 60px; border-radius: var(--radius-sm); margin-bottom: var(--spacing-xs); display: flex; align-items: center; justify-content: center; font-size: 20px; font-weight: 900; background-size: cover; background-position: center; }
.skin-name { font-size: 12px; font-weight: 800; color: white; margin-bottom: 4px; }
.skin-cost { font-size: 10px; color: var(--gold); margin-bottom: var(--spacing-xs); font-weight: 700; }
.btn-buy-skin { width: 100%; padding: 8px; border: none; border-radius: var(--radius-sm); font-weight: 800; font-size: 10px; cursor: pointer; }
.btn-buy-skin.owned { background: rgba(255,255,255,0.1); color: #cbd5e1; cursor: default; }
.btn-buy-skin.buy { background: var(--gold); color: black; }
.btn-buy-skin.equip { background: var(--success); color: white; }
.task-list { display: flex; flex-direction: column; gap: var(--spacing-sm); }
.task-item { background: linear-gradient(135deg, rgba(30,41,59,0.9), rgba(15,23,42,0.95)); padding: var(--spacing-md); border-radius: var(--radius-lg); border: 1px solid rgba(255,255,255,0.1); display: flex; justify-content: space-between; align-items: center; position: relative; overflow: hidden; }
.task-info h4 { margin: 0; font-size: 13px; font-weight: 900; color: white; letter-spacing: 0.5px; }
.task-info p { margin: 3px 0 0; font-size: 10px; color: #94a3b8; }
.task-reward { background: rgba(251, 191, 36, 0.15); color: var(--gold); padding: 4px 8px; border-radius: 6px; font-size: 10px; font-weight: 800; margin-top: 5px; display: inline-block; border: 1px solid rgba(251, 191, 36, 0.3); }
.btn-do-task { background: var(--accent); color: white; border: none; padding: var(--spacing-sm) 18px; border-radius: var(--radius-sm); font-weight: 800; font-size: 11px; cursor: pointer; transition: 0.2s; box-shadow: 0 4px 10px rgba(14, 165, 233, 0.3); min-width: 80px; z-index: 2; }
.btn-do-task:hover { transform: translateY(-2px); }
.btn-do-task:disabled { background: #334155; color: #94a3b8; cursor: not-allowed; transform: none; box-shadow: none; }
.flying-coin { position: fixed; width: 24px; height: 24px; background-image: url('https://cdn-icons-png.flaticon.com/512/217/217853.png'); background-size: contain; background-repeat: no-repeat; z-index: 99999; pointer-events: none; will-change: transform, opacity; }
@keyframes shake-hard { 0% { transform: translate(0, 0); } 25% { transform: translate(-3px, 3px); } 50% { transform: translate(3px, -3px); } 75% { transform: translate(-3px, -3px); } 100% { transform: translate(0, 0); } }
.shake-effect { animation: shake-hard 0.3s ease-in-out; will-change: transform; }
.float-loss { position: fixed; color: #ef4444; font-weight: 900; font-size: 18px; z-index: 100000; pointer-events: none; animation: floatDownFade 1s ease-out forwards; text-shadow: 0 1px 2px black; }
@keyframes floatDownFade { 0% { transform: translateY(0) scale(1); opacity: 1; } 100% { transform: translateY(40px) scale(0.8); opacity: 0; } }
#installGate { position: fixed; inset: 0; z-index: 2147483647; background: #0f172a; background-image: radial-gradient(circle at top right, rgba(14, 165, 233, 0.2), transparent 40%), radial-gradient(circle at bottom left, rgba(251, 191, 36, 0.1), transparent 40%); display: none; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 30px; }
.gate-logo { font-size: 64px; font-weight: 900; letter-spacing: -3px; color: white; margin-bottom: var(--spacing-sm); text-shadow: 0 0 40px rgba(14, 165, 233, 0.6); animation: floatLogo 3s ease-in-out infinite; }
.gate-logo span { color: var(--accent-glow); }
@keyframes floatLogo { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
.gate-title { font-size: 24px; font-weight: 800; color: white; margin-bottom: var(--spacing-md); line-height: 1.3; }
.gate-desc { font-size: 14px; color: #cbd5e1; max-width: 320px; margin-bottom: 40px; line-height: 1.6; opacity: 0.8; }
.gate-btn-install { background: linear-gradient(135deg, var(--accent), #2563eb); color: white; border: none; padding: var(--spacing-lg) 40px; border-radius: 50px; font-weight: 900; font-size: 16px; cursor: pointer; box-shadow: 0 0 30px rgba(14, 165, 233, 0.5); transition: transform 0.2s; display: flex; align-items: center; gap: var(--spacing-sm); border: 2px solid rgba(255,255,255,0.2); animation: pulseBtn 2s infinite; }
.gate-btn-install:active { transform: scale(0.95); }
@keyframes pulseBtn { 0% { box-shadow: 0 0 0 0 rgba(14, 165, 233, 0.7); } 70% { box-shadow: 0 0 0 20px rgba(14, 165, 233, 0); } 100% { box-shadow: 0 0 0 0 rgba(14, 165, 233, 0); } }
.gate-ios-note { margin-top: var(--spacing-xl); background: rgba(255,255,255,0.05); padding: var(--spacing-lg); border-radius: var(--radius-lg); border: 1px solid rgba(255,255,255,0.1); max-width: 320px; text-align: left; display: none; }
.ios-step { display: flex; gap: var(--spacing-sm); margin-bottom: var(--spacing-sm); align-items: center; font-size: 13px; color: #e2e8f0; }
.ios-icon { color: var(--accent-glow); }
#notifBlocker { position: fixed; inset: 0; z-index: 9999999; background: rgba(15, 23, 42, 0.98); display: none; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 30px; backdrop-filter: blur(10px); }
.notif-gate-icon { width: 80px; height: 80px; background: rgba(59, 130, 246, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: var(--spacing-lg); box-shadow: 0 0 30px rgba(59, 130, 246, 0.4); animation: pulseGate 2s infinite; }
@keyframes pulseGate { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
.notif-gate-title { font-size: 24px; font-weight: 900; margin-bottom: var(--spacing-sm); color: white; }
.notif-gate-desc { font-size: 14px; color: #cbd5e1; margin-bottom: 30px; line-height: 1.6; max-width: 300px; }
.btn-allow-notif { background: linear-gradient(135deg, var(--accent), #2563eb); color: white; border: none; padding: var(--spacing-md) 30px; border-radius: var(--radius-lg); font-weight: 800; font-size: 16px; cursor: pointer; box-shadow: 0 10px 30px rgba(59, 130, 246, 0.4); transition: 0.3s; width: 100%; max-width: 250px; display: flex; align-items: center; justify-content: center; gap: var(--spacing-sm); }
.btn-allow-notif:hover { transform: translateY(-3px); }
.blocked-help { display: none; background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); padding: var(--spacing-md); border-radius: var(--radius-md); margin-top: var(--spacing-lg); font-size: 12px; text-align: left; }
#splash-screen { position: fixed; inset: 0; background: #0f172a; z-index: 99999; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: opacity 0.8s ease, visibility 0.8s; }
.splash-logo { font-size: 60px; font-weight: 900; letter-spacing: -3px; color: white; animation: pulseLogo 2s infinite ease-in-out; text-shadow: 0 0 30px rgba(14, 165, 233, 0.5); }
.splash-logo span { color: var(--accent-glow); }
.splash-loader { width: 40px; height: 40px; border: 4px solid rgba(255,255,255,0.1); border-top: 4px solid var(--accent); border-radius: 50%; margin-top: var(--spacing-lg); animation: spin 1s linear infinite; }
@keyframes pulseLogo { 0%, 100% { transform: scale(1); filter: drop-shadow(0 0 10px rgba(56,189,248,0.2)); } 50% { transform: scale(1.1); filter: drop-shadow(0 0 30px rgba(56,189,248,0.8)); } }
@keyframes spin { 100% { transform: rotate(360deg); } }
#customToast { 
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%) translateY(-150%);
    /* Enhanced glassmorphism */
    background: var(--glass-bg-strong);
    backdrop-filter: blur(var(--glass-blur-strong));
    -webkit-backdrop-filter: blur(var(--glass-blur-strong));
    border: 1px solid var(--neon-cyan);
    padding: var(--spacing-md) var(--spacing-xl);
    border-radius: var(--radius-xl);
    z-index: 100000;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    gap: var(--spacing-sm);
    box-shadow: 0 15px 50px rgba(0,0,0,0.9), 0 0 30px var(--neon-glow-cyan);
    transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    min-width: 300px;
    max-width: 90%;
}
#customToast.show { transform: translateX(-50%) translateY(0); }
.toast-icon { color: var(--gold); flex-shrink: 0; }
.toast-msg { font-size: 14px; font-weight: 700; color: white; line-height: 1.4; }
.glass-panel { background: var(--glass-surface); backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px); border: 1px solid var(--glass-border); box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5); }

.ad-container-global { position: relative; z-index: 10 !important; width: 320px; height: 50px; display: flex; justify-content: center; align-items: center; margin: 10px auto; background: rgba(0,0,0,0.4); border-radius: 4px; border: 1px dashed rgba(255,255,255,0.3); text-align: center; overflow: hidden; clear: both; }

#jackpotBanner { background: linear-gradient(135deg, #271a00 0%, #451a03 50%, #000000 100%); border: 2px solid #fbbf24; color: #fbbf24; padding: var(--spacing-md); text-align: center; border-radius: var(--radius-lg); box-shadow: 0 0 25px rgba(251, 191, 36, 0.3), inset 0 0 20px rgba(251, 191, 36, 0.1); display: none; margin-bottom: var(--spacing-md); position: relative; overflow: hidden; animation: pulse-border 2s infinite; }
#jackpotBanner::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: linear-gradient(45deg, transparent, rgba(251, 191, 36, 0.2), transparent); animation: shimmer 3s infinite linear; }
@keyframes shimmer { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }
@keyframes pulse-border { 0% { box-shadow: 0 0 15px rgba(251, 191, 36, 0.2); border-color: #b45309; } 50% { box-shadow: 0 0 35px rgba(251, 191, 36, 0.6); border-color: #fbbf24; } 100% { box-shadow: 0 0 15px rgba(251, 191, 36, 0.2); border-color: #b45309; } }
.jp-label-new { font-size: 11px; font-weight: 900; letter-spacing: 3px; text-transform: uppercase; display: flex; align-items: center; justify-content: center; gap: var(--spacing-xs); margin-bottom: var(--spacing-xs); color: #fcd34d; text-shadow: 0 2px 4px rgba(0,0,0,0.8); }
.jackpot-amount { font-size: 32px; color: #ffffff; display: block; font-weight: 900; text-shadow: 0 2px 15px rgba(251, 191, 36, 0.8); font-family: 'Inter', sans-serif; background: linear-gradient(to bottom, #ffffff, #fcd34d); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
#loginOverlay { position: fixed; inset: 0; background: radial-gradient(circle at top right, #1e293b, #0f172a 70%); z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: var(--spacing-lg); overflow: hidden; }
.login-bg-blob { position: absolute; border-radius: 50%; filter: blur(80px); opacity: 0.4; z-index: -1; }
.blob-1 { width: 300px; height: 300px; background: var(--accent); top: -100px; right: -50px; animation: floatBlob 10s infinite alternate; }
.blob-2 { width: 250px; height: 250px; background: var(--minigame); bottom: -50px; left: -50px; animation: floatBlob 12s infinite alternate-reverse; }
@keyframes floatBlob { from { transform: translate(0,0); } to { transform: translate(30px, 50px); } }
.login-app-container { width: 100%; max-width: 400px; display: flex; flex-direction: column; align-items: center; text-align: center; animation: slideUpFade 0.8s cubic-bezier(0.16, 1, 0.3, 1); }
@keyframes slideUpFade { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
.app-logo-lg { font-size: 56px; font-weight: 900; letter-spacing: -3px; color: white; margin-bottom: var(--spacing-sm); text-shadow: 0 10px 30px rgba(14, 165, 233, 0.3); }
.app-logo-lg span { color: var(--accent-glow); }
.app-tagline { font-size: 16px; color: #cbd5e1; font-weight: 500; margin-bottom: 40px; line-height: 1.5; opacity: 0.9; }
.promo-badge { background: linear-gradient(90deg, rgba(251, 191, 36, 0.1), rgba(251, 191, 36, 0.2)); border: 1px solid rgba(251, 191, 36, 0.3); color: var(--gold); padding: 8px 16px; border-radius: var(--radius-xl); font-size: 12px; font-weight: 800; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 30px; display: flex; align-items: center; gap: var(--spacing-xs); box-shadow: 0 0 15px rgba(251, 191, 36, 0.1); }
.auth-btn-group { width: 100%; display: flex; flex-direction: column; gap: var(--spacing-md); margin-bottom: 40px; }
.btn-main-auth { background: white; color: black; border: none; width: 100%; padding: var(--spacing-lg); border-radius: var(--radius-lg); font-weight: 800; font-size: 16px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: var(--spacing-sm); transition: 0.3s; box-shadow: 0 10px 25px rgba(0,0,0,0.3); }
.btn-main-auth:hover { transform: translateY(-3px); box-shadow: 0 15px 35px rgba(0,0,0,0.4); }
.btn-sec-auth { background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2); width: 100%; padding: var(--spacing-lg); border-radius: var(--radius-lg); font-weight: 700; font-size: 16px; cursor: pointer; backdrop-filter: blur(10px); transition: 0.3s; }
.btn-sec-auth:hover { background: rgba(255,255,255,0.15); border-color: white; }
.login-footer-legal { position: absolute; bottom: 20px; left: 0; right: 0; text-align: center; padding: 0 20px; }
.legal-text { font-size: 10px; color: #64748b; line-height: 1.4; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; display: flex; flex-direction: column; gap: 5px; align-items: center; }

.points-badge { background: linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.4)); color: #fff; padding: 0 12px; height: 38px; border-radius: var(--radius-md); font-weight: 800; border: 1px solid rgba(251, 191, 36, 0.6); font-size: 13px; cursor: pointer; display: flex; align-items: center; gap: 6px; text-shadow: 0 1px 2px rgba(0,0,0,0.8); box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3); }

.next-draw-container { background: rgba(15, 23, 42, 0.8); border: 1px solid rgba(251, 191, 36, 0.4); padding: var(--spacing-md); border-radius: var(--radius-xl); margin-bottom: var(--spacing-md); display: flex; align-items: center; gap: var(--spacing-md); box-shadow: 0 10px 30px rgba(0,0,0,0.5); backdrop-filter: blur(10px); }
.nd-icon { background: linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.2)); color: var(--gold); width: 45px; height: 45px; border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center; flex-shrink: 0; border: 1px solid rgba(251, 191, 36, 0.4); }
.nd-info { flex: 1; }
.next-draw-label { font-size: 11px; font-weight: 800; color: var(--gold); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 2px; }
.next-draw-time { font-size: 18px; font-weight: 900; color: white; text-shadow: 0 2px 5px rgba(0,0,0,0.8); }
.card { background: var(--glass-surface); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border-radius: 24px; padding: var(--spacing-md); margin-bottom: var(--spacing-lg); border: 1px solid var(--glass-border); position: relative; transition: all 0.3s ease; box-shadow: 0 15px 35px rgba(0,0,0,0.4); }

.video-feed-wrapper { margin-bottom: var(--spacing-md); border-radius: 24px; overflow: hidden; background: #000; border: 2px solid rgba(255,255,255,0.2); box-shadow: 0 10px 40px rgba(0,0,0,0.6); }
.video-container { position: relative; width: 100%; aspect-ratio: 16 / 9; }
.video-overlay-bl { position: absolute; bottom: 12px; left: 12px; z-index: 10; background: rgba(0,0,0,0.9); padding: 6px 12px; border-radius: var(--radius-sm); border: 1px solid var(--success); display: flex; align-items: center; gap: 5px; color: var(--success); font-size: 11px; font-weight: 800; }
.draw-panel { display: grid; grid-template-columns: 1fr 90px; gap: var(--spacing-sm); margin-bottom: var(--spacing-lg); }
.prev-balls { background: rgba(0,0,0,0.4); border-radius: var(--radius-lg); padding: var(--spacing-sm); display: flex; align-items: center; gap: var(--spacing-xs); overflow-x: auto; scrollbar-width: none; border: 1px solid rgba(255,255,255,0.1); }
.ball-small { min-width: 40px; height: 40px; background: linear-gradient(135deg, #334155, #1e293b); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 900; border: 1px solid rgba(255,255,255,0.3); color: white; box-shadow: 0 4px 10px rgba(0,0,0,0.3); text-shadow: 0 1px 2px black; }
.current-ball-box { background: linear-gradient(135deg, var(--accent), #2563eb); border-radius: var(--radius-lg); height: 90px; display: flex; flex-direction: column; align-items: center; justify-content: center; box-shadow: 0 8px 25px rgba(59, 130, 246, 0.5); border: 2px solid rgba(255,255,255,0.4); position: relative; overflow: hidden; }
.current-ball-box::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent); animation: shine 3s infinite; }
@keyframes shine { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }
.bingo-header { display: grid; grid-template-columns: repeat(5, 1fr); gap: 4px; margin-bottom: var(--spacing-sm); }
.letter { text-align: center; font-size: 24px; font-weight: 900; color: var(--gold); text-shadow: 0 2px 10px rgba(251, 191, 36, 0.8); -webkit-text-stroke: 1px rgba(0,0,0,0.5); }
.grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 4px; position: relative; }
.cell { aspect-ratio: 1; background: rgba(255,255,255,0.1); border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center; font-weight: 800; font-size: 16px; border: 1px solid rgba(255,255,255,0.15); transition: all 0.3s; z-index: 2; position: relative; overflow: hidden; box-shadow: inset 0 2px 5px rgba(255,255,255,0.05); color: white; text-shadow: 0 2px 3px black; }
/* HIT VISIBILITY FIX */
.cell.hit { 
    background: linear-gradient(135deg, var(--accent), #2563eb) !important; 
    color: white !important; 
    transform: scale(1.05); 
    border-color: rgba(255,255,255,0.6) !important; 
    box-shadow: 0 5px 15px rgba(59, 130, 246, 0.6) !important; 
    text-shadow: 0 2px 2px rgba(0,0,0,0.5) !important;
    opacity: 1 !important;
}
.cell.hit::after {
    content: '';
    position: absolute; inset: 2px;
    border: 2px solid rgba(255,255,255,0.8);
    border-radius: var(--radius-sm);
    pointer-events: none;
}

.card.card-win { border: 3px solid var(--success) !important; box-shadow: 0 0 50px rgba(16, 185, 129, 0.5); animation: pulse-win 2s infinite; background: rgba(16, 185, 129, 0.2); }
.card.card-lost { opacity: 0.6; filter: grayscale(0.8); pointer-events: none; }
.card.card-puro { border: 2px solid var(--gold) !important; box-shadow: 0 0 40px rgba(251, 191, 36, 0.4); animation: pulse-gold 1.5s infinite; }
.cell.cell-waiting { background: #fffbeb !important; color: #b45309 !important; border: 2px dashed #f59e0b; animation: flash-waiting 1s infinite; z-index: 5; font-weight: 900; transform: scale(1.1); box-shadow: 0 0 20px rgba(251, 191, 36, 0.8); text-shadow: none; }
.cell.win-glow { background: #10b981 !important; color: white; z-index: 3; border: 2px solid #fff; box-shadow: 0 0 25px var(--success), inset 0 0 15px rgba(255,255,255,0.3); animation: popWin 0.4s ease forwards; }
.cell.win-glow::after { opacity: 0; animation: fadeInLine 0.5s forwards; }
.cell.win-line-h::after { content:''; position:absolute; top:50%; left:0; right:0; height:6px; background:var(--gold); transform:translateY(-50%); box-shadow:0 0 10px rgba(0,0,0,0.5); z-index:10; border-radius: var(--radius-sm); }
.cell.win-line-v::after { content:''; position:absolute; top:0; bottom:0; left:50%; width:6px; background:var(--gold); transform:translateX(-50%); box-shadow:0 0 10px rgba(0,0,0,0.5); z-index:10; border-radius: var(--radius-sm); }
.cell.win-line-d1::after { content:''; position:absolute; top:50%; left:-50%; right:-50%; height:6px; background:var(--gold); transform:translateY(-50%) rotate(45deg); box-shadow:0 0 10px rgba(0,0,0,0.5); z-index:10; }
.cell.win-line-d2::after { content:''; position:absolute; top:50%; left:-50%; right:-50%; height:6px; background:var(--gold); transform:translateY(-50%) rotate(-45deg); box-shadow:0 0 10px rgba(0,0,0,0.5); z-index:10; }
.late-overlay, .game-over-overlay { position: absolute; inset: 0; background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); z-index: 100; display: none; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: var(--spacing-lg); border-radius: var(--radius-xl); border: 1px solid rgba(255,255,255,0.2); }
.late-text { font-weight: 800; font-size: 20px; color: white; margin-bottom: var(--spacing-xs); text-shadow: 0 4px 10px rgba(0,0,0,0.8); }
.late-subtext { font-size: 14px; opacity: 1; color: #cbd5e1; text-shadow: 0 2px 4px black; }
#winnerBanner { display: none; background: linear-gradient(135deg, #10b981, #059669); color: white; padding: var(--spacing-md); border-radius: var(--radius-lg); text-align: center; font-weight: 900; margin-bottom: var(--spacing-md); animation: slideDown 0.5s ease; border: 2px solid #a7f3d0; box-shadow: 0 10px 30px rgba(16, 185, 129, 0.4); text-shadow: 0 1px 2px rgba(0,0,0,0.5); }
.winner-line { font-size: 13px; opacity: 1; margin-top: 5px; display: block; font-weight: 600; }
@keyframes slideDown { from { transform: translateY(-10px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
.chat-box { height: 480px; display: flex; flex-direction: column; background: #111827; border-radius: var(--radius-xl); border: 1px solid rgba(255,255,255,0.1); overflow: hidden; box-shadow: 0 20px 50px rgba(0,0,0,0.5); position: relative; }
.chat-header { padding: var(--spacing-md) 20px; background: rgba(31, 41, 55, 0.95); border-bottom: 1px solid rgba(255,255,255,0.08); display: flex; align-items: center; gap: var(--spacing-sm); z-index: 10; box-shadow: 0 2px 10px rgba(0,0,0,0.2); }
.chat-header h3 { margin: 0; font-size: 14px; font-weight: 800; letter-spacing: 0.5px; color: var(--accent-glow); text-transform: uppercase; }
#chatList { flex: 1; overflow-y: auto; padding: var(--spacing-md); display: flex; flex-direction: column; gap: var(--spacing-sm); scroll-behavior: smooth; background: #0f172a; }
.chat-row { display: flex; gap: var(--spacing-sm); max-width: 100%; animation: fadeIn 0.3s ease; align-items: flex-end; }
.chat-pfp { width: 32px; height: 32px; border-radius: 50%; border: 1px solid rgba(255,255,255,0.2); flex-shrink: 0; object-fit: cover; cursor: pointer; }
.chat-content { display: flex; flex-direction: column; max-width: 80%; }
.bubble { padding: var(--spacing-sm) 14px; font-size: 13px; line-height: 1.4; color: #e2e8f0; word-break: break-word; font-weight: 500; box-shadow: 0 2px 5px rgba(0,0,0,0.1); position: relative; }
.chat-row[style*="row-reverse"] .bubble { background: linear-gradient(135deg, var(--accent), #2563eb); color: white; border-radius: var(--radius-lg) 18px 4px 18px; text-shadow: 0 1px 2px rgba(0,0,0,0.2); }
.chat-row:not([style*="row-reverse"]) .bubble { background: #374151; color: #f3f4f6; border-radius: var(--radius-lg) 18px 18px 4px; border: 1px solid var(--glass-border); }
.chat-name { font-size: 10px; font-weight: 700; color: #94a3b8; margin-bottom: 4px; cursor:pointer; margin-left: 2px; }
.chat-row[style*="row-reverse"] .chat-name { display: none; }
.chat-input-area { background: #1f2937; padding: var(--spacing-sm); border-top: 1px solid rgba(255,255,255,0.08); display: flex; gap: var(--spacing-sm); align-items: center; }
.input-wrapper { flex: 1; display: flex; gap: var(--spacing-sm); background: #374151; padding: 0 15px; border-radius: 24px; border: 1px solid transparent; transition: 0.3s; align-items: center; height: 42px; }
.input-wrapper:focus-within { border-color: var(--accent); background: #4b5563; }
.input-wrapper input { flex: 1; background: none; border: none; color: white; outline: none; font-size: 13px; height: 100%; }
.send-btn { background: var(--accent); color: white; border: none; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.2s; box-shadow: 0 4px 12px rgba(14, 165, 233, 0.3); }
.send-btn:hover { transform: scale(1.05); }

/* === PROFESSIONAL MESSENGER (FULL PAGE) === */
/* FIX: INCREASED Z-INDEX TO COVER NAV BAR */
.pm-modal { position: fixed; inset: 0; background: #000000; z-index: 7000; display: none; align-items: flex-start; justify-content: flex-start; flex-direction: column; overflow: hidden; }
.pm-container { width: 100%; height: 100%; background: #000000; display: flex; flex-direction: column; overflow: hidden; }
.pm-header { padding: var(--spacing-md) 15px; display: flex; justify-content: space-between; align-items: center; background: #0f172a; border-bottom: 1px solid #1e293b; height: 60px; z-index: 50; }
.pm-header h3 { font-size: 22px; font-weight: 800; color: white; }
.pm-inbox-list { flex: 1; overflow-y: auto; padding: 0; background: #000000; }
.pm-item { display: flex; align-items: center; gap: var(--spacing-sm); padding: var(--spacing-md) 15px; transition: 0.2s; cursor: pointer; border-bottom: 1px solid #111; }
.pm-item:hover { background: #111; }
.pm-avatar { width: 55px; height: 55px; border-radius: 50%; object-fit: cover; }
.pm-info { flex: 1; display: flex; flex-direction: column; gap: 4px; }
.pm-name { font-size: 16px; font-weight: 700; color: white; }
.pm-preview { font-size: 14px; color: #909090; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 250px; }

.pm-chat-view { display: none; flex-direction: column; height: 100%; background: #000000; position: absolute; inset: 0; z-index: 60; }
.pm-chat-header { display: flex; align-items: center; justify-content:flex-start; padding: var(--spacing-sm) 15px; border-bottom: 1px solid #1e293b; background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(10px); height: 60px; }
.pm-messages { flex: 1; overflow-y: auto; padding: var(--spacing-md); display: flex; flex-direction: column; gap: 4px; background: #000000; }
.msg-bubble { padding: var(--spacing-sm) 16px; font-size: 15px; max-width: 75%; word-break: break-word; line-height: 1.4; margin-bottom: 2px; position: relative; }
.msg-me { align-self: flex-end; background: var(--messenger-blue); color: white; border-radius: var(--radius-lg) 18px 4px 18px; }
.msg-them { align-self: flex-start; background: var(--messenger-grey); color: white; border-radius: var(--radius-lg) 18px 18px 4px; }
.pm-input-area { padding: var(--spacing-sm); background: #0f172a; display: flex; gap: var(--spacing-sm); align-items: center; border-top: 1px solid #1e293b; padding-bottom: calc(10px + env(safe-area-inset-bottom)); }
.pm-styled-input { flex: 1; background: #1e293b; border: 1px solid #334155; padding: var(--spacing-sm) 20px; border-radius: 25px; color: white; font-size: 15px; outline: none; height: 45px; }

.unread-dot { width: 12px; height: 12px; background: var(--messenger-blue); border-radius: 50%; display: inline-block; box-shadow: 0 0 5px var(--messenger-blue); }

/* PWA Banner */
#pwaInstallBanner { position: fixed; bottom: calc(80px + env(safe-area-inset-bottom)); left: 0; right: 0; background: linear-gradient(135deg, #0f172a, #1e293b); border-top: 1px solid rgba(255,255,255,0.2); padding: var(--spacing-md) 20px; display: none; align-items: center; justify-content: space-between; z-index: 9999; box-shadow: 0 -10px 30px rgba(0,0,0,0.8); animation: slideUp 0.5s ease; }
@keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
.pwa-text { font-size: 14px; font-weight: 800; color: white; }
.pwa-sub { font-size: 11px; color: #cbd5e1; display: block; }
.pwa-btn { background: var(--accent); color: white; border: none; padding: var(--spacing-sm) 20px; border-radius: var(--radius-md); font-weight: 900; font-size: 13px; cursor: pointer; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4); }
.install-tabs { display: flex; gap: var(--spacing-sm); margin-bottom: var(--spacing-lg); background: rgba(0,0,0,0.3); padding: 5px; border-radius: var(--radius-md); }
.install-tab-btn { flex: 1; padding: var(--spacing-sm); border: none; background: transparent; color: #94a3b8; font-weight: 800; border-radius: var(--radius-sm); cursor: pointer; }
.install-tab-btn.active { background: var(--accent); color: white; }
.guide-step { display: flex; align-items: center; gap: var(--spacing-md); margin-bottom: var(--spacing-md); background: rgba(255,255,255,0.05); padding: var(--spacing-md); border-radius: var(--radius-md); border: 1px solid rgba(255,255,255,0.1); }
.step-num { width: 30px; height: 30px; background: var(--gold); color: black; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 900; flex-shrink: 0; }
.step-text { font-size: 13px; line-height: 1.4; color: #e2e8f0; }
#customConfirmModal { position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 100000; display: none; align-items: center; justify-content: center; padding: var(--spacing-lg); backdrop-filter: blur(10px); }
.conf-content { background: rgba(30, 41, 59, 0.95); border: 1px solid rgba(255,255,255,0.2); border-radius: 24px; padding: 25px; width: 100%; max-width: 320px; text-align: center; box-shadow: 0 25px 60px rgba(0,0,0,0.8); transform: scale(0.9); animation: popScale 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
.conf-title { font-size: 18px; font-weight: 900; color: white; margin: 0 0 10px 0; }
.conf-msg { font-size: 13px; color: #cbd5e1; margin-bottom: 25px; line-height: 1.5; }
.conf-actions { display: flex; gap: var(--spacing-sm); justify-content: center; }
.btn-conf-yes { background: var(--accent); color: white; flex: 1; padding: var(--spacing-sm); border: none; border-radius: var(--radius-md); font-weight: 800; cursor: pointer; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4); }
.btn-conf-no { background: rgba(255,255,255,0.1); color: #94a3b8; flex: 1; padding: var(--spacing-sm); border: 1px solid rgba(255,255,255,0.1); border-radius: var(--radius-md); font-weight: 800; cursor: pointer; }
#grandJackpotModal { position: fixed; inset: 0; z-index: 99999; background: rgba(0,0,0,0.95); display: none; align-items: center; justify-content: center; flex-direction: column; overflow: hidden; perspective: 1000px; }
.jackpot-rays { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 200vmax; height: 200vmax; background: conic-gradient(from 0deg, transparent 0deg, rgba(251, 191, 36, 0.1) 10deg, transparent 20deg, rgba(251, 191, 36, 0.1) 30deg, transparent 40deg, rgba(251, 191, 36, 0.1) 50deg, transparent 60deg, rgba(251, 191, 36, 0.1) 70deg, transparent 80deg, rgba(251, 191, 36, 0.1) 90deg, transparent 100deg, rgba(251, 191, 36, 0.1) 110deg, transparent 120deg, rgba(251, 191, 36, 0.1) 130deg, transparent 140deg, rgba(251, 191, 36, 0.1) 150deg, transparent 160deg, rgba(251, 191, 36, 0.1) 170deg, transparent 180deg, rgba(251, 191, 36, 0.1) 190deg, transparent 200deg, rgba(251, 191, 36, 0.1) 210deg, transparent 220deg, rgba(251, 191, 36, 0.1) 230deg, transparent 240deg, rgba(251, 191, 36, 0.1) 250deg, transparent 260deg, rgba(251, 191, 36, 0.1) 270deg, transparent 280deg, rgba(251, 191, 36, 0.1) 290deg, transparent 300deg, rgba(251, 191, 36, 0.1) 310deg, transparent 320deg, rgba(251, 191, 36, 0.1) 330deg, transparent 340deg, rgba(251, 191, 36, 0.1) 350deg, transparent 360deg); animation: spinRays 20s linear infinite; pointer-events: none; }
@keyframes spinRays { from { transform: translate(-50%, -50%) rotate(0deg); } to { transform: translate(-50%, -50%) rotate(360deg); } }
.jackpot-content { position: relative; z-index: 10; text-align: center; animation: jpPopIn 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
@keyframes jpPopIn { 0% { transform: scale(0); opacity: 0; } 100% { transform: scale(1); opacity: 1; } 100% { transform: scale(1); opacity: 1; } }
.jp-title { font-size: 40px; font-weight: 900; color: #fbbf24; text-transform: uppercase; letter-spacing: 2px; text-shadow: 0 0 20px rgba(251, 191, 36, 0.8), 0 0 40px rgba(251, 191, 36, 0.4); margin-bottom: var(--spacing-sm); animation: pulseText 1s infinite alternate; }
.jp-amount { font-size: 56px; font-weight: 900; color: white; background: linear-gradient(135deg, #fff, #fcd34d); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-shadow: 0 10px 30px rgba(0,0,0,0.5); margin: 0; line-height: 1; }
.jp-name { font-size: 18px; color: #cbd5e1; margin-top: 15px; font-weight: 600; letter-spacing: 1px; text-transform: uppercase; }
.icon-glow { filter: drop-shadow(0 0 20px rgba(251, 191, 36, 0.8)); animation: bounceIcon 2s infinite ease-in-out; color: #fbbf24; }
@keyframes bounceIcon { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
@keyframes pulseText { from { transform: scale(1); } to { transform: scale(1.05); } }
@keyframes pulse-ring { 0% { box-shadow: 0 0 0 0 rgba(255,255,255,0.1); } 70% { box-shadow: 0 0 0 15px rgba(255,255,255,0); } 100% { box-shadow: 0 0 0 0 rgba(255,255,255,0); } }
.modal { 
    position: fixed; inset: 0; 
    background: rgba(0,0,0,0.85); 
    z-index: 6000; 
    display: none; 
    align-items: center; 
    justify-content: center; 
    padding: var(--spacing-md); 
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
}
.modal-content { 
    /* Enhanced glassmorphism */
    background: var(--glass-bg-strong);
    backdrop-filter: blur(var(--glass-blur-strong));
    -webkit-backdrop-filter: blur(var(--glass-blur-strong));
    border-radius: 32px;
    width: 100%; 
    max-width: 480px;
    padding: 30px;
    border: 1px solid var(--glass-border);
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 30px 70px rgba(0,0,0,0.9), 0 0 1px rgba(255, 255, 255, 0.1) inset;
}
.reward-grid { display: grid; grid-template-columns: 1fr; gap: var(--spacing-md); margin-top: var(--spacing-lg); }
.reward-item { 
    background: var(--glass-bg);
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    padding: var(--spacing-lg);
    border-radius: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border: 1px solid var(--glass-border);
    transition: all 0.3s ease;
    box-shadow: 0 8px 24px rgba(0,0,0,0.3);
}
.reward-item:hover { 
    transform: translateY(-3px);
    border-color: var(--neon-cyan);
    box-shadow: 0 12px 35px rgba(6, 182, 212, 0.3);
}
.reward-main { display: flex; align-items: center; gap: var(--spacing-md); }
.reward-icon-box { width: 45px; height: 45px; background: rgba(59, 130, 246, 0.2); border-radius: 14px; display: flex; align-items: center; justify-content: center; color: var(--accent-glow); border: 1px solid rgba(59, 130, 246, 0.3); }
.reward-info b { font-size: 16px; display: block; color: white; letter-spacing: 0.3px; text-shadow: 0 2px 2px black; }
.reward-info small { color: var(--gold); font-weight: 800; font-size: 12px; display: flex; align-items: center; gap: 4px; margin-top: 2px; }
.btn-redeem { 
    background: linear-gradient(135deg, var(--neon-cyan), var(--neon-purple));
    color: white;
    border: none;
    padding: 12px 24px;
    min-height: 44px;
    border-radius: 50px;
    font-weight: 800;
    font-size: 13px;
    cursor: pointer;
    box-shadow: 0 8px 20px var(--neon-glow-cyan);
    transition: all 0.3s ease;
    text-shadow: 0 1px 2px black;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}
.btn-redeem:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 30px var(--neon-glow-cyan), 0 0 20px var(--neon-glow-pink);
}
.btn-redeem:active { 
    transform: scale(0.95);
}

/* === PROFESSIONAL PROFILE PAGE (REDESIGNED HIGH END - MOBILE OPTIMIZED) === */
.profile-page-container { 
    position: fixed; inset: 0; background: #020617; z-index: 6000; 
    display: none; flex-direction: column; overflow-y: auto; 
    padding-bottom: calc(80px + env(safe-area-inset-bottom)); 
    scroll-behavior: smooth;
}

/* Profile Cover - modern responsive background */
.profile-cover {
    height: 35vh;
    min-height: 200px;
    max-height: 280px;
    background-size: cover; /* Maintains aspect ratio while filling container */
    background-position: center;
    background-repeat: no-repeat;
    position: relative;
    background-color: #334155;
}
/* Gradient overlay for smooth transition */
.profile-cover::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 120px;
    background: linear-gradient(to bottom, transparent, #020617);
    pointer-events: none;
}

.profile-nav-back {
    position: absolute; top: 15px; left: 15px; z-index: 20;
    width: 44px; height: 44px; border-radius: 50%; background: rgba(0,0,0,0.5);
    backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.15);
    color: white; display: flex; align-items: center; justify-content: center; cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}
.profile-nav-back:hover { background: rgba(0,0,0,0.6); transform: scale(1.05); }
.profile-nav-back:active { transform: scale(0.95); }

.profile-settings-menu-btn {
    position: absolute; top: 15px; right: 15px; z-index: 20;
    width: 44px; height: 44px; border-radius: 50%; background: rgba(0,0,0,0.5);
    backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.15);
    color: white; display: flex; align-items: center; justify-content: center; cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}
.profile-settings-menu-btn:hover { background: rgba(0,0,0,0.6); transform: scale(1.05); }
.profile-settings-menu-btn:active { transform: scale(0.95); }

.profile-settings-dropdown {
    position: absolute;
    top: 70px;
    right: 15px;
    z-index: 19;
    background: rgba(15, 23, 42, 0.95);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    min-width: 200px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    opacity: 0;
    transform: translateY(-10px);
    pointer-events: none;
    transition: all 0.3s ease;
}

.profile-settings-dropdown.show {
    opacity: 1;
    transform: translateY(0);
    pointer-events: all;
}

.profile-settings-dropdown .dropdown-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 14px 18px;
    color: white;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    border-radius: 10px;
    margin: 6px;
}

.profile-settings-dropdown .dropdown-item:hover {
    background: rgba(59, 130, 246, 0.15);
}

.profile-settings-dropdown .dropdown-item i {
    width: 20px;
    height: 20px;
    color: var(--accent);
}

.profile-info-section {
    padding: 0 20px;
    margin-top: -80px; /* Elegant avatar overlap with cover photo */
    position: relative;
    z-index: 10;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.profile-avatar-container {
    position: relative;
    margin-bottom: var(--spacing-md);
}

/* Avatar frame styling for profile page - cleaner border and glow */
/* Note: !important is required to override inline styles set by renderAvatarWithBadge JS function */
.profile-avatar-container .avatar-frame {
    width: 120px !important;
    height: 120px !important;
    filter: drop-shadow(0 8px 24px rgba(0,0,0,0.4));
}
.profile-avatar-container .avatar-frame img {
    border: 4px solid white !important;
    box-shadow: 0 0 30px rgba(59, 130, 246, 0.3);
}

.profile-rank-ring {
    position: absolute; inset: -8px; border-radius: 50%;
    border: 2px solid rgba(255,255,255,0.2);
    animation: spin 20s linear infinite;
    pointer-events: none;
}

.profile-page-name { 
    font-size: 28px; font-weight: 900; color: white; 
    margin: 0 0 8px 0; letter-spacing: 0.5px; 
    display: flex; align-items: center; gap: var(--spacing-xs); justify-content: center; 
    text-shadow: 0 2px 8px rgba(0,0,0,0.6), 0 4px 16px rgba(0,0,0,0.3); 
    text-align: center; 
}
.profile-page-bio { 
    font-size: 15px; color: #cbd5e1; 
    margin: 0 0 25px 0; text-align: center; 
    max-width: 320px; line-height: 1.6;
    text-shadow: 0 1px 3px rgba(0,0,0,0.5);
}

.profile-action-btn {
    padding: 14px 32px;
    width: 100%;
    max-width: 280px;
    background: linear-gradient(135deg, #3b82f6, #2563eb);
    color: white;
    border: none;
    border-radius: 50px;
    font-size: 14px; font-weight: 700; 
    cursor: pointer; 
    box-shadow: 0 4px 20px rgba(59, 130, 246, 0.4);
    transition: all 0.3s ease; 
    margin-bottom: var(--spacing-sm);
    text-transform: uppercase; 
    letter-spacing: 1px;
}
.profile-action-btn:hover { 
    box-shadow: 0 6px 30px rgba(59, 130, 246, 0.5); 
    transform: translateY(-2px);
}
.profile-action-btn:active { transform: scale(0.97); }
.profile-action-btn.secondary { 
    background: rgba(255,255,255,0.08); 
    border: 1px solid rgba(255,255,255,0.15); 
    box-shadow: none; 
    color: white; 
    backdrop-filter: blur(12px);
}
.profile-action-btn.secondary:hover {
    background: rgba(255,255,255,0.12);
    border-color: rgba(255,255,255,0.25);
}

.profile-stats-card {
    display: flex; justify-content: space-around;
    background: rgba(15, 23, 42, 0.6);
    border: 1px solid var(--glass-border);
    backdrop-filter: blur(20px);
    padding: var(--spacing-lg) 15px;
    border-radius: var(--radius-xl);
    width: 100%;
    margin-bottom: var(--spacing-lg);
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
}
.stat-item { text-align: center; flex: 1; position: relative; }
.stat-item:not(:last-child)::after {
    content: ''; position: absolute; right: 0; top: 10%; bottom: 10%; width: 1px; background: rgba(255,255,255,0.08);
}
.stat-val { font-size: 20px; font-weight: 900; color: white; display: block; margin-bottom: 4px; letter-spacing: 0.5px; }
.stat-lbl { font-size: 11px; color: #94a3b8; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }

.profile-feed-section {
    padding: 0 10px;
    width: 100%;
}

.profile-feed-section::before {
    content: 'Posts';
    display: block;
    font-size: 16px;
    font-weight: 800;
    color: white;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: var(--spacing-md);
    padding-bottom: 12px;
    border-bottom: 2px solid rgba(255,255,255,0.1);
}

.profile-header { display: flex; align-items: center; gap: var(--spacing-md); margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.1); }
.profile-img-large { width: 70px; height: 70px; border-radius: 22px; border: 3px solid var(--accent); box-shadow: 0 0 20px rgba(59, 130, 246, 0.3); object-fit: cover; }
.profile-name-info { flex: 1; }
.profile-name { font-size: 20px; font-weight: 900; margin: 0; text-shadow: 0 2px 4px rgba(0,0,0,0.8); }
.profile-uid { font-size: 11px; opacity: 0.8; text-transform: uppercase; letter-spacing: 1px; color: #cbd5e1; }
.gcash-section { background: rgba(59, 130, 246, 0.15); padding: var(--spacing-md); border-radius: var(--radius-lg); margin-bottom: var(--spacing-md); border: 1px solid rgba(59, 130, 246, 0.3); }
.styled-input { 
    width: 100%;
    /* Enhanced glassmorphism */
    background: var(--glass-bg);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid var(--glass-border);
    padding: 12px 15px;
    min-height: 44px;
    border-radius: 14px;
    color: white;
    font-weight: 600;
    outline: none;
    font-size: 14px;
    text-shadow: none;
    transition: all 0.3s ease;
}
.styled-input:focus { 
    border-color: var(--neon-cyan);
    background: var(--glass-bg-strong);
    box-shadow: 0 0 20px var(--neon-glow-cyan);
}
.ref-container { background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(59, 130, 246, 0.15)); border: 1px solid rgba(16, 185, 129, 0.3); padding: var(--spacing-md); border-radius: var(--radius-lg); margin-bottom: var(--spacing-md); }
.history-box { margin-top: var(--spacing-lg); background: rgba(0,0,0,0.3); border-radius: var(--radius-xl); padding: var(--spacing-lg); border: 1px solid rgba(255,255,255,0.1); }
.history-list { max-height: 250px; overflow-y: auto; padding-right: 5px; }
.history-item { display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-sm) 0; border-bottom: 1px solid rgba(255,255,255,0.1); }
.btn-change { background: rgba(59, 130, 246, 0.2); color: var(--accent-glow); border: 1px solid var(--accent); height: 40px; padding: 0 15px; border-radius: var(--radius-md); font-size: 11px; font-weight: 800; cursor: pointer; display: flex; align-items: center; gap: 5px; transition: 0.2s; box-shadow: 0 4px 10px rgba(0,0,0,0.2); text-shadow: 0 1px 2px black; }
.btn-change:hover { background: var(--accent); color: white; }
.btn-change:disabled { opacity: 0.5; cursor: not-allowed; border-color: #475569; color: #94a3b8; background: none; }
.pattern-box { background: rgba(0,0,0,0.4); height: 40px; padding: 0 15px; border-radius: var(--radius-md); display: flex; align-items: center; gap: var(--spacing-xs); border: 1px solid rgba(255,255,255,0.1); backdrop-filter: blur(5px); }
.pattern-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--gold); box-shadow: 0 0 10px var(--gold); }
.pattern-text { font-size: 11px; font-weight: 800; color: var(--gold); text-transform: uppercase; letter-spacing: 0.5px; }
.notif-card-new { background: rgba(255,255,255,0.1); padding: var(--spacing-md); border-radius: var(--radius-lg); margin-bottom: 12px; border: 1px solid rgba(255,255,255,0.15); position: relative; transition: 0.2s; backdrop-filter: blur(5px); }
.notif-card-new:hover { background: rgba(255,255,255,0.15); border-color: var(--accent); }
.notif-header-new { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-xs); }
.notif-title { font-size: 12px; font-weight: 800; color: var(--accent-glow); display: flex; align-items: center; gap: 5px; }
.notif-time { font-size: 10px; opacity: 0.6; color: #cbd5e1; }
.notif-body { font-size: 13px; line-height: 1.5; color: #ffffff; text-shadow: 0 1px 2px black; }
.btn-del-notif { background: none; border: none; color: #94a3b8; cursor: pointer; padding: 4px; transition: 0.2s; }
.btn-del-notif:hover { color: var(--danger); }
.result-modal { position: absolute; inset: 0; background: rgba(0,0,0,0.85); display: none; align-items: center; justify-content: center; flex-direction: column; z-index: 50; border-radius: 30px; backdrop-filter: blur(8px); animation: fadeIn 0.3s; }
.res-title { font-size: 38px; font-weight: 900; margin-bottom: 5px; text-transform: uppercase; letter-spacing: 1px; }
.res-win { color: #fbbf24; text-shadow: 0 0 30px #fbbf24; }
.res-loss { color: #ef4444; text-shadow: 0 0 20px rgba(239, 68, 68, 0.5); }
.res-pts { font-size: 16px; color: white; opacity: 1; margin-bottom: 25px; text-shadow: 0 2px 4px black; }
.btn-play-again { background: white; color: black; border: none; padding: var(--spacing-sm) 25px; border-radius: 30px; font-weight: 900; font-size: 12px; cursor: pointer; box-shadow: 0 0 20px rgba(255,255,255,0.3); transition: 0.2s; }
.btn-play-again:hover { transform: scale(1.1); box-shadow: 0 0 30px rgba(255,255,255,0.5); }
@keyframes blink { from { opacity: 0.5; } to { opacity: 1; } }

/* === NEW SOCIAL ECOSYSTEM STYLES === */
.social-feed-container { margin-top: 15px; display: flex; flex-direction: column; gap: var(--spacing-md); }

/* Modern Feed Sort Pills */
.feed-sort-modern {
    display: flex; 
    align-items: center; 
    justify-content: center; 
    gap: 0;
    margin: 15px auto; 
    padding: 4px; 
    background: rgba(30, 41, 59, 0.8); 
    border-radius: 50px; 
    border: 1px solid rgba(255,255,255,0.1);
    width: fit-content;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
}
.sort-btn {
    display: flex; 
    align-items: center; 
    gap: var(--spacing-xs); 
    padding: var(--spacing-sm) 28px;
    border-radius: 50px; 
    border: none; 
    background: transparent;
    color: #94a3b8; 
    font-size: 12px; 
    font-weight: 800; 
    cursor: pointer; 
    transition: all 0.3s ease;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}
.sort-btn.active {
    background: linear-gradient(135deg, var(--accent), #2563eb);
    color: white;
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
    transform: scale(1.02);
}
.sort-btn:hover:not(.active) { 
    color: white; 
    background: rgba(255,255,255,0.05);
}

/* Post Card - Enhanced Glassmorphism */
.post-card { 
    background: var(--glass-bg);
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border-radius: 20px;
    border: 1px solid var(--glass-border);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 0 1px rgba(255, 255, 255, 0.1) inset;
    overflow: hidden;
    margin-bottom: 16px;
    transition: all 0.3s ease;
}
.post-card:hover {
    border-color: rgba(255, 255, 255, 0.15);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4), 0 0 1px rgba(255, 255, 255, 0.15) inset;
    transform: translateY(-2px);
}
.post-header { padding: var(--spacing-sm); display: flex; align-items: center; gap: var(--spacing-sm); border-bottom: 1px solid rgba(255,255,255,0.05); }
.post-avatar { width: 36px; height: 36px; border-radius: 50%; object-fit: cover; border: 1px solid rgba(255,255,255,0.2); cursor: pointer; }
.post-meta { flex: 1; }
.post-author { font-size: 13px; font-weight: 800; color: white; display: flex; align-items: center; gap: 5px; }
.friend-badge { background: var(--gold); color: black; font-size: 8px; padding: 2px 4px; border-radius: 4px; text-transform: uppercase; font-weight: 900; }
.post-time { font-size: 10px; color: #94a3b8; display: flex; align-items: center; gap: 5px; }
.visibility-badge { font-size: 10px; opacity: 0.7; }
.mood-display { font-size: 10px; background: rgba(255,255,255,0.1); padding: 2px 8px; border-radius: var(--radius-sm); margin-top: 2px; display: inline-block; color: var(--accent-glow); }

.post-content { padding: var(--spacing-md); font-size: 13px; line-height: 1.5; color: #e2e8f0; word-break: break-word; }
.post-image-container { width: 100%; max-height: 300px; overflow: hidden; display: flex; justify-content: center; background: #000; margin-bottom: var(--spacing-sm); }
.post-image { max-width: 100%; max-height: 300px; object-fit: contain; }

.post-actions { display: flex; border-top: 1px solid rgba(255,255,255,0.05); }
.action-btn { 
    flex: 1; 
    background: transparent; 
    border: none; 
    color: #94a3b8; 
    /* Touch-friendly padding */
    padding: 16px 12px;
    min-height: 44px;
    font-size: 12px; 
    font-weight: 700; 
    cursor: pointer; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    gap: var(--spacing-xs); 
    transition: all 0.3s ease; 
    position: relative;
    border-radius: 12px;
    margin: 4px;
}
.action-btn:hover { 
    background: var(--glass-bg);
    color: var(--neon-cyan);
    box-shadow: 0 0 15px var(--neon-glow-cyan);
    transform: translateY(-2px);
}
.action-btn:active {
    transform: translateY(0) scale(0.98);
}
.action-btn.liked { 
    color: inherit;
    background: transparent;
}
.action-btn.delete-btn {
    color: #ef4444;
}
.action-btn.delete-btn:hover {
    background: rgba(239, 68, 68, 0.1);
    color: #f87171;
}

/* Overflow Menu Styles */
.post-overflow-btn {
    background: transparent;
    border: none;
    color: #94a3b8;
    cursor: pointer;
    padding: 4px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    position: relative;
}
.post-overflow-btn:hover {
    background: rgba(255, 255, 255, 0.1);
    color: white;
}
.post-overflow-menu {
    position: absolute;
    top: 100%;
    right: 0;
    background: #1e293b;
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: var(--radius-md);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
    min-width: 150px;
    z-index: 1000;
    display: none;
    overflow: hidden;
}
.post-overflow-menu.show {
    display: block;
}
.overflow-menu-item {
    width: 100%;
    padding: 12px 16px;
    background: transparent;
    border: none;
    color: white;
    text-align: left;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 12px;
    font-weight: 600;
    transition: all 0.2s ease;
}
.overflow-menu-item:hover {
    background: rgba(255, 255, 255, 0.1);
}
.overflow-menu-item.delete-item {
    color: #ef4444;
}
.overflow-menu-item.delete-item:hover {
    background: rgba(239, 68, 68, 0.1);
}

.shared-post-container {
    margin: 0 15px 15px 15px; padding: var(--spacing-sm);
    border: 1px solid rgba(255,255,255,0.1); border-radius: var(--radius-md);
    background: rgba(0,0,0,0.2);
    font-size: 12px; color: #cbd5e1;
}

/* Reaction Popup */
.reaction-popup {
    position: absolute;
    bottom: 100%; left: 10px;
    background: rgba(30, 41, 59, 0.95);
    backdrop-filter: blur(10px);
    border-radius: 50px;
    padding: 5px 10px;
    display: none;
    gap: 5px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.5);
    border: 1px solid rgba(255,255,255,0.1);
    animation: popIn 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    z-index: 10;
}
.reaction-emoji {
    font-size: 20px;
    cursor: pointer;
    transition: transform 0.2s;
}
.reaction-emoji:hover { transform: scale(1.3); }

.comment-preview-area {
    padding: 8px 15px; border-top: 1px solid rgba(255,255,255,0.05); background: rgba(0,0,0,0.1);
}
.preview-item { display: flex; gap: 5px; font-size: 11px; align-items: center; }
.preview-user { font-weight: 800; color: white; cursor: pointer; }
.preview-text { color: #94a3b8; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 200px; }

/* Support Ticket Styles */
.ticket-item {
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: var(--radius-md);
    padding: var(--spacing-sm);
    margin-bottom: var(--spacing-sm);
    cursor: pointer;
    transition: all 0.2s ease;
}
.ticket-item:hover {
    background: rgba(255,255,255,0.08);
    border-color: var(--accent);
    transform: translateX(4px);
}
.ticket-item-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 5px;
}
.ticket-subject {
    font-weight: 800;
    font-size: 12px;
    color: white;
}
.ticket-status {
    font-size: 9px;
    padding: 3px 8px;
    border-radius: var(--radius-sm);
    font-weight: 800;
    text-transform: uppercase;
}
.ticket-status.open {
    background: rgba(251, 191, 36, 0.2);
    color: var(--gold);
}
.ticket-status.closed {
    background: rgba(100, 116, 139, 0.2);
    color: #94a3b8;
}
.ticket-time {
    font-size: 10px;
    color: #64748b;
    margin-top: 5px;
}
.ticket-reply-count {
    font-size: 10px;
    color: var(--accent-glow);
    display: flex;
    align-items: center;
    gap: 4px;
}

.ticket-reply-item {
    background: rgba(0,0,0,0.3);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-md);
    padding: var(--spacing-sm);
    margin-bottom: 12px;
}
.ticket-reply-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-xs);
}
.ticket-reply-avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid rgba(255,255,255,0.2);
}
.ticket-reply-author {
    font-weight: 800;
    font-size: 12px;
    color: white;
}
.ticket-reply-admin-badge {
    background: var(--accent);
    color: white;
    font-size: 8px;
    padding: 2px 6px;
    border-radius: 4px;
    font-weight: 900;
    text-transform: uppercase;
}
.ticket-reply-time {
    font-size: 10px;
    color: #64748b;
    margin-left: auto;
}
.ticket-reply-content {
    font-size: 12px;
    line-height: 1.5;
    color: #e2e8f0;
}
.ticket-original-message {
    background: rgba(59, 130, 246, 0.1);
    border: 1px solid rgba(59, 130, 246, 0.3);
    border-radius: var(--radius-md);
    padding: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
}
.ticket-original-label {
    font-size: 10px;
    font-weight: 800;
    color: var(--accent-glow);
    margin-bottom: var(--spacing-xs);
    text-transform: uppercase;
}


/* Friend Request Notification in Feed */
.friend-req-card { background: rgba(14, 165, 233, 0.1); border: 1px solid var(--accent); padding: var(--spacing-sm); border-radius: var(--radius-md); display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-md); }
.req-info { display: flex; align-items: center; gap: var(--spacing-sm); }
.req-actions { display: flex; gap: 5px; }
.btn-accept { background: var(--success); color: white; border: none; padding: 6px 12px; border-radius: var(--radius-sm); font-weight: 700; font-size: 11px; cursor: pointer; }
.btn-decline { background: rgba(255,255,255,0.1); color: white; border: none; padding: 6px 12px; border-radius: var(--radius-sm); font-weight: 700; font-size: 11px; cursor: pointer; }

/* User Options Modal */
.user-opt-btn { width: 100%; padding: var(--spacing-md); border: none; background: rgba(255,255,255,0.05); color: white; font-weight: 700; margin-bottom: var(--spacing-xs); border-radius: var(--radius-md); text-align: left; display: flex; align-items: center; gap: var(--spacing-sm); cursor: pointer; }
.user-opt-btn:hover { background: rgba(255,255,255,0.1); }

/* UPDATED MESSENGER STYLES */
.active-friends-bar {
    display: flex; gap: var(--spacing-md); overflow-x: auto; padding: var(--spacing-md); background: #0f172a; border-bottom: 1px solid #1e293b; scrollbar-width: none;
}
.active-friend-item {
    display: flex; flex-direction: column; align-items: center; min-width: 60px; cursor: pointer;
}
.active-img-wrap { position: relative; width: 50px; height: 50px; }
.active-img { width: 50px; height: 50px; border-radius: 50%; border: 2px solid var(--messenger-blue); object-fit: cover; }
.online-dot-large { position: absolute; bottom: 2px; right: 2px; width: 12px; height: 12px; background: #31a24c; border: 2px solid #000; border-radius: 50%; }
.active-name { font-size: 11px; color: #e4e6eb; margin-top: 5px; max-width: 60px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; }

/* NEW BOTTOM SHEET COMMENTS STYLE (TIKTOK/FB STYLE) */
.comment-modal { 
    position: fixed; inset: auto; bottom: 0; left: 0; right: 0; height: 70vh; 
    background: #1e293b; z-index: 7000; display: none; flex-direction: column; 
    border-radius: var(--radius-xl) 20px 0 0; border-top: 1px solid rgba(255,255,255,0.1);
    animation: slideUpModal 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    box-shadow: 0 -10px 50px rgba(0,0,0,0.5);
}
@keyframes slideUpModal { from { transform: translateY(100%); } to { transform: translateY(0); } }
.comment-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 6999; display: none; backdrop-filter: blur(2px); }

.comment-header { padding: var(--spacing-md); background: #1e293b; border-bottom: 1px solid rgba(255,255,255,0.1); display: flex; justify-content: space-between; align-items: center; border-radius: var(--radius-xl) 20px 0 0; }
.comment-list { flex: 1; overflow-y: auto; padding: var(--spacing-md); display: flex; flex-direction: column; gap: var(--spacing-md); }
.comment-item { display: flex; gap: var(--spacing-sm); align-items: flex-start; }
.comment-avatar { width: 32px; height: 32px; border-radius: 50%; flex-shrink: 0; }
.comment-content-block { display: flex; flex-direction: column; max-width: 85%; }
.comment-bubble { background: #334155; padding: 8px 12px; border-radius: var(--radius-md); margin-bottom: 2px; }
.comment-author { font-size: 11px; font-weight: 800; color: white; margin-bottom: 2px; display: flex; align-items: center; gap: 5px; }
.comment-text { font-size: 13px; color: #cbd5e1; word-break: break-word; }
.comment-actions { display: flex; gap: var(--spacing-md); font-size: 10px; font-weight: 700; color: #94a3b8; padding-left: 5px; }
.cmt-action-btn { background: none; border: none; padding: 0; color: #94a3b8; font-size: 10px; font-weight: 700; cursor: pointer; }
.cmt-action-btn:hover { color: white; }

.comment-input-area { padding: var(--spacing-sm); background: #1e293b; display: flex; flex-direction: column; gap: var(--spacing-sm); border-top: 1px solid rgba(255,255,255,0.05); padding-bottom: calc(10px + env(safe-area-inset-bottom)); }
.comment-input-row { display: flex; gap: var(--spacing-sm); }
.comment-input { flex: 1; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); padding: var(--spacing-sm) 15px; border-radius: var(--radius-xl); color: white; outline: none; }

.comment-preview-box { display: none; background: rgba(0,0,0,0.2); border: 1px solid var(--glass-border); border-radius: var(--radius-md); padding: var(--spacing-sm) 15px; margin-top: 5px; }
.comment-preview-label { font-size: 9px; font-weight: 700; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 5px; }
.comment-preview-content { display: flex; gap: var(--spacing-xs); align-items: flex-start; }
.comment-preview-avatar { width: 24px; height: 24px; border-radius: 50%; object-fit: cover; border: 1px solid rgba(255,255,255,0.1); }
.comment-preview-bubble { background: #334155; padding: 6px 10px; border-radius: var(--radius-sm); max-width: 100%; }
.comment-preview-text { font-size: 12px; color: #cbd5e1; word-break: break-word; line-height: 1.4; }

/* SHARE POST MODAL */
.share-modal { 
    position: fixed; inset: auto; bottom: 0; left: 0; right: 0; height: auto; max-height: 60vh;
    background: #1e293b; z-index: 7000; display: none; flex-direction: column; 
    border-radius: var(--radius-xl) 20px 0 0; border-top: 1px solid rgba(255,255,255,0.1);
    animation: slideUpModal 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    box-shadow: 0 -10px 50px rgba(0,0,0,0.5);
}
.share-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 6999; display: none; backdrop-filter: blur(2px); }
.share-header { padding: var(--spacing-md); background: #1e293b; border-bottom: 1px solid rgba(255,255,255,0.1); display: flex; justify-content: space-between; align-items: center; border-radius: var(--radius-xl) 20px 0 0; }
.share-content { padding: var(--spacing-lg) 20px calc(20px + env(safe-area-inset-bottom)) 20px; display: flex; flex-direction: column; gap: var(--spacing-md); }
.share-btn-option { background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.3); color: white; padding: var(--spacing-md); border-radius: var(--radius-md); font-weight: 700; cursor: pointer; transition: 0.2s; display: flex; align-items: center; gap: var(--spacing-sm); }
.share-btn-option:hover { background: rgba(59, 130, 246, 0.2); transform: translateY(-2px); }
.share-post-preview { background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); padding: var(--spacing-sm); border-radius: var(--radius-md); margin-bottom: var(--spacing-sm); }
.share-post-preview-author { font-size: 12px; font-weight: 700; color: #cbd5e1; margin-bottom: 5px; }
.share-post-preview-content { font-size: 11px; color: #94a3b8; overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; }

.image-preview-container { display: none; position: relative; margin-bottom: var(--spacing-sm); }
.image-preview-img { max-height: 100px; border-radius: var(--radius-sm); border: 1px solid rgba(255,255,255,0.2); }
.btn-remove-img { position: absolute; top: -5px; right: -5px; background: red; color: white; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; cursor: pointer; border: 1px solid white; font-size: 12px; }

/* EDIT PROFILE MODAL */
.edit-input { 
    width: 100%;
    /* Enhanced glassmorphism */
    background: var(--glass-bg);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid var(--glass-border);
    padding: 14px 16px;
    min-height: 48px;
    border-radius: 14px;
    color: white;
    font-family: 'Inter', sans-serif;
    font-size: 15px;
    margin-bottom: var(--spacing-md);
    outline: none;
    transition: all 0.3s ease;
}
.edit-input:focus {
    background: var(--glass-bg-strong);
    border-color: var(--neon-cyan);
    box-shadow: 0 0 20px var(--neon-glow-cyan), 0 0 1px rgba(255, 255, 255, 0.2) inset;
}
.edit-label { font-size: 11px; color: #94a3b8; margin-bottom: 5px; display: block; font-weight: 700; text-transform: uppercase; }

/* SEARCH MODAL */
.search-modal-container { position: fixed; inset: 0; background: #0f172a; z-index: 7000; display: none; flex-direction: column; }
.search-header { padding: var(--spacing-md); background: #1e293b; display: flex; gap: var(--spacing-sm); align-items: center; border-bottom: 1px solid rgba(255,255,255,0.1); }
.search-bar-wrap { flex: 1; background: rgba(0,0,0,0.3); border-radius: var(--radius-xl); padding: 8px 15px; display: flex; align-items: center; gap: var(--spacing-xs); border: 1px solid rgba(255,255,255,0.1); }
.search-input { background: none; border: none; color: white; outline: none; width: 100%; font-size: 14px; }
.search-results { flex: 1; overflow-y: auto; padding: var(--spacing-md); }
.search-res-item { display: flex; align-items: center; gap: var(--spacing-sm); padding: var(--spacing-sm); border-bottom: 1px solid rgba(255,255,255,0.05); cursor: pointer; }
.search-res-img { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; }

/* VIEW TOGGLING */
#view-home, #view-bingo { display: none; animation: fadeIn 0.3s ease; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

/* REACTION VIEWER MODAL */
.reaction-viewer-modal {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: 60vh;
    background: #1e293b;
    z-index: 8000;
    display: none;
    flex-direction: column;
    border-radius: var(--radius-xl) 20px 0 0;
    border-top: 1px solid rgba(255,255,255,0.1);
    animation: slideUpModal 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    box-shadow: 0 -10px 50px rgba(0,0,0,0.5);
}
.reaction-viewer-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.7);
    z-index: 7999;
    display: none;
    backdrop-filter: blur(2px);
}
.reaction-viewer-header {
    padding: var(--spacing-md);
    background: #1e293b;
    border-bottom: 1px solid rgba(255,255,255,0.1);
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-radius: var(--radius-xl) 20px 0 0;
}
.reaction-viewer-list {
    flex: 1;
    overflow-y: auto;
    padding: var(--spacing-md);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}
.reaction-viewer-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm);
    background: rgba(0,0,0,0.2);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: background 0.2s;
}
.reaction-viewer-item:hover {
    background: rgba(255,255,255,0.05);
}
.reaction-viewer-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid rgba(255,255,255,0.1);
}
.reaction-viewer-info {
    flex: 1;
}
.reaction-viewer-name {
    font-size: 13px;
    font-weight: 700;
    color: white;
}
.reaction-viewer-emoji {
    font-size: 20px;
}

/* === REACTION SUMMARY BAR === */
.post-engagement-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 15px;
    border-top: 1px solid rgba(255,255,255,0.05);
}
.post-engagement-bar:empty { display: none; }

.reaction-summary-bar {
    display: flex;
    gap: 4px;
    padding: 0;
    font-size: 12px;
    color: #94a3b8;
    flex-wrap: wrap;
    align-items: center;
    border-top: none;
    cursor: pointer;
}
.reaction-summary-bar:empty { display: none; }
.reaction-summary-item {
    display: flex;
    align-items: center;
    gap: 2px;
    background: none;
    padding: 0 2px;
    border-radius: 0;
    font-weight: 600;
    font-size: 13px;
}
.reaction-summary-item:hover { background: none; }

.comment-count-bar {
    font-size: 12px;
    color: #94a3b8;
    cursor: pointer;
    white-space: nowrap;
}
.comment-count-bar:hover { color: white; }

/* === PEOPLE YOU MAY KNOW (PYMK) === */
.pymk-section { margin-bottom: var(--spacing-lg); }
.pymk-title { padding: 0 5px; margin-bottom: var(--spacing-sm); font-size: 14px; font-weight: 800; color: #cbd5e1; }
.pymk-scroll { display: flex; gap: var(--spacing-sm); overflow-x: auto; padding-bottom: 10px; scrollbar-width: none; }
.pymk-card { background: #1e293b; border: 1px solid var(--glass-border); min-width: 140px; width: 140px; padding: var(--spacing-md); border-radius: var(--radius-lg); display: flex; flex-direction: column; align-items: center; text-align: center; position: relative; }
.pymk-img { width: 60px; height: 60px; border-radius: 50%; object-fit: cover; margin-bottom: var(--spacing-sm); border: 2px solid rgba(255,255,255,0.1); }
.pymk-name { font-size: 13px; font-weight: 700; color: white; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; width: 100%; margin-bottom: var(--spacing-xs); }
.btn-add-friend-sm { background: rgba(14, 165, 233, 0.2); color: var(--accent-glow); border: 1px solid var(--accent); padding: 6px 12px; border-radius: var(--radius-xl); font-size: 11px; font-weight: 800; cursor: pointer; width: 100%; }
.btn-add-friend-sm:hover { background: var(--accent); color: white; }

/* === GLOBAL HORIZONTAL BUTTON GROUP === */
.btn-group-horizontal {
    display: flex;
    gap: var(--spacing-sm);
    width: 100%;
    justify-content: center;
    flex-wrap: wrap;
}
.btn-group-horizontal > * {
    flex: 1;
    min-width: 0;
    white-space: nowrap;
}

/* === PROFILE BUTTON GROUP === */
.profile-btn-group {
    display: flex;
    gap: var(--spacing-sm);
    width: 100%;
    max-width: 360px;
    margin-bottom: var(--spacing-md);
    justify-content: center;
    flex-wrap: wrap;
}
.profile-btn-group .profile-action-btn,
.profile-btn-group .btn-unfriend-modern {
    flex: 1;
    min-width: 0;
    max-width: none;
    width: auto;
    margin-bottom: 0;
    padding: var(--spacing-sm) 16px;
    font-size: 12px;
    white-space: nowrap;
}

/* MOBILE SPECIFIC OPTIMIZATIONS */
@media (max-width: 480px) {
    .profile-avatar-container .avatar-frame { width: 100px !important; height: 100px !important; }
    .profile-page-name { font-size: 24px; }
    .profile-cover { height: 22vh; min-height: 160px; }
    .profile-info-section { margin-top: -50px; }
    .profile-stats-card { padding: var(--spacing-sm) 10px; }
    .stat-val { font-size: 18px; }
    .stat-lbl { font-size: 10px; }
    .profile-action-btn, .btn-unfriend-modern { 
        max-width: 100%; 
        padding: var(--spacing-sm) 24px; 
        font-size: 13px;
    }
    .profile-btn-group { max-width: 100%; }
    .profile-btn-group .profile-action-btn,
    .profile-btn-group .btn-unfriend-modern {
        padding: var(--spacing-sm) 12px;
        font-size: 11px;
    }
    .app-logo-lg { font-size: 40px; }
    .modal-content { max-height: 85vh; width: 95%; }
    /* .container { padding-bottom: 100px; } REMOVED: Handled by main-scroll-container */
    
    /* Create Post Section - Mobile Responsive */
    /* ...continuation from previous post-tools ... */
    .post-tools {
        flex-direction: column;
        align-items: stretch;
        gap: 10px;
    }

    .custom-visibility-dropdown {
        width: 100%;
    }
    
    .visibility-trigger {
        justify-content: center;
        width: 100%;
    }

    .btn-post-modern {
        width: 100%;
        margin-top: 5px;
    }

    /* Mobile Modal Adjustments */
    .modal-content {
        width: 95%;
        padding: 20px;
        max-height: 85vh;
    }

    /* Bingo Card Mobile Scaling */
    .card {
        padding: 10px;
    }
    .cell {
        font-size: 14px; /* Slightly smaller text for small screens */
    }
    .ball-small {
        min-width: 35px;
        height: 35px;
        font-size: 12px;
    }

    /* Chat & Store Mobile Fixes */
    .chat-box {
        height: 400px; /* Adjust height for mobile screens */
    }
    .store-nav {
        overflow-x: auto;
        white-space: nowrap;
    }
    .skins-grid {
        grid-template-columns: 1fr 1fr; /* Keep 2 columns even on mobile */
    }
    
    /* Hide floating elements that might block view */
    .sticky-ad-footer {
        z-index: 4000; /* Lower than modals */
    }
}

/* === ANIMATIONS === */
@keyframes popScale {
    0% { transform: scale(0.8); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideUp {
    from { transform: translateY(100%); }
    to { transform: translateY(0); }
}

@keyframes pulse-ring {
    0% { box-shadow: 0 0 0 0 rgba(255,255,255,0.1); }
    70% { box-shadow: 0 0 0 15px rgba(255,255,255,0); }
    100% { box-shadow: 0 0 0 0 rgba(255,255,255,0); }
}

@keyframes spin {
    100% { transform: rotate(360deg); }
}

/* === SCROLLBAR STYLING === */
::-webkit-scrollbar {
    width: 6px;
    height: 6px;
}
::-webkit-scrollbar-track {
    background: #0f172a; 
}
::-webkit-scrollbar-thumb {
    background: #334155; 
    border-radius: 3px;
}
::-webkit-scrollbar-thumb:hover {
    background: var(--accent); 
}
/* ========================================= */
/* === ULTIMATE STORE DESIGN UPGRADE === */
/* ========================================= */

/* Store Tabs - Modern Pills */
.store-nav {
    background: rgba(15, 23, 42, 0.6);
    padding: 6px;
    border-radius: 50px;
    border: 1px solid rgba(255,255,255,0.1);
    box-shadow: inset 0 2px 5px rgba(0,0,0,0.5);
    margin-bottom: 20px;
    display: flex;
    justify-content: space-between;
}

.store-tab-btn {
    border-radius: 40px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    font-size: 11px;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    flex: 1;
    color: #64748b;
}

.store-tab-btn.active {
    background: linear-gradient(135deg, var(--accent), #2563eb);
    color: white;
    box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
    transform: scale(1.05);
    font-weight: 900;
}

/* === REWARD CARDS (Cash Out) - Credit Card Style === */
.reward-grid {
    display: grid;
    gap: 15px;
}

.reward-item {
    background: linear-gradient(135deg, rgba(30, 41, 59, 0.9), rgba(15, 23, 42, 0.95));
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 16px;
    padding: 20px;
    position: relative;
    overflow: hidden;
    transition: transform 0.2s, box-shadow 0.2s;
    box-shadow: 0 10px 20px rgba(0,0,0,0.3);
}

.reward-item:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 30px rgba(0,0,0,0.5);
    border-color: var(--accent);
}

/* Shine Effect */
.reward-item::before {
    content: '';
    position: absolute;
    top: 0; left: -100%;
    width: 100%; height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent);
    transition: 0.5s;
}
.reward-item:hover::before {
    left: 100%;
}

.reward-main {
    display: flex;
    align-items: center;
    gap: 15px;
    z-index: 2;
    position: relative;
}

.reward-icon-box {
    width: 50px;
    height: 50px;
    background: rgba(255,255,255,0.05);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    box-shadow: inset 0 2px 5px rgba(0,0,0,0.5);
    border: 1px solid rgba(255,255,255,0.1);
}

.reward-info b {
    font-size: 18px;
    display: block;
    margin-bottom: 4px;
    background: linear-gradient(to right, white, #cbd5e1);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.reward-info small {
    color: var(--gold);
    font-weight: 700;
    background: rgba(251, 191, 36, 0.1);
    padding: 2px 8px;
    border-radius: 6px;
    border: 1px solid rgba(251, 191, 36, 0.2);
}

.btn-redeem {
    margin-top: 15px;
    width: 100%;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
    color: white;
    font-weight: 700;
    transition: 0.2s;
}
.btn-redeem:hover {
    background: var(--success);
    border-color: var(--success);
    color: white;
    box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
}

/* === SKINS GRID - Trading Card Style === */
.skins-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); /* Responsive Grid */
    gap: 12px;
}

.skin-item {
    background: #1e293b;
    border-radius: 16px;
    padding: 10px;
    text-align: center;
    border: 1px solid rgba(255,255,255,0.05);
    transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
}

.skin-item:hover {
    transform: translateY(-5px) scale(1.02);
    box-shadow: 0 10px 25px rgba(0,0,0,0.5);
    border-color: rgba(255,255,255,0.2);
    z-index: 10;
}

.skin-preview {
    height: 80px; /* Taller preview */
    border-radius: 12px;
    margin-bottom: 10px;
    box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
    position: relative;
    overflow: hidden;
}

/* Rarity Glow for Skins */
.skin-item:nth-child(3n) { border-color: rgba(251, 191, 36, 0.3); } /* Gold tint */
.skin-item:nth-child(3n+1) { border-color: rgba(236, 72, 153, 0.3); } /* Pink tint */

.skin-name {
    font-size: 11px;
    font-weight: 700;
    color: #e2e8f0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.skin-cost {
    font-size: 10px;
    color: var(--gold);
    font-weight: 800;
    margin-bottom: 8px;
}

.btn-buy-skin {
    padding: 6px;
    font-size: 10px;
    border-radius: 8px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* === EARN TASKS - Neon Glow === */
.task-item {
    background: rgba(15, 23, 42, 0.8);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 16px;
    padding: 16px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 10px;
    position: relative;
    overflow: hidden;
}

/* Task Glow Animation */
@keyframes border-pulse {
    0% { border-color: rgba(255,255,255,0.1); }
    50% { border-color: rgba(59, 130, 246, 0.5); box-shadow: 0 0 15px rgba(59, 130, 246, 0.2); }
    100% { border-color: rgba(255,255,255,0.1); }
}

.task-item:first-child {
    animation: border-pulse 2s infinite;
    background: linear-gradient(90deg, rgba(30, 41, 59, 0.8), rgba(15, 23, 42, 0.9));
}

.task-info h4 {
    font-size: 14px;
    margin-bottom: 4px;
    color: white;
}

.task-info p {
    font-size: 11px;
    opacity: 0.6;
}

.task-reward {
    font-size: 10px;
    font-weight: 800;
    color: var(--success);
    background: rgba(16, 185, 129, 0.1);
    padding: 4px 8px;
    border-radius: 4px;
    margin-top: 6px;
    display: inline-block;
    border: 1px solid rgba(16, 185, 129, 0.2);
}

.btn-do-task {
    background: var(--accent);
    box-shadow: 0 4px 15px rgba(14, 165, 233, 0.3);
    border-radius: 12px;
    padding: 10px 20px;
    transition: 0.2s;
}

.btn-do-task:hover {
    transform: scale(1.05);
    background: #0ea5e9;
}

/* === AD WATCH PANEL (Glass Panel Upgrade) === */
.glass-panel {
    background: linear-gradient(135deg, rgba(251, 191, 36, 0.05), rgba(15, 23, 42, 0.8));
    border: 1px solid rgba(251, 191, 36, 0.3);
    box-shadow: 0 0 30px rgba(251, 191, 36, 0.1);
}

#btnWatchAd {
    background: linear-gradient(135deg, #f59e0b, #d97706);
    box-shadow: 0 5px 20px rgba(245, 158, 11, 0.4);
    border: 1px solid rgba(255,255,255,0.2);
    position: relative;
    overflow: hidden;
}

#btnWatchAd::after {
    content: '';
    position: absolute;
    top: -50%; left: -50%;
    width: 200%; height: 200%;
    background: linear-gradient(45deg, transparent, rgba(255,255,255,0.2), transparent);
    animation: shine 3s infinite;
}

/* === MOBILE-FIRST RESPONSIVE DESIGN === */

/* Show hamburger on mobile, hide some header icons */
@media (max-width: 768px) {
    .hamburger-menu {
        display: flex;
    }
    
    /* Hide some header icons on small screens to save space */
    .header-icon-btn:not(:last-child) {
        display: none;
    }
    
    .header-right {
        gap: 16px;
    }
    
    /* Adjust header padding for mobile */
    .app-header {
        padding-left: 16px;
        padding-right: 16px;
    }
    
    /* Make brand logo slightly smaller on very small screens */
    .brand-logo {
        font-size: 20px;
    }
}

/* Extra small devices (phones in portrait) */
@media (max-width: 480px) {
    /* Tighter spacing on smallest screens */
    .container {
        padding: 0 12px;
    }
    
    /* Adjust post creator padding */
    .post-creator-modern {
        padding: 20px 16px;
        border-radius: 20px;
    }
    
    /* Adjust bottom nav */
    .bottom-nav {
        left: 12px;
        right: 12px;
        height: 65px;
        border-radius: 20px;
    }
    
    .nav-item {
        min-width: 50px;
    }
    
    .nav-item i {
        width: 20px;
        height: 20px;
    }
    
    .nav-label {
        font-size: 9px;
    }
    
    /* Adjust FAB size */
    .nav-center-fab {
        width: 56px;
        height: 56px;
        top: -26px;
    }
}

/* Medium devices (tablets) */
@media (min-width: 769px) {
    /* Show all header icons on tablet+ */
    .hamburger-menu {
        display: none !important;
    }
    
    .header-icon-btn {
        display: flex !important;
    }
}

/* Large devices (desktops) */
@media (min-width: 1024px) {
    .container {
        max-width: 600px;
    }
    
    .bottom-nav {
        max-width: 600px;
    }
}

</style>

<style>

    .header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 999;
        background: linear-gradient(180deg, rgba(15, 23, 42, 0.98) 0%, rgba(15, 23, 42, 0.95) 100%);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        padding: var(--spacing-md) var(--spacing-lg);
        padding-top: calc(var(--spacing-md) + env(safe-area-inset-top));
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }
    .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        max-width: 800px;
        margin: 0 auto;
    }
    .header-title {
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 22px;
        font-weight: 900;
        color: white;
        cursor: pointer;
        transition: transform 0.2s;
    }
    .header-title:active {
        transform: scale(0.95);
    }
    .app-icon {
        width: 42px;
        height: 42px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(14, 165, 233, 0.3);
        transition: transform 0.3s;
    }
    .header-title:hover .app-icon {
        transform: rotate(5deg) scale(1.05);
    }
    .header-actions {
        display: flex;
        gap: 12px;
        align-items: center;
    }
    .header-btn {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.08);
        padding: 10px;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.2s;
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .header-btn:active {
        transform: scale(0.95);
        background: rgba(255, 255, 255, 0.1);
    }
    .header-btn i {
        width: 20px;
        height: 20px;
        color: white;
    }
    .notif-badge {
        position: absolute;
        top: 6px;
        right: 6px;
        background: #ef4444;
        color: white;
        font-size: 10px;
        font-weight: 700;
        padding: 2px 5px;
        border-radius: 8px;
        min-width: 16px;
        text-align: center;
        box-shadow: 0 2px 6px rgba(239, 68, 68, 0.5);
    }


    .bottom-nav {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 998;
        background: linear-gradient(0deg, rgba(15, 23, 42, 0.98) 0%, rgba(15, 23, 42, 0.95) 100%);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        padding: var(--spacing-sm) var(--spacing-md);
        padding-bottom: calc(var(--spacing-sm) + env(safe-area-inset-bottom));
        border-top: 1px solid rgba(255, 255, 255, 0.05);
        box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.3);
    }
    
    .nav-container {
        display: flex;
        justify-content: space-around;
        align-items: center;
        max-width: 600px;
        margin: 0 auto;
    }
    
    .nav-item {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 4px;
        cursor: pointer;
        padding: 8px;
        border-radius: 12px;
        transition: all 0.2s;
        position: relative;
    }
    
    .nav-item:active {
        transform: scale(0.95);
        background: rgba(255, 255, 255, 0.05);
    }
    
    .nav-icon {
        width: 24px;
        height: 24px;
        color: rgba(255, 255, 255, 0.4);
        transition: all 0.3s;
    }
    
    .nav-label {
        font-size: 11px;
        font-weight: 500;
        color: rgba(255, 255, 255, 0.4);
        transition: all 0.3s;
    }
    
    .nav-item.active .nav-icon {
        color: var(--accent);
        transform: scale(1.1);
    }
    
    .nav-item.active .nav-label {
        color: var(--accent);
        font-weight: 600;
    }
    
    /* Active indicator dot */
    .nav-item.active::before {
        content: '';
        position: absolute;
        top: 4px;
        width: 4px;
        height: 4px;
        background: var(--accent);
        border-radius: 50%;
        box-shadow: 0 0 8px var(--accent-glow);
    }
    
    /* Special styling for center/featured nav item */
    .nav-item.featured {
        background: linear-gradient(135deg, var(--accent) 0%, #0284c7 100%);
        border-radius: 16px;
        padding: 12px 16px;
        box-shadow: 0 4px 12px rgba(14, 165, 233, 0.3);
    }
    
    .nav-item.featured .nav-icon {
        color: white;
    }
    
    .nav-item.featured .nav-label {
        color: white;
        font-weight: 600;
    }
    
    .nav-item.featured:active {
        transform: scale(0.95);
        box-shadow: 0 2px 8px rgba(14, 165, 233, 0.4);
    }


    .home-tab {
        padding-top: 80px;
        max-width: 800px;
        margin: 0 auto;
        padding-left: var(--spacing-md);
        padding-right: var(--spacing-md);
    }

    /* === MODERN POST CREATOR === */
    .post-creator-modern {
        background: rgba(255, 255, 255, 0.02);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        padding: 28px 24px;
        border-radius: 20px;
        border: none;
        margin-bottom: var(--spacing-xl);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        display: flex;
        flex-direction: column;
        gap: 20px;
        transition: transform 0.2s;
    }
    .post-creator-title {
        margin: 0;
        color: rgba(255, 255, 255, 0.5);
        font-size: 14px;
        font-weight: 400;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    .post-creator-title i {
        width: 14px;
        opacity: 0.5;
    }
    .post-input-modern {
        background: transparent;
        border: none;
        border-radius: var(--radius-lg);
        padding: var(--spacing-md);
        color: white;
        font-family: 'Inter', sans-serif;
        font-size: 15px;
        resize: none;
        min-height: 90px;
        outline: none;
        transition: 0.3s;
    }
    .post-input-modern::placeholder {
        color: rgba(255, 255, 255, 0.3);
    }
    .post-input-modern:focus {
        background: rgba(255, 255, 255, 0.03);
        border: none;
    }
    
    /* === ACTION BUTTONS ROW (Small Icon Buttons) === */
    .action-buttons-row {
        display: flex;
        gap: 8px;
        margin-top: 8px;
    }
    
    .action-btn-ghost {
        background: rgba(255, 255, 255, 0.04);
        border: 1px solid rgba(255, 255, 255, 0.06);
        padding: 8px;
        border-radius: 10px;
        color: rgba(255, 255, 255, 0.6);
        font-size: 13px;
        cursor: pointer;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 36px;
        height: 36px;
    }
    .action-btn-ghost:active {
        transform: scale(0.96);
        background: rgba(255, 255, 255, 0.08);
    }
    .action-btn-ghost i {
        width: 18px;
        height: 18px;
        opacity: 0.6;
    }
    
    /* === FEELINGS SELECTOR === */
    .feelings-selector-container {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
        -ms-overflow-style: none;
    }
    .feelings-selector-container::-webkit-scrollbar {
        display: none;
    }
    .feelings-selector {
        display: flex;
        gap: 8px;
        padding: 4px 0;
        min-width: min-content;
    }
    .feeling-btn {
        background: rgba(255, 255, 255, 0.04);
        border: 1px solid rgba(255, 255, 255, 0.06);
        padding: 8px 14px;
        border-radius: 20px;
        color: rgba(255, 255, 255, 0.7);
        font-size: 13px;
        cursor: pointer;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        gap: 6px;
        white-space: nowrap;
        font-weight: 500;
    }
    .feeling-btn:active,
    .feeling-btn.active {
        transform: scale(0.96);
        background: rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.15);
    }
    
    /* === POST FOOTER === */
    .post-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 12px;
        margin-top: 8px;
    }
    .post-footer-left {
        flex: 1;
        min-width: 0;
    }
    .post-footer-right {
        display: flex;
        gap: 10px;
        align-items: center;
        flex-shrink: 0;
    }
    
    /* Privacy Button */
    .privacy-btn {
        background: rgba(255, 255, 255, 0.04);
        border: 1px solid rgba(255, 255, 255, 0.06);
        padding: 10px 16px;
        border-radius: 12px;
        color: rgba(255, 255, 255, 0.7);
        font-size: 13px;
        cursor: pointer;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        gap: 6px;
        font-weight: 500;
    }
    .privacy-btn:active {
        transform: scale(0.96);
        background: rgba(255, 255, 255, 0.08);
    }
    .privacy-btn i {
        width: 16px;
        height: 16px;
        opacity: 0.6;
    }
    
    /* Post Button - New Color */
    .post-btn-modern {
        background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
        color: white;
        border: none;
        padding: 10px 24px;
        border-radius: 12px;
        font-weight: 600;
        font-size: 14px;
        cursor: pointer;
        transition: all 0.25s;
        box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
    }
    .post-btn-modern:active {
        transform: scale(0.96);
    }

    /* === POSTS FEED === */
    .post-card {
        background: rgba(255, 255, 255, 0.02);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        padding: 24px;
        border-radius: 20px;
        margin-bottom: var(--spacing-lg);
        border: 1px solid rgba(255, 255, 255, 0.04);
        transition: all 0.3s;
    }
    .post-header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: var(--spacing-md);
    }
    .post-avatar {
        width: 48px;
        height: 48px;
        border-radius: 50%;
        cursor: pointer;
        border: 2px solid rgba(255, 255, 255, 0.1);
        transition: transform 0.2s;
    }
    .post-avatar:active {
        transform: scale(0.95);
    }
    .post-author-info {
        flex: 1;
    }
    .post-author {
        color: white;
        font-weight: 600;
        font-size: 15px;
        margin: 0;
        cursor: pointer;
        transition: color 0.2s;
    }
    .post-author:hover {
        color: var(--accent);
    }
    .post-time {
        color: rgba(255, 255, 255, 0.4);
        font-size: 12px;
        margin-top: 2px;
    }
    .post-options-btn {
        background: rgba(255, 255, 255, 0.04);
        border: none;
        padding: 8px;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.2s;
    }
    .post-options-btn:active {
        transform: scale(0.9);
        background: rgba(255, 255, 255, 0.08);
    }
    .post-content {
        color: rgba(255, 255, 255, 0.9);
        line-height: 1.6;
        margin-bottom: var(--spacing-md);
        font-size: 15px;
        white-space: pre-wrap;
        word-break: break-word;
    }
    .post-image {
        width: 100%;
        border-radius: 16px;
        margin-bottom: var(--spacing-md);
        cursor: pointer;
        transition: transform 0.2s;
    }
    .post-image:active {
        transform: scale(0.98);
    }
    
    /* Post Actions */
    .post-actions {
        display: flex;
        gap: 16px;
        padding-top: var(--spacing-md);
        border-top: 1px solid rgba(255, 255, 255, 0.05);
    }
    .action-btn {
        flex: 1;
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.05);
        padding: 12px;
        border-radius: 12px;
        color: rgba(255, 255, 255, 0.6);
        font-size: 14px;
        cursor: pointer;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        font-weight: 500;
    }
    .action-btn:active {
        transform: scale(0.95);
        background: rgba(255, 255, 255, 0.06);
    }
    .action-btn.liked {
        color: #ef4444;
        background: rgba(239, 68, 68, 0.1);
        border-color: rgba(239, 68, 68, 0.2);
    }
    .action-btn i {
        width: 18px;
        height: 18px;
    }


    .bingo-tab {
        padding-top: 80px;
        max-width: 800px;
        margin: 0 auto;
        padding-left: var(--spacing-md);
        padding-right: var(--spacing-md);
        padding-bottom: var(--spacing-xl);
    }

    /* Bingo Header */
    .bingo-header {
        text-align: center;
        margin-bottom: var(--spacing-xl);
        padding: var(--spacing-xl);
        background: linear-gradient(135deg, rgba(14, 165, 233, 0.1) 0%, rgba(6, 182, 212, 0.05) 100%);
        border-radius: var(--radius-xl);
        border: 1px solid rgba(14, 165, 233, 0.2);
    }
    
    .bingo-header h1 {
        font-size: 32px;
        font-weight: 900;
        margin: 0 0 8px 0;
        background: linear-gradient(135deg, var(--accent) 0%, var(--accent-glow) 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }
    
    .bingo-subtitle {
        color: rgba(255, 255, 255, 0.6);
        font-size: 14px;
        margin: 0;
    }

    /* Bingo Stats Cards */
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: var(--spacing-md);
        margin-bottom: var(--spacing-xl);
    }
    
    .stat-card {
        background: rgba(255, 255, 255, 0.02);
        backdrop-filter: blur(20px);
        padding: var(--spacing-lg);
        border-radius: var(--radius-lg);
        border: 1px solid rgba(255, 255, 255, 0.05);
        text-align: center;
    }
    
    .stat-icon {
        width: 40px;
        height: 40px;
        margin: 0 auto 12px;
        color: var(--accent);
    }
    
    .stat-value {
        font-size: 28px;
        font-weight: 900;
        color: white;
        margin: 0 0 4px 0;
    }
    
    .stat-label {
        font-size: 12px;
        color: rgba(255, 255, 255, 0.5);
        margin: 0;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    /* Bingo Card */
    .bingo-card-container {
        background: rgba(255, 255, 255, 0.02);
        backdrop-filter: blur(20px);
        padding: var(--spacing-xl);
        border-radius: var(--radius-xl);
        border: 1px solid rgba(255, 255, 255, 0.05);
        margin-bottom: var(--spacing-xl);
    }
    
    .bingo-grid {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 8px;
        margin-bottom: var(--spacing-lg);
    }
    
    .bingo-cell {
        aspect-ratio: 1;
        background: rgba(255, 255, 255, 0.03);
        border: 2px solid rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        font-weight: 700;
        color: white;
        cursor: pointer;
        transition: all 0.3s;
        position: relative;
    }
    
    .bingo-cell:active {
        transform: scale(0.95);
    }
    
    .bingo-cell.marked {
        background: linear-gradient(135deg, var(--accent) 0%, #0284c7 100%);
        border-color: var(--accent-glow);
        box-shadow: 0 4px 12px rgba(14, 165, 233, 0.4);
    }
    
    .bingo-cell.free {
        background: linear-gradient(135deg, var(--gold) 0%, #f59e0b 100%);
        border-color: var(--gold-shine);
        font-size: 12px;
        font-weight: 900;
        text-transform: uppercase;
        letter-spacing: 1px;
    }
    
    /* Bingo Actions */
    .bingo-actions {
        display: flex;
        gap: 12px;
        margin-top: var(--spacing-lg);
    }
    
    .bingo-btn {
        flex: 1;
        padding: 16px;
        border-radius: var(--radius-md);
        border: none;
        font-weight: 600;
        font-size: 15px;
        cursor: pointer;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
    }
    
    .bingo-btn:active {
        transform: scale(0.96);
    }
    
    .bingo-btn-primary {
        background: linear-gradient(135deg, var(--accent) 0%, #0284c7 100%);
        color: white;
        box-shadow: 0 4px 12px rgba(14, 165, 233, 0.3);
    }
    
    .bingo-btn-secondary {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: rgba(255, 255, 255, 0.7);
    }

    /* Current Number Display */
    .current-number {
        background: linear-gradient(135deg, rgba(14, 165, 233, 0.1) 0%, rgba(6, 182, 212, 0.05) 100%);
        border: 2px solid var(--accent);
        border-radius: var(--radius-xl);
        padding: var(--spacing-xl);
        text-align: center;
        margin-bottom: var(--spacing-xl);
    }
    
    .current-number-label {
        font-size: 14px;
        color: rgba(255, 255, 255, 0.6);
        margin: 0 0 8px 0;
        text-transform: uppercase;
        letter-spacing: 1px;
    }
    
    .current-number-value {
        font-size: 72px;
        font-weight: 900;
        background: linear-gradient(135deg, var(--accent) 0%, var(--accent-glow) 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin: 0;
        line-height: 1;
    }

    /* Called Numbers History */
    .called-numbers {
        background: rgba(255, 255, 255, 0.02);
        backdrop-filter: blur(20px);
        padding: var(--spacing-lg);
        border-radius: var(--radius-lg);
        border: 1px solid rgba(255, 255, 255, 0.05);
        margin-bottom: var(--spacing-xl);
    }
    
    .called-numbers h3 {
        font-size: 14px;
        color: rgba(255, 255, 255, 0.6);
        margin: 0 0 12px 0;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    
    .numbers-list {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
    }
    
    .number-chip {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        padding: 8px 12px;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 600;
        color: rgba(255, 255, 255, 0.7);
    }
    
    .number-chip.recent {
        background: linear-gradient(135deg, var(--accent) 0%, #0284c7 100%);
        border-color: var(--accent-glow);
        color: white;
    }


    .store-tab {
        padding-top: 80px;
        max-width: 800px;
        margin: 0 auto;
        padding-left: var(--spacing-md);
        padding-right: var(--spacing-md);
        padding-bottom: var(--spacing-xl);
    }

    /* Store Header */
    .store-header {
        text-align: center;
        margin-bottom: var(--spacing-xl);
        padding: var(--spacing-xl);
        background: linear-gradient(135deg, rgba(251, 191, 36, 0.1) 0%, rgba(245, 158, 11, 0.05) 100%);
        border-radius: var(--radius-xl);
        border: 1px solid rgba(251, 191, 36, 0.2);
    }
    
    .store-header h1 {
        font-size: 32px;
        font-weight: 900;
        margin: 0 0 8px 0;
        background: linear-gradient(135deg, var(--gold) 0%, var(--gold-shine) 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }
    
    .store-subtitle {
        color: rgba(255, 255, 255, 0.6);
        font-size: 14px;
        margin: 0;
    }

    /* Points Balance */
    .points-balance {
        background: linear-gradient(135deg, rgba(251, 191, 36, 0.1) 0%, rgba(245, 158, 11, 0.05) 100%);
        border: 2px solid var(--gold);
        border-radius: var(--radius-xl);
        padding: var(--spacing-lg);
        margin-bottom: var(--spacing-xl);
        display: flex;
        align-items: center;
        justify-content: space-between;
    }
    
    .points-info {
        display: flex;
        align-items: center;
        gap: 12px;
    }
    
    .points-icon {
        width: 48px;
        height: 48px;
        background: linear-gradient(135deg, var(--gold) 0%, #f59e0b 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 24px;
        font-weight: 900;
    }
    
    .points-details h3 {
        font-size: 14px;
        color: rgba(255, 255, 255, 0.6);
        margin: 0 0 4px 0;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    
    .points-amount {
        font-size: 28px;
        font-weight: 900;
        background: linear-gradient(135deg, var(--gold) 0%, var(--gold-shine) 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin: 0;
    }
    
    .earn-points-btn {
        background: linear-gradient(135deg, var(--gold) 0%, #f59e0b 100%);
        color: white;
        border: none;
        padding: 12px 20px;
        border-radius: var(--radius-md);
        font-weight: 600;
        font-size: 14px;
        cursor: pointer;
        transition: all 0.2s;
        box-shadow: 0 4px 12px rgba(251, 191, 36, 0.3);
    }
    
    .earn-points-btn:active {
        transform: scale(0.95);
    }

    /* Store Categories */
    .store-categories {
        display: flex;
        gap: 8px;
        margin-bottom: var(--spacing-xl);
        overflow-x: auto;
        padding-bottom: 8px;
        -webkit-overflow-scrolling: touch;
    }
    
    .category-chip {
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.1);
        padding: 10px 20px;
        border-radius: var(--radius-full);
        color: rgba(255, 255, 255, 0.6);
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
        white-space: nowrap;
        flex-shrink: 0;
    }
    
    .category-chip:active {
        transform: scale(0.95);
    }
    
    .category-chip.active {
        background: linear-gradient(135deg, var(--accent) 0%, #0284c7 100%);
        border-color: var(--accent-glow);
        color: white;
        box-shadow: 0 4px 12px rgba(14, 165, 233, 0.3);
    }

    /* Store Items Grid */
    .store-items {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
        gap: var(--spacing-md);
    }
    
    .store-item {
        background: rgba(255, 255, 255, 0.02);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.05);
        border-radius: var(--radius-lg);
        padding: var(--spacing-md);
        cursor: pointer;
        transition: all 0.3s;
    }
    
    .store-item:active {
        transform: scale(0.97);
    }
    
    .store-item:hover {
        border-color: var(--accent);
        box-shadow: 0 4px 16px rgba(14, 165, 233, 0.2);
    }
    
    .item-image {
        width: 100%;
        aspect-ratio: 1;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 12px;
        margin-bottom: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 48px;
    }
    
    .item-name {
        font-size: 14px;
        font-weight: 600;
        color: white;
        margin: 0 0 8px 0;
        line-height: 1.3;
    }
    
    .item-price {
        display: flex;
        align-items: center;
        gap: 6px;
        font-size: 16px;
        font-weight: 700;
        color: var(--gold);
    }
    
    .item-price i {
        width: 16px;
        height: 16px;
    }
    
    /* Limited/Featured Badge */
    .item-badge {
        position: absolute;
        top: 8px;
        right: 8px;
        background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        color: white;
        padding: 4px 8px;
        border-radius: 6px;
        font-size: 10px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        box-shadow: 0 2px 8px rgba(239, 68, 68, 0.4);
    }
    
    .store-item {
        position: relative;
    }

    /* Purchase Modal */
    .purchase-modal {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 1001;
        background: rgba(15, 23, 42, 0.98);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: var(--radius-xl);
        padding: var(--spacing-xl);
        max-width: 400px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
    }
    
    .modal-backdrop {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.7);
        z-index: 1000;
    }
    
    .purchase-modal-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: var(--spacing-lg);
    }
    
    .purchase-modal-close {
        background: rgba(255, 255, 255, 0.05);
        border: none;
        padding: 8px;
        border-radius: 8px;
        cursor: pointer;
        color: rgba(255, 255, 255, 0.6);
        transition: all 0.2s;
    }
    
    .purchase-modal-close:active {
        transform: scale(0.9);
    }
    
    .purchase-item-image {
        width: 100%;
        aspect-ratio: 1;
        background: rgba(255, 255, 255, 0.05);
        border-radius: var(--radius-lg);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 80px;
        margin-bottom: var(--spacing-lg);
    }
    
    .purchase-item-name {
        font-size: 24px;
        font-weight: 900;
        color: white;
        margin: 0 0 8px 0;
    }
    
    .purchase-item-description {
        color: rgba(255, 255, 255, 0.6);
        font-size: 14px;
        line-height: 1.6;
        margin-bottom: var(--spacing-lg);
    }
    
    .purchase-item-price {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: var(--spacing-md);
        background: rgba(255, 255, 255, 0.03);
        border-radius: var(--radius-md);
        margin-bottom: var(--spacing-lg);
    }
    
    .purchase-price-label {
        font-size: 14px;
        color: rgba(255, 255, 255, 0.6);
    }
    
    .purchase-price-value {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 28px;
        font-weight: 900;
        color: var(--gold);
    }
    
    .purchase-btn {
        width: 100%;
        padding: 16px;
        border-radius: var(--radius-md);
        border: none;
        background: linear-gradient(135deg, var(--gold) 0%, #f59e0b 100%);
        color: white;
        font-weight: 700;
        font-size: 16px;
        cursor: pointer;
        transition: all 0.2s;
        box-shadow: 0 4px 12px rgba(251, 191, 36, 0.3);
    }
    
    .purchase-btn:active {
        transform: scale(0.98);
    }
    
    .purchase-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }


    .me-tab {
        padding-top: 80px;
        max-width: 800px;
        margin: 0 auto;
        padding-left: var(--spacing-md);
        padding-right: var(--spacing-md);
        padding-bottom: var(--spacing-xl);
    }

    /* Profile Header Card */
    .profile-header-card {
        background: linear-gradient(135deg, rgba(14, 165, 233, 0.1) 0%, rgba(6, 182, 212, 0.05) 100%);
        border: 1px solid rgba(14, 165, 233, 0.2);
        border-radius: var(--radius-xl);
        padding: var(--spacing-xl);
        margin-bottom: var(--spacing-xl);
        text-align: center;
    }
    
    .profile-avatar-large {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        border: 4px solid rgba(255, 255, 255, 0.1);
        margin: 0 auto 16px;
        object-fit: cover;
        cursor: pointer;
        transition: transform 0.2s;
    }
    
    .profile-avatar-large:active {
        transform: scale(0.95);
    }
    
    .profile-name {
        font-size: 28px;
        font-weight: 900;
        color: white;
        margin: 0 0 8px 0;
    }
    
    .profile-username {
        font-size: 14px;
        color: rgba(255, 255, 255, 0.5);
        margin: 0 0 16px 0;
    }
    
    .profile-stats {
        display: flex;
        justify-content: center;
        gap: 32px;
        padding-top: var(--spacing-lg);
        border-top: 1px solid rgba(255, 255, 255, 0.05);
    }
    
    .profile-stat {
        text-align: center;
    }
    
    .profile-stat-value {
        font-size: 24px;
        font-weight: 900;
        color: white;
        margin: 0 0 4px 0;
    }
    
    .profile-stat-label {
        font-size: 12px;
        color: rgba(255, 255, 255, 0.5);
        margin: 0;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    /* Profile Actions */
    .profile-actions {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: var(--spacing-md);
        margin-bottom: var(--spacing-xl);
    }
    
    .profile-action-btn {
        background: rgba(255, 255, 255, 0.02);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.05);
        padding: var(--spacing-lg);
        border-radius: var(--radius-lg);
        cursor: pointer;
        transition: all 0.3s;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 12px;
        text-align: center;
    }
    
    .profile-action-btn:active {
        transform: scale(0.97);
    }
    
    .profile-action-btn:hover {
        border-color: var(--accent);
        background: rgba(255, 255, 255, 0.04);
    }
    
    .profile-action-icon {
        width: 40px;
        height: 40px;
        background: rgba(14, 165, 233, 0.1);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--accent);
    }
    
    .profile-action-icon i {
        width: 20px;
        height: 20px;
    }
    
    .profile-action-label {
        font-size: 14px;
        font-weight: 600;
        color: white;
    }

    /* Settings Section - Enhanced Modern Card Design */
    .settings-section {
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.03) 0%, rgba(255, 255, 255, 0.01) 100%);
        backdrop-filter: blur(30px);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: var(--radius-xl);
        padding: var(--spacing-xl);
        margin-bottom: var(--spacing-xl);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 
                    0 2px 8px rgba(0, 0, 0, 0.2);
        transition: all 0.3s ease;
    }
    
    .settings-section:hover {
        border-color: rgba(14, 165, 233, 0.2);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4), 
                    0 4px 12px rgba(14, 165, 233, 0.1);
    }
    
    .settings-section-title {
        font-size: 20px;
        font-weight: 800;
        color: white;
        margin: 0 0 20px 0;
        display: flex;
        align-items: center;
        gap: 12px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    
    .settings-section-title i {
        width: 24px;
        height: 24px;
        color: var(--accent);
        filter: drop-shadow(0 0 8px rgba(14, 165, 233, 0.5));
    }
    
    .settings-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: var(--spacing-lg);
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%);
        border: 1px solid rgba(255, 255, 255, 0.05);
        border-radius: var(--radius-lg);
        margin-bottom: 12px;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
    }
    
    .settings-item::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, rgba(14, 165, 233, 0.1) 0%, rgba(6, 182, 212, 0.05) 100%);
        opacity: 0;
        transition: opacity 0.3s ease;
    }
    
    .settings-item:hover::before {
        opacity: 1;
    }
    
    .settings-item:last-child {
        margin-bottom: 0;
    }
    
    .settings-item:hover {
        transform: translateY(-2px);
        border-color: var(--accent);
        box-shadow: 0 8px 24px rgba(14, 165, 233, 0.2),
                    0 4px 8px rgba(0, 0, 0, 0.3);
    }
    
    .settings-item:active {
        transform: translateY(0) scale(0.98);
        box-shadow: 0 4px 12px rgba(14, 165, 233, 0.1);
    }
    
    .settings-item-info {
        display: flex;
        align-items: center;
        gap: 16px;
        position: relative;
        z-index: 1;
    }
    
    .settings-item-icon {
        width: 48px;
        height: 48px;
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: rgba(255, 255, 255, 0.7);
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }
    
    .settings-item:hover .settings-item-icon {
        transform: scale(1.1) rotate(5deg);
        box-shadow: 0 6px 16px rgba(14, 165, 233, 0.3);
    }
    
    .settings-item-icon i {
        width: 22px;
        height: 22px;
    }
    
    .settings-item-text h4 {
        font-size: 15px;
        font-weight: 700;
        color: white;
        margin: 0 0 4px 0;
        letter-spacing: 0.3px;
    }
    
    .settings-item-text p {
        font-size: 12px;
        color: rgba(255, 255, 255, 0.6);
        margin: 0;
        line-height: 1.4;
    }
    
    .settings-item-arrow {
        color: rgba(255, 255, 255, 0.4);
        transition: all 0.3s ease;
        position: relative;
        z-index: 1;
    }
    
    .settings-item:hover .settings-item-arrow {
        color: var(--accent);
        transform: translateX(4px);
    }
    
    /* Featured Settings Item (for important actions like Verification) */
    .settings-item.featured {
        background: linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(14, 165, 233, 0.08) 100%);
        border: 1px solid rgba(59, 130, 246, 0.3);
    }
    
    .settings-item.featured:hover {
        border-color: rgba(59, 130, 246, 0.5);
        box-shadow: 0 12px 32px rgba(59, 130, 246, 0.3),
                    0 6px 12px rgba(0, 0, 0, 0.4);
    }
    
    /* Toggle Switch Styling */
    .toggle-switch {
        width: 52px;
        height: 28px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 14px;
        position: relative;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
    }
    
    .toggle-switch.active {
        background: linear-gradient(135deg, var(--success), #059669);
        border-color: var(--success);
        box-shadow: 0 0 16px rgba(16, 185, 129, 0.4),
                    inset 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    .toggle-switch-handle {
        width: 22px;
        height: 22px;
        background: white;
        border-radius: 50%;
        position: absolute;
        top: 2px;
        left: 3px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
    }
    
    .toggle-switch.active .toggle-switch-handle {
        left: 26px;
    }

    /* Version Info */
    .app-version {
        text-align: center;
        color: rgba(255, 255, 255, 0.2);
        font-size: 11px;
        margin-top: var(--spacing-xl);
    }

    /* Enhanced Modal Buttons */
    .btn-primary-enhanced {
        background: linear-gradient(135deg, var(--accent), #0284c7);
        color: white;
        border: none;
        padding: 14px 24px;
        border-radius: var(--radius-lg);
        font-weight: 700;
        font-size: 14px;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 4px 16px rgba(14, 165, 233, 0.3);
        position: relative;
        overflow: hidden;
    }

    .btn-primary-enhanced::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: left 0.5s;
    }

    .btn-primary-enhanced:hover::before {
        left: 100%;
    }

    .btn-primary-enhanced:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 24px rgba(14, 165, 233, 0.4);
    }

    .btn-primary-enhanced:active {
        transform: translateY(0) scale(0.98);
        box-shadow: 0 2px 8px rgba(14, 165, 233, 0.2);
    }

    .btn-secondary-enhanced {
        background: rgba(255, 255, 255, 0.05);
        color: white;
        border: 1px solid rgba(255, 255, 255, 0.1);
        padding: 14px 24px;
        border-radius: var(--radius-lg);
        font-weight: 600;
        font-size: 14px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .btn-secondary-enhanced:hover {
        background: rgba(255, 255, 255, 0.08);
        border-color: rgba(255, 255, 255, 0.2);
        transform: translateY(-2px);
    }

    .btn-secondary-enhanced:active {
        transform: translateY(0) scale(0.98);
    }

    /* Responsive Design */
    @media (max-width: 640px) {
        .settings-section {
            padding: var(--spacing-lg);
        }

        .settings-section-title {
            font-size: 18px;
        }

        .settings-item {
            padding: var(--spacing-md);
        }

        .settings-item-icon {
            width: 44px;
            height: 44px;
        }

        .settings-item-icon i {
            width: 20px;
            height: 20px;
        }

        .settings-item-text h4 {
            font-size: 14px;
        }

        .settings-item-text p {
            font-size: 11px;
        }
    }


</style>
</head>
<body>

<div class="app-header">
    <div class="header-left">
        <div class="brand-logo">RB<span>LIVE</span></div>
    </div>
    <div id="userPanel" class="header-right" style="display:none;">
        <div class="header-icon-btn" onclick="openSearch()">
            <i data-lucide="search"></i>
        </div>
        <div class="header-icon-btn" onclick="openMessenger()">
            <i data-lucide="message-circle"></i>
            <span id="pmBadge" class="header-badge"></span>
        </div>
        <div class="header-icon-btn" onclick="openNotifs()">
            <i data-lucide="bell"></i>
            <span id="notifDot" class="header-badge"></span>
        </div>
        <div id="userImgContainer" class="header-avatar" onclick="openMenuModal()"></div>
    </div>
</div>

<div class="main-scroll-container">
    <div class="container">
        
        <div class="ad-container-global">
            <script type="text/javascript">
                atOptions = { 'key' : '9bf585b6ee39cb9b515e2fae1fa958c2', 'format' : 'iframe', 'height' : 50, 'width' : 320, 'params' : {} };
            </script>
            <script type="text/javascript" src="https://pl28660488.effectivegatecpm.com/9b/f5/85/9bf585b6ee39cb9b515e2fae1fa958c2.js"></script>
        </div>

        <div id="view-home" style="display:block;">
            <div id="friendRequestsSection"></div>
            
            <div class="post-creator-modern" id="mainPostCreator">
                <h4 class="post-creator-title">
                    <i data-lucide="edit-3"></i> Create Post
                </h4>
                
                <textarea id="postInput" class="post-input-modern" placeholder="What's on your mind?"></textarea>
                
                <div class="image-preview-container" id="imgPreviewCont">
                    <img id="postImgPreview" class="image-preview-img">
                    <div class="btn-remove-img" onclick="removePostImage()"><i data-lucide="x" style="width:12px;"></i></div>
                </div>

                <div class="action-buttons-row">
                    <button class="action-btn-ghost" onclick="selectMood(this, 'Happy')">
                        <i data-lucide="smile"></i> Happy
                    </button>
                    <button class="action-btn-ghost" onclick="selectMood(this, 'Sad')">
                        <i data-lucide="frown"></i> Sad
                    </button>
                    <label for="postImgInput" class="action-btn-ghost">
                        <i data-lucide="image"></i> Photo
                    </label>
                    <input type="file" id="postImgInput" accept="image/*" style="display:none" onchange="handlePostImage(this)">
                </div>

                <div class="post-tools">
                    <div class="custom-visibility-dropdown">
                        <input type="hidden" id="postVisibility" value="public">
                        <button type="button" class="visibility-trigger" onclick="toggleVisibilityDropdown()">
                            <i data-lucide="globe" id="visibilityIcon"></i>
                            <span id="visibilityText">Public</span>
                        </button>
                        <div class="visibility-dropdown-menu" id="visibilityMenu">
                            <div class="visibility-option selected" data-value="public" onclick="selectVisibility('public', 'globe', 'Public')">
                                <i data-lucide="globe"></i>
                                <span>Public</span>
                            </div>
                            <div class="visibility-option" data-value="friends" onclick="selectVisibility('friends', 'users', 'Friends Only')">
                                <i data-lucide="users"></i>
                                <span>Friends Only</span>
                            </div>
                            <div class="visibility-option" data-value="private" onclick="selectVisibility('private', 'lock', 'Only Me')">
                                <i data-lucide="lock"></i>
                                <span>Only Me</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <button class="btn-post-modern" onclick="createPost()">POST</button>
            </div>

            <div id="pymkSection" class="pymk-section" style="display:none;">
                <div class="pymk-title">People You May Know</div>
                <div class="pymk-scroll" id="pymkList"></div>
            </div>

            <div class="feed-sort-modern">
                <button class="sort-btn active" id="sort-hype" onclick="toggleFeedSort('hype')">
                    <i data-lucide="flame" style="width:14px"></i> HOT
                </button>
                <button class="sort-btn" id="sort-new" onclick="toggleFeedSort('new')">
                    <i data-lucide="clock" style="width:14px"></i> NEW
                </button>
            </div>

            <div id="socialFeed" class="social-feed-container">
                <div style="text-align:center; padding: var(--spacing-lg); opacity:0.5;">Loading Feed...</div>
            </div>
        </div>

        <div id="view-bingo" style="display:none;">
            <div class="video-feed-wrapper">
                <div class="video-container">
                    <div class="video-overlay-bl"><i data-lucide="users" style="width:14px"></i><span id="onlineCount">0</span> ONLINE</div>
                    <div id="videoOfflineState" style="display:none; position:absolute; inset:0; background:#0f172a; flex-direction:column; align-items:center; justify-content:center; z-index:20;">
                        <div style="width:60px; height:60px; background:rgba(255,255,255,0.05); border-radius:50%; display:flex; align-items:center; justify-content:center; margin-bottom: var(--spacing-md); animation:pulse-ring 2s infinite;">
                            <i data-lucide="radio" style="width:30px; height:30px; color:#94a3b8;"></i>
                        </div>
                        <h3 style="margin:0; font-size:16px; font-weight:900; color:white; letter-spacing:1px;">WAITING FOR LIVE</h3>
                        <p style="margin:5px 0 0; font-size:12px; color:#64748b;">Stand by for the next draw.</p>
                    </div>
                    <iframe id="liveVideoFrame" width="100%" height="100%" src="https://www.youtube.com/embed/4I_NSJTbdXo?autoplay=1&mute=1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen style="border:none; position:absolute; top:0; left:0; width:100%; height:100%;"></iframe>
                </div>
            </div>

            <div id="jackpotBanner">
                <div class="jp-label-new">
                    <i data-lucide="crown" style="width: 16px;"></i> JACKPOT ROUND <i data-lucide="crown" style="width: 16px;"></i>
                </div>
                <span class="jackpot-amount" id="jackpotDisplayVal">5,000</span>
                <div style="font-size: 10px; opacity: 0.7; margin-top: 5px; color: #fbbf24;">RB COINS GRAND PRIZE</div>
            </div>

            <div id="nextDrawBanner" class="next-draw-container">
                <div class="nd-icon"><i data-lucide="calendar-days"></i></div>
                <div class="nd-info">
                    <div class="next-draw-label">Susunod na Bola</div>
                    <div id="nextDrawTime" class="next-draw-time">--:-- --</div>
                </div>
            </div>
            
            <div id="winnerBanner">
                <span><i data-lucide="party-popper" style="width:24px; height:24px;"></i> BINGO WINNER!</span>
                <span class="winner-line" id="winnerPatternLine">Pattern: Normal Bingo</span>
            </div>

            <div class="draw-panel">
                <div class="prev-balls" id="ballRow"></div>
                <div class="current-ball-box"><span style="font-size:9px; font-weight:800; opacity:0.8; color:white;">NOW DRAWN</span><span id="currentBall" style="font-size:36px; font-weight:900; color:white; text-shadow:0 2px 10px rgba(0,0,0,0.5);">--</span></div>
            </div>
            
            <div class="card" id="bingoCardContainer">
                <div id="lateOverlay" class="late-overlay">
                    <i data-lucide="lock" style="color:var(--danger); width:48px; height:48px; margin-bottom: var(--spacing-md); filter: drop-shadow(0 0 10px var(--danger));"></i>
                    <div class="late-text">GAME ONGOING</div>
                    <div class="late-subtext">Sorry, ongoing na ang bola. Bawal na sumali ang late.</div>
                    <div style="margin-top: var(--spacing-lg); background:rgba(255,255,255,0.1); padding: var(--spacing-sm) 20px; border-radius: var(--radius-md); border:1px solid rgba(255,255,255,0.1);">
                        <span style="font-size:10px; display:block; opacity:0.7;">NEXT GAME:</span>
                        <strong id="lateNextSched" style="font-size:16px; color:var(--gold);">--:--</strong>
                    </div>
                </div>
                <div id="gameOverOverlay" class="game-over-overlay">
                    <i data-lucide="trophy" style="color:var(--gold); width:50px; height:50px; margin-bottom: var(--spacing-md); filter: drop-shadow(0 0 15px var(--gold));"></i>
                    <div class="late-text">Game Finished</div>
                    <div class="late-subtext" id="gameOverMsg">Better luck next time!</div>
                </div>
                <div class="change-card-wrapper" style="display:flex; justify-content:space-between; align-items:center; padding-bottom:15px;">
                    <div class="pattern-box">
                        <div class="pattern-dot"></div>
                        <span class="pattern-text" id="patternName">Normal Bingo</span>
                    </div>
                    <button class="btn-change" id="newCardBtn" onclick="generateNewCard()"><i data-lucide="refresh-cw" style="width:14px"></i> NEW CARD</button>
                </div>
                <div class="bingo-header"><div class="letter">B</div><div class="letter">I</div><div class="letter">N</div><div class="letter">G</div><div class="letter">O</div></div>
                <div class="grid" id="bingoGrid"></div>
            </div>
            
            <div class="chat-box" style="margin-top:15px;">
                <div class="chat-header">
                    <i data-lucide="message-square" style="width:18px; color:var(--accent-glow)"></i>
                    <h3>LIVE STREAM CHAT</h3>
                </div>
                <div id="chatList"></div>
                <div id="replyIndicator" class="reply-indicator" style="display:none; padding: 5px 15px; background: #374151; color: #d1d5db; font-size: 11px;">
                    <span id="replyText">Replying to...</span>
                    <button onclick="cancelReply()" style="background:none; border:none; color:white; cursor:pointer;"><i data-lucide="x" style="width:14px"></i></button>
                </div>
                <div class="chat-input-area">
                    <form class="input-wrapper" onsubmit="event.preventDefault(); sendChat();">
                        <input type="text" id="chatIn" placeholder="Say something..." autocomplete="off">
                        <button type="submit" class="send-btn">
                            <i data-lucide="send" style="width:16px"></i>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="bottom-nav">
    <button class="nav-item active" onclick="switchTab('home')" id="nav-home">
        <i data-lucide="home" class="nav-icon"></i>
        <span class="nav-label">Home</span>
    </button>
    <button class="nav-item featured" onclick="switchTab('bingo')" id="nav-bingo">
        <i data-lucide="play-circle" class="nav-icon"></i>
        <span class="nav-label">Bingo</span>
    </button>
    <div style="width: 20px;"></div>
    
    <button class="nav-item" onclick="document.getElementById('storeModal').style.display='flex'" id="nav-store">
        <i data-lucide="shopping-bag" class="nav-icon"></i>
        <span class="nav-label">Store</span>
    </button>
    <button class="nav-item" onclick="openMyProfile()" id="nav-profile">
        <i data-lucide="user" class="nav-icon"></i>
        <span class="nav-label">Me</span>
    </button>
    
    <div class="nav-center-fab" onclick="openPostCreator()">
        <i data-lucide="plus"></i>
    </div>
</div>

<div class="sticky-ad-footer">
    <script type="text/javascript">
        atOptions = { 'key' : 'a664bf7e7084386b4f4b428590030df3', 'format' : 'iframe', 'height' : 50, 'width' : 320, 'params' : {} };
    </script>
    <script type="text/javascript" src="https://pl28660496.effectivegatecpm.com/a6/64/bf/a664bf7e7084386b4f4b428590030df3.js"></script>
</div>

<div id="customPopupBanner">
    <div style="position:relative; max-width:400px; width:100%; animation: popScale 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);">
        <button onclick="closeCustomBanner()" style="position:absolute; top:-15px; right:-10px; background:linear-gradient(135deg, #ef4444, #b91c1c); color:white; border:2px solid white; border-radius:50%; width:36px; height:36px; font-weight:bold; cursor:pointer; z-index:10; display:flex; align-items:center; justify-content:center; box-shadow:0 4px 10px rgba(0,0,0,0.3);"><i data-lucide="x" style="width:20px"></i></button>
        <img id="customBannerImg" src="" style="width:100%; border-radius: var(--radius-xl); border:2px solid rgba(255,255,255,0.2); box-shadow:0 20px 50px rgba(0,0,0,0.8); cursor:pointer; object-fit:cover;" onclick="clickCustomBanner()">
    </div>
</div>

<div id="installGate">
    <div class="gate-logo">RB<span>LIVE</span></div>
    <div class="gate-title">Install to Play</div>
    <p class="gate-desc">To access the full Radio Bingo experience, you must install the official App.</p>
    <button id="gateInstallBtn" class="gate-btn-install" onclick="triggerInstall()">
        <i data-lucide="download-cloud" style="width:20px; height:20px;"></i> INSTALL APP
    </button>
    <div id="gateIosNote" class="gate-ios-note">
        <div style="font-weight:800; color:white; margin-bottom: var(--spacing-sm); text-transform:uppercase;">iOS Instructions:</div>
        <div class="ios-step"><i data-lucide="share" class="ios-icon" style="width:16px;"></i> 1. Tap the Share button below.</div>
        <div class="ios-step"><i data-lucide="plus-square" class="ios-icon" style="width:16px;"></i> 2. Scroll down & tap 'Add to Home Screen'.</div>
        <div class="ios-step"><i data-lucide="check" class="ios-icon" style="width:16px;"></i> 3. Launch App from Home Screen.</div>
    </div>
</div>

<div id="notifBlocker">
    <div class="notif-gate-icon">
        <i data-lucide="bell-ring" style="width: 40px; height: 40px; color: #3b82f6;"></i>
    </div>
    <div class="notif-gate-title">ENABLE NOTIFICATIONS</div>
    <p class="notif-gate-desc">To ensure fairness and real-time updates for Bingo Calls, this app requires push notifications to be enabled.</p>
    <button onclick="requestGatePermission()" class="btn-allow-notif">
        <i data-lucide="check-circle" style="width:20px"></i> ALLOW NOTIFICATIONS
    </button>
    <div id="blockedHelp" class="blocked-help">
        <strong style="color:var(--danger); display:block; margin-bottom:5px;"> NOTIFICATIONS ARE BLOCKED!</strong>
        1. Click the <b>Lock Icon </b> or <b>Settings Icon</b> beside the URL bar.<br>
        2. Click <b>Permissions</b> or <b>Site Settings</b>.<br>
        3. Find <b>Notifications</b> and set to <b>Allow</b>.<br>
        4. Reload this page.
    </div>
</div>

<div id="splash-screen">
    <div class="splash-logo">RB<span>LIVE</span></div>
    <div class="splash-loader"></div>
</div>

<div id="customToast">
    <i data-lucide="info" class="toast-icon"></i>
    <span class="toast-msg" id="toastMsg">Notification!</span>
</div>

<div id="customConfirmModal">
    <div class="conf-content">
        <i data-lucide="alert-circle" style="width: 40px; height: 40px; color: var(--gold); margin-bottom: var(--spacing-md);"></i>
        <h3 class="conf-title" id="confTitle">Confirm Action</h3>
        <p class="conf-msg" id="confMsg">Are you sure you want to proceed?</p>
        <div class="conf-actions">
            <button class="btn-conf-no" onclick="closeCustomConfirm()">CANCEL</button>
            <button class="btn-conf-yes" id="confYesBtn">CONFIRM</button>
        </div>
    </div>
</div>

<div id="loginOverlay">
    <div class="login-bg-blob blob-1"></div>
    <div class="login-bg-blob blob-2"></div>
    <div class="login-app-container">
        <div class="app-logo-lg">RB<span>LIVE</span></div>
        <p class="app-tagline">The ultimate live bingo experience.<br>Play, Win, and Redeem Rewards.</p>
        <div class="promo-badge">
            <i data-lucide="gift" style="width:16px"></i> 
            <span>Register now & Get 500 Free RB Coins</span>
        </div>
        <div class="auth-btn-group">
            <button class="btn-main-auth" onclick="login()">
                <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/action/google.svg" alt="Google" style="width:20px">
                Sign in with Google
            </button>
        </div>
    </div>
    <div class="login-footer-legal">
        <div class="legal-text">
            <span> DISCLAIMER: NOT A GAMBLING SITE</span>
            <span style="opacity: 0.6; font-size: 9px;">For entertainment purposes only. No real money betting.</span>
            <div style="margin-top: 5px; opacity: 0.8; font-size: 10px;">
                <a href="terms.html" style="color:#cbd5e1; text-decoration:none; margin:0 5px;">Terms</a> |
                <a href="privacy.html" style="color:#cbd5e1; text-decoration:none; margin:0 5px;">Privacy</a>
            </div>
        </div>
    </div>
</div>

<div id="grandJackpotModal" onclick="this.style.display='none'">
    <div class="jackpot-rays"></div>
    <div class="jackpot-content">
        <div class="icon-glow"><i data-lucide="crown" style="width: 80px; height: 80px;"></i></div>
        <h1 class="jp-title">JACKPOT WIN!</h1>
        <h2 class="jp-amount" id="grandPrizeAmount">10,000 RB COINS</h2>
        <div class="jp-name" id="jpWinnerName">WINNER NAME</div>
        <p style="font-size: 11px; color: white; opacity: 0.7; margin-top: var(--spacing-lg);">Tap anywhere to close</p>
    </div>
</div>

<div id="pmModal" class="pm-modal">
    <div class="pm-container">
        <div id="pmInboxView" style="display:flex; flex-direction:column; height:100%;">
            <div class="pm-header">
                <div style="display:flex; align-items:center; gap: var(--spacing-sm);">
                    <h3>Chats</h3>
                </div>
                <div style="display:flex; justify-content:center; flex:1;">
                    <button class="group-create-btn" onclick="startCreateGroup()"><i data-lucide="users" style="width:14px"></i> + Group</button>
                </div>
                <div style="display:flex; gap: var(--spacing-sm);">
                    <button onclick="document.getElementById('pmModal').style.display='none'" style="background:rgba(255,255,255,0.1); border:none; width:30px; height:30px; border-radius:50%; color:white; display:flex; align-items:center; justify-content:center;"><i data-lucide="x" style="width:16px;"></i></button>
                </div>
            </div>
            <div class="active-friends-bar" id="activeFriendsBar"></div>
            <div id="pmList" class="pm-inbox-list"></div>
        </div>
        
        <div id="pmChatView" class="pm-chat-view">
            <div class="pm-chat-header">
                <button onclick="backToInbox()" style="background:none; border:none; color:var(--messenger-blue);"><i data-lucide="arrow-left"></i></button>
                <div style="display:flex; align-items:center;">
                     <div id="chatTargetAvatarCont" style="width:36px; height:36px; margin-left:5px;"></div>
                     <div style="display:flex; flex-direction:column; margin-left:10px;">
                        <span id="chatTargetName" style="font-weight:700; font-size:15px; color:white;">User</span>
                        <span id="chatTargetStatus" style="font-size:11px; color:#b0b3b8;">Active now</span>
                     </div>
                </div>
            </div>
            <div id="pmMessages" class="pm-messages"></div>
            
            <div class="pm-footer-modern">
                <label for="pmImgInput" class="pm-attach-btn">
                    <i data-lucide="image" style="width:24px;"></i>
                </label>
                <input type="file" id="pmImgInput" accept="image/*" style="display:none" onchange="handlePmImage(this)">
                
                <form onsubmit="event.preventDefault(); sendPrivateMessage();" style="flex:1; display:flex; gap: var(--spacing-sm);">
                    <input type="text" id="pmInput" class="pm-styled-input" placeholder="Type a message..." autocomplete="off">
                    <button type="submit" style="background:none; border:none; color:var(--messenger-blue); cursor:pointer;"><i data-lucide="send" style="width:24px"></i></button>
                </form>
            </div>
            <div id="pmImgPreviewCont" style="padding: var(--spacing-sm); background:#0f172a; display:none;">
                <span style="font-size:10px; color:var(--accent-glow);">Image attached</span>
            </div>
        </div>

        <div id="pmCreateGroupView" style="display:none; flex-direction:column; height:100%; background:#000;">
            <div class="pm-header">
                <button onclick="cancelCreateGroup()" style="background:none; border:none; color:white;"><i data-lucide="arrow-left"></i></button>
                <h3>New Group</h3>
                <button onclick="finalizeCreateGroup()" style="color:var(--accent); background:none; border:none; font-weight:800;">CREATE</button>
            </div>
            <div style="padding: var(--spacing-lg);">
                <input type="text" id="newGroupName" class="styled-input" placeholder="Group Name">
                <h4 style="color:#94a3b8; margin-top: var(--spacing-lg); font-size:12px; text-transform:uppercase;">Select Friends</h4>
                <div id="friendSelectContainer" style="margin-top:10px;"></div>
            </div>
        </div>
    </div>
</div>

<div id="notifModal" class="modal" onclick="this.style.display='none'">
    <div class="modal-content" onclick="event.stopPropagation()">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: var(--spacing-lg); border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:15px;">
            <div style="display:flex; align-items:center; gap: var(--spacing-sm);">
                <div style="background:rgba(255,255,255,0.1); padding:8px; border-radius: var(--radius-sm);"><i data-lucide="bell" style="width:20px;"></i></div>
                <h3 style="margin:0; font-size:18px;">Notifications</h3>
            </div>
            <button onclick="document.getElementById('notifModal').style.display='none'" style="background:none; border:none; color:white;"><i data-lucide="x"></i></button>
        </div>
        <div id="notifList"></div>
    </div>
</div>

<div id="userOptionsModal" class="modal" onclick="this.style.display='none'">
    <div class="modal-content" onclick="event.stopPropagation()" style="text-align:center;">
        <div id="optUserAvatarCont" style="display:flex; justify-content:center; margin-bottom: var(--spacing-sm);"></div>
        <h3 id="optUserName" style="margin:0 0 20px 0; color:white;">User</h3>
        
        <button class="user-opt-btn" onclick="openUserProfile(targetUserForOpt.uid)"><i data-lucide="user"></i> View Profile</button>
        <button class="user-opt-btn" onclick="optAddFriend()"><i data-lucide="user-plus"></i> Add Friend</button>
        <button class="user-opt-btn" onclick="optSendMessage()"><i data-lucide="message-circle"></i> Send Message</button>
        <button class="user-opt-btn" onclick="document.getElementById('userOptionsModal').style.display='none'"><i data-lucide="x"></i> Close</button>
    </div>
</div>

<div id="commentModalBackdrop" class="comment-modal-backdrop" onclick="closeComments()"></div>
<div id="commentModal" class="comment-modal">
    <div class="comment-header">
        <h3 style="margin:0; font-size:16px;">Comments</h3>
        <button onclick="closeComments()" style="background:none; border:none; color:white;"><i data-lucide="x"></i></button>
    </div>
    <div id="commentList" class="comment-list"></div>
    <form class="comment-input-area" onsubmit="event.preventDefault(); sendComment();">
        <div id="commentPreviewBox" class="comment-preview-box">
            <div class="comment-preview-label">Preview</div>
            <div class="comment-preview-content">
                <img id="commentPreviewAvatar" class="comment-preview-avatar" src="https://via.placeholder.com/40" alt="Your avatar">
                <div class="comment-preview-bubble">
                    <div id="commentPreviewText" class="comment-preview-text"></div>
                </div>
            </div>
        </div>
        <div class="comment-input-row">
            <input type="text" id="commentInput" class="comment-input" placeholder="Write a comment..." autocomplete="off" oninput="updateCommentPreview()">
            <button type="submit" style="background:none; border:none; color:var(--accent);"><i data-lucide="send"></i></button>
        </div>
    </form>
</div>

<div id="shareModalBackdrop" class="share-modal-backdrop" onclick="closeShareModal()"></div>
<div id="shareModal" class="share-modal">
    <div class="share-header">
        <h3 style="margin:0; font-size:16px;">Share Post</h3>
        <button onclick="closeShareModal()" style="background:none; border:none; color:white;"><i data-lucide="x"></i></button>
    </div>
    <div class="share-content">
        <div class="share-post-preview" id="sharePreview"></div>
        <button class="share-btn-option" onclick="shareToOwnProfile()">
            <i data-lucide="user" style="width:20px;"></i>
            <span>Share to My Profile</span>
        </button>
        <button class="share-btn-option" id="nativeShareBtn" onclick="shareViaWebShare()">
            <i data-lucide="share-2" style="width:20px;"></i>
            <span>Share via...</span>
        </button>
        <button class="share-btn-option" id="copyLinkBtn" onclick="copyPostLink()" style="display:none;">
            <i data-lucide="link" style="width:20px;"></i>
            <span>Copy Link</span>
        </button>
    </div>
</div>

<div id="reactionViewerBackdrop" class="reaction-viewer-backdrop" onclick="closeReactionViewer()"></div>
<div id="reactionViewerModal" class="reaction-viewer-modal">
    <div class="reaction-viewer-header">
        <h3 style="margin:0; font-size:16px;">Reactions</h3>
        <button onclick="closeReactionViewer()" style="background:none; border:none; color:white;" aria-label="Close reactions"><i data-lucide="x"></i></button>
    </div>
    <div id="reactionViewerList" class="reaction-viewer-list"></div>
</div>

<div id="searchModal" class="search-modal-container">
    <div class="search-header">
        <button onclick="document.getElementById('searchModal').style.display='none'" style="background:none; border:none; color:white;"><i data-lucide="arrow-left"></i></button>
        <div class="search-bar-wrap">
            <i data-lucide="search" style="width:16px; opacity:0.5;"></i>
            <input type="text" id="searchInput" class="search-input" placeholder="Search users or posts..." onkeyup="handleSearch()">
        </div>
    </div>
    <div id="searchResults" class="search-results">
        <div style="text-align:center; opacity:0.5; padding: var(--spacing-lg);">Type to search...</div>
    </div>
</div>

<div id="userProfilePage" class="profile-page-container">
    <button class="profile-nav-back" onclick="closeProfilePage()">
        <i data-lucide="arrow-left"></i>
    </button>
    
    <button id="profileSettingsMenuBtn" class="profile-settings-menu-btn" style="display:none;" onclick="toggleProfileSettingsDropdown()">
        <i data-lucide="more-vertical"></i>
    </button>
    
    <div id="profileSettingsDropdown" class="profile-settings-dropdown">
        <div class="dropdown-item" onclick="openProfileAccountSettings()">
            <i data-lucide="settings"></i>
            <span>Account Settings</span>
        </div>
    </div>
    
    <div class="profile-cover" id="pageProfileCover"></div>
    
    <div class="profile-info-section">
        <div class="profile-avatar-container" id="pageProfileAvatarContainer">
             </div>
        
        <h2 id="pageProfileName" class="profile-page-name">User Name</h2>
        <p id="pageProfileBio" class="profile-page-bio">Radio Bingo Player</p>
        
        <div class="profile-btn-group">
            <button id="profileMainActionBtn" class="profile-action-btn" onclick="handleProfileMainAction()">Add Friend</button>
            
            <button id="giftSkinBtn" class="profile-action-btn" style="display:none; background:linear-gradient(135deg, #f59e0b, #d97706); border:none; box-shadow: 0 4px 20px rgba(245, 158, 11, 0.4); color: white;">
                <i data-lucide="gift" style="width:16px"></i> Gift Skin
            </button>
            
            <button id="unfriendBtn" class="btn-unfriend-modern" style="display:none;" onclick="unfriendUser()">
                <i data-lucide="user-x" style="width:16px"></i> Unfriend
            </button>
        </div>
        
        <div class="profile-stats-card">
            <div class="stat-item">
                <span class="stat-val" id="statFriends">0</span>
                <span class="stat-lbl"><i data-lucide="users" style="width:12px; vertical-align:middle;"></i> Friends</span>
            </div>
            <div class="stat-item">
                <span class="stat-val" id="statLikes">0</span>
                <span class="stat-lbl"><i data-lucide="heart" style="width:12px; vertical-align:middle;"></i> Likes</span>
            </div>
             <div class="stat-item">
                <span class="stat-val" id="statPosts">0</span>
                <span class="stat-lbl"><i data-lucide="image" style="width:12px; vertical-align:middle;"></i> Posts</span>
            </div>
        </div>
        
        <div id="pageProfileFeed" class="profile-feed-section"></div>
    </div>
</div>

<div id="editProfileModal" class="modal" onclick="this.style.display='none'">
    <div class="modal-content" onclick="event.stopPropagation()">
        <h3 style="margin-top:0; color:white;">Edit Profile</h3>
        
        <label class="edit-label">Display Name</label>
        <input type="text" id="editNameIn" class="edit-input" placeholder="Your Name">
        
        <label class="edit-label">Bio</label>
        <input type="text" id="editBioIn" class="edit-input" placeholder="Short bio...">
        
        <label class="edit-label">Change Profile Picture</label>
        <input type="file" id="editProfilePicInput" class="edit-input" accept="image/*" onchange="handleProfileUpload(this, 'pfp')">
        
        <label class="edit-label">Change Cover Photo</label>
        <input type="file" id="editCoverPicInput" class="edit-input" accept="image/*" onchange="handleProfileUpload(this, 'cover')">

        <button onclick="saveProfileChanges()" style="width:100%; padding: var(--spacing-md); background:var(--accent); border:none; border-radius: var(--radius-md); font-weight:900; color:white; cursor:pointer;">SAVE CHANGES</button>
    </div>
</div>

<div id="giftSkinModal" class="modal" onclick="this.style.display='none'">
    <div class="modal-content" onclick="event.stopPropagation()">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: var(--spacing-md); border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 15px;">
            <div>
                <h3 style="margin:0; font-size: 18px; font-weight: 900;" id="giftModalTitle">Gift a Skin</h3>
                <p style="margin: 5px 0 0 0; font-size: 11px; opacity: 0.8; font-weight: 600;">Select a skin to gift</p>
            </div>
            <button onclick="document.getElementById('giftSkinModal').style.display='none'" style="background:none; border:none; color:white; cursor:pointer;"><i data-lucide="x"></i></button>
        </div>
        <div id="giftableSkinsList" class="skins-grid">
            </div>
    </div>
</div>

<!-- Profile Account Settings Modal -->
<div id="profileAccountSettingsModal" class="modal" onclick="this.style.display='none'">
    <div class="modal-content" onclick="event.stopPropagation()" style="max-width: 500px;">
        <h3 style="margin-top:0; color:white; display:flex; align-items:center; gap:10px;">
            <i data-lucide="settings" style="width:24px; height:24px; color:var(--accent);"></i>
            Account Settings
        </h3>
        
        <div class="settings-section" style="background: transparent; padding: 0; margin-bottom: 0;">
            <div class="settings-item" onclick="openProfileVerificationModal()">
                <div class="settings-item-info">
                    <div class="settings-item-icon" style="color: #3b82f6; background: rgba(59, 130, 246, 0.1);">
                        <i data-lucide="shield-check"></i>
                    </div>
                    <div class="settings-item-text">
                        <h4>Request Verification</h4>
                        <p id="profileVerificationStatusText">Request verification</p>
                    </div>
                </div>
                <div class="settings-item-arrow">
                    <i data-lucide="chevron-right"></i>
                </div>
            </div>
            
            <div class="settings-item" onclick="logoutFromProfile()">
                <div class="settings-item-info">
                    <div class="settings-item-icon" style="color: #ef4444; background: rgba(239, 68, 68, 0.1);">
                        <i data-lucide="log-out"></i>
                    </div>
                    <div class="settings-item-text">
                        <h4 style="color: #ef4444;">Log Out</h4>
                        <p>Sign out of your account</p>
                    </div>
                </div>
                <div class="settings-item-arrow">
                    <i data-lucide="chevron-right"></i>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Profile Verification Request Modal -->
<div id="profileVerificationModal" class="modal" onclick="this.style.display='none'" style="display:none;">
    <div class="modal-content" onclick="event.stopPropagation()" style="max-width: 500px;">
        <h3 style="margin-top:0; color:white; display:flex; align-items:center; gap:10px;">
            <i data-lucide="shield-check" style="width:24px; height:24px; color:var(--accent);"></i>
            Request Verification Badge
        </h3>
        
        <p style="color:rgba(255,255,255,0.7); font-size:14px; margin-bottom:20px;">
            Request a verification badge to show that your account is authentic. Admins will review your request.
        </p>
        
        <div id="profileVerificationFormContainer">
            <label class="edit-label" for="profileVerificationReason">Reason for Verification Request</label>
            <textarea id="profileVerificationReason" class="edit-input" placeholder="Why do you want to be verified? (e.g., I'm an active player, content creator, etc.)" rows="4" style="resize: vertical;" aria-label="Reason for verification request"></textarea>
            
            <div style="display:flex; gap:10px; margin-top:20px;">
                <button class="btn btn-secondary" onclick="document.getElementById('profileVerificationModal').style.display='none'" style="flex:1;">Cancel</button>
                <button class="btn btn-primary" onclick="submitProfileVerificationRequest()" style="flex:1;">Submit Request</button>
            </div>
        </div>
        
        <div id="profileVerificationStatusContainer" style="display:none;">
            <div id="profileVerificationStatusMessage" style="padding:15px; border-radius:8px; margin-bottom:15px;"></div>
            <button class="btn btn-secondary" onclick="document.getElementById('profileVerificationModal').style.display='none'" style="width:100%;">Close</button>
        </div>
    </div>
</div>

<div id="installGuideModal" class="modal" onclick="this.style.display='none'">
    <div class="modal-content" onclick="event.stopPropagation()">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: var(--spacing-md);">
            <h3 style="margin:0; font-size:18px; font-weight:900;">INSTALL GUIDE</h3>
            <button onclick="document.getElementById('installGuideModal').style.display='none'" style="background:none; border:none; color:white;"><i data-lucide="x"></i></button>
        </div>
        <div class="install-tabs">
            <button class="install-tab-btn active" id="tabAndroid" onclick="showGuide('android')">ANDROID</button>
            <button class="install-tab-btn" id="tabIOS" onclick="showGuide('ios')">iOS</button>
        </div>
        <div id="guideAndroidContent">
            <div class="guide-step"><div class="step-num">1</div><div class="step-text">Pindutin ang <b>Three Dots ()</b> sa upper right corner ng Google Chrome browser.</div></div>
            <div class="guide-step"><div class="step-num">2</div><div class="step-text">Hanapin at pindutin ang <b>"Install App"</b> o <b>"Add to Home Screen"</b>.</div></div>
            <div class="guide-step"><div class="step-num">3</div><div class="step-text">Click <b>Install</b> para mapunta ito sa iyong home screen.</div></div>
        </div>
        <div id="guideIOSContent" style="display:none;">
            <div class="guide-step"><div class="step-num">1</div><div class="step-text">Gamitin ang <b>Safari Browser</b> at pindutin ang <b>Share Icon</b> <i data-lucide="share" style="width:12px"></i> sa ibaba.</div></div>
            <div class="guide-step"><div class="step-num">2</div><div class="step-text">Mag-scroll pababa at hanapin ang <b>"Add to Home Screen"</b> <i data-lucide="plus-square" style="width:12px"></i>.</div></div>
            <div class="guide-step"><div class="step-num">3</div><div class="step-text">Click <b>Add</b> sa upper right corner.</div></div>
        </div>
    </div>
</div>

<div id="menuModal" class="modal" onclick="this.style.display='none'">
    <div class="modal-content" onclick="event.stopPropagation()">
        <div class="profile-header">
            <div id="menuAvatarContainer"></div>
            <div class="profile-name-info">
                <h2 class="profile-name" id="profileNameDisplay">User Name</h2>
                <span class="profile-uid" id="profileUidDisplay">UID: ---</span>
            </div>
            <button onclick="document.getElementById('menuModal').style.display='none'" style="background:none; border:none; color:white; opacity:0.5;"><i data-lucide="x"></i></button>
        </div>
        <div class="gcash-section">
            <span style="font-size:10px; font-weight:800; color:var(--accent-glow); text-transform:uppercase; margin-bottom: var(--spacing-sm); display:flex; align-items:center; gap:5px;"><i data-lucide="credit-card" style="width:12px"></i> Email / Redemption Info</span>
            <div style="display:flex; gap: var(--spacing-sm);">
                <input type="text" id="gcashInput" class="styled-input" placeholder="Enter email or details">
                <button onclick="saveGcash(); playSound('click');" style="background:var(--accent); border:none; color:white; padding:0 20px; border-radius: var(--radius-md); font-weight:800; font-size:12px; cursor:pointer; box-shadow:0 4px 10px rgba(59, 130, 246, 0.3);">SAVE</button>
            </div>
        </div>
        <div class="ref-container">
            <span style="font-size:10px; font-weight:800; color:var(--success); text-transform:uppercase; margin-bottom: var(--spacing-sm); display:flex; align-items:center; gap:5px;"><i data-lucide="share-2" style="width:12px"></i> Invite & Earn</span>
            <input type="text" id="refLink" readonly class="styled-input" style="background:rgba(0,0,0,0.2); text-align:center; cursor:pointer; margin-bottom: var(--spacing-sm);" onclick="this.select(); document.execCommand('copy'); showToast('Copied Link!'); playSound('click');">
            <div id="referralInputSection">
                <span style="font-size:10px; font-weight:800; color:var(--gold); text-transform:uppercase; margin-bottom: var(--spacing-sm); display:flex; align-items:center; gap:5px; margin-top:15px;"><i data-lucide="ticket" style="width:12px"></i> Claim Referral Code</span>
                <div style="display:flex; gap: var(--spacing-sm);">
                    <input type="text" id="referralInput" class="styled-input" placeholder="ENTER CODE">
                    <button onclick="claimReferral(); playSound('click');" style="background:var(--gold); border:none; color:black; padding:0 20px; border-radius: var(--radius-md); font-weight:800; font-size:12px; cursor:pointer; box-shadow:0 4px 10px rgba(251, 191, 36, 0.3);">CLAIM</button>
                </div>
            </div>
        </div>
        <div class="history-box">
            <span style="font-size:10px; font-weight:800; color:white; text-transform:uppercase; margin-bottom: var(--spacing-sm); display:flex; align-items:center; gap:5px;"><i data-lucide="history" style="width:12px"></i> Transaction History</span>
            <div id="historyList" class="history-list"></div>
        </div>
        
        <div style="margin-top:15px; border-top:1px solid rgba(255,255,255,0.1); padding-top:10px;">
            <button onclick="openSupportModal(); playSound('click');" style="display:flex; align-items:center; gap: var(--spacing-xs); color:#94a3b8; font-size:12px; padding:8px 0; text-decoration:none; background:none; border:none; cursor:pointer; width:100%; text-align:left;">
                <i data-lucide="message-square" style="width:14px;"></i>
                Contact Support
            </button>
            <a href="about.html" style="display:block; color:#94a3b8; font-size:12px; padding:8px 0; text-decoration:none;">About Us</a>
            <a href="privacy.html" style="display:block; color:#94a3b8; font-size:12px; padding:8px 0; text-decoration:none;">Privacy Policy</a>
            <a href="terms.html" style="display:block; color:#94a3b8; font-size:12px; padding:8px 0; text-decoration:none;">Terms of Service</a>
        </div>

        <button onclick="auth.signOut().then(()=>location.reload())" style="width:100%; padding:14px; background:rgba(239, 68, 68, 0.1); color:var(--danger); border:1px solid rgba(239, 68, 68, 0.2); border-radius:14px; font-weight:800; margin-top: var(--spacing-lg); cursor:pointer; display:flex; align-items:center; justify-content:center; gap: var(--spacing-xs);">
            <i data-lucide="log-out" style="width:18px"></i> Sign Out
        </button>
    </div>
</div>

<div id="storeModal" class="modal" onclick="this.style.display='none'">
    <div class="modal-content" onclick="event.stopPropagation()">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: var(--spacing-md); border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 15px;">
            <div>
                <h3 style="margin:0; font-size: 20px; font-weight: 900;">MARKETPLACE</h3>
                <p style="margin: 5px 0 0 0; font-size: 11px; opacity: 0.8; font-weight: 600;">Redeem, Shop Skins, or Earn</p>
            </div>
            <div class="points-badge" style="height:35px; border-radius: var(--radius-sm);"><i data-lucide="coins" style="width:14px"></i> <span id="storePoints">0</span></div>
        </div>
        <div class="store-nav">
            <button class="store-tab-btn active" onclick="switchStoreTab('cashout')" id="tabBtnCash">Cash Out</button>
            <button class="store-tab-btn" onclick="switchStoreTab('skins')" id="tabBtnSkins">Skins</button>
            <button class="store-tab-btn" onclick="switchStoreTab('earn')" id="tabBtnEarn" style="color:var(--gold);">Tasks</button>
        </div>
        
        <div class="glass-panel" style="padding: var(--spacing-md); border-radius: var(--radius-lg); margin-bottom: var(--spacing-lg); border: 1px dashed var(--gold); text-align: center; position: relative; overflow: hidden;">
            <h4 style="margin: 0 0 10px 0; color: var(--gold); font-size: 14px; text-transform: uppercase;"> FREE RB COINS </h4>
            <div id="adTimerOverlay" style="display: none; position: absolute; inset: 0; background: rgba(15, 23, 42, 0.98); z-index: 50; align-items: center; justify-content: center; flex-direction: column;">
                <div id="adStatusIcon" style="font-size: 30px; margin-bottom: var(--spacing-sm);"></div>
                <div style="font-size: 18px; font-weight: 900; color: white;" id="adCountdown">30s</div>
                <div style="font-size: 12px; color: #ef4444; padding: 0 20px; margin-top: 5px; font-weight:800;" id="adStatusText">Do not close app or switch tabs!</div>
            </div>
            <div id="adCaptchaOverlay" style="display: none; position: absolute; inset: 0; background: rgba(15, 23, 42, 0.98); z-index: 51; align-items: center; justify-content: center; flex-direction: column;">
                <div style="font-size: 14px; font-weight: 700; color: var(--accent-glow); margin-bottom: var(--spacing-sm);">HUMAN VERIFICATION</div>
                <div style="background: rgba(255,255,255,0.1); padding: var(--spacing-sm); border-radius: var(--radius-md); margin-bottom: var(--spacing-sm);">
                    <span id="mathQ" style="font-size: 20px; font-weight: 900; color: white;">5 + 3 = ?</span>
                </div>
                <div style="display: flex; gap: 5px;">
                    <input type="number" id="mathAns" style="width: 60px; padding: 8px; border-radius: var(--radius-sm); border: 1px solid var(--accent); background: #0f172a; color: white; text-align: center; font-weight: 800;">
                    <button onclick="verifyAdMath()" style="background: var(--success); border: none; padding: 8px 12px; border-radius: var(--radius-sm); color: white; font-weight: 900;">OK</button>
                </div>
            </div>
            <button id="btnWatchAd" onclick="startStrictWatch()" style="background: linear-gradient(135deg, #f59e0b, #b45309); width: 100%; border: none; padding: var(--spacing-md); border-radius: var(--radius-md); font-weight: 900; color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: var(--spacing-sm); font-size: 14px; box-shadow: 0 5px 15px rgba(245, 158, 11, 0.4); text-shadow: 0 1px 2px black;">
                <i data-lucide="play-circle" style="width: 20px;"></i> WATCH AD (+50 Coins)
            </button>
            <p style="font-size: 10px; opacity: 0.6; margin-top: 8px; color:var(--danger);">*Timer pauses if you leave the app!</p>
        </div>

        <div id="storeSection-cashout" style="display:block;">
            <div class="reward-grid">
                <div class="reward-item">
                    <div class="reward-main"><div class="reward-icon-box"><i data-lucide="gift" style="width:22px"></i></div><div class="reward-info"><b>20 Gift Card</b><small><i data-lucide="database" style="width:10px"></i> 50,000 Coins</small></div></div>
                    <button class="btn-redeem" onclick="redeemItem('20 Gift Card', 50000)">Redeem</button>
                </div>
                <div class="reward-item">
                    <div class="reward-main"><div class="reward-icon-box" style="color:var(--gold); background:rgba(251, 191, 36, 0.1); border-color:rgba(251, 191, 36, 0.3);"><i data-lucide="gift" style="width:22px"></i></div><div class="reward-info"><b>50 Gift Card</b><small><i data-lucide="database" style="width:10px"></i> 125,000 Coins</small></div></div>
                    <button class="btn-redeem" onclick="redeemItem('50 Gift Card', 125000)">Redeem</button>
                </div>
                <div class="reward-item">
                    <div class="reward-main"><div class="reward-icon-box" style="color:var(--success); background:rgba(16, 185, 129, 0.1); border-color:rgba(16, 185, 129, 0.3);"><i data-lucide="gift" style="width:22px"></i></div><div class="reward-info"><b>100 Gift Card</b><small><i data-lucide="database" style="width:10px"></i> 250,000 Coins</small></div></div>
                    <button class="btn-redeem" onclick="redeemItem('100 Gift Card', 250000)">Redeem</button>
                </div>
            </div>
            <p style="text-align: center; font-size: 10px; opacity: 0.6; margin-top: 25px; line-height: 1.5; text-shadow:0 1px 2px black;">*Processing may take 24-48 hours.<br>Make sure your redemption details are correct.</p>
        </div>

        <div id="storeSection-skins" style="display:none;">
            <p style="font-size:11px; opacity:0.7; margin-bottom: var(--spacing-md); text-align:center;">Customize your Bingo Card. Look rich, play rich.</p>
            
            <div style="margin-bottom: var(--spacing-lg); padding: var(--spacing-md); background:rgba(255,255,255,0.05); border-radius: var(--radius-md); text-align:center;">
                <label style="font-size:12px; font-weight:700; display:block; margin-bottom: var(--spacing-sm); color:var(--accent-glow);">UPLOAD CUSTOM BACKGROUND</label>
                <input type="file" accept="image/*" id="customSkinInput" style="display:none" onchange="handleCustomSkinUpload(this)">
                <button onclick="document.getElementById('customSkinInput').click()" style="background:var(--accent); color:white; border:none; padding:8px 15px; border-radius: var(--radius-sm); font-weight:800; font-size:11px; cursor:pointer;">CHOOSE IMAGE</button>
            </div>

            <div class="skins-grid">
                <div class="skin-item"><div class="skin-preview" style="background:rgba(30,41,59,0.8); border:1px solid rgba(255,255,255,0.1);">B</div><div class="skin-name">Classic</div><div class="skin-cost">Free</div><button class="btn-buy-skin equip" id="btn-skin-default" onclick="equipSkin('default')">EQUIP</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:pink; border:2px solid hotpink; color:deeppink; font-family:'Comic Neue',cursive;">B</div><div class="skin-name">Hello Kitty</div><div class="skin-cost">75,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-kitty" onclick="buyOrEquipSkin('kitty', 75000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:#0096df; border:2px solid white; color:white; border-radius:50%;">B</div><div class="skin-name">Doraemon</div><div class="skin-cost">75,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-doraemon" onclick="buyOrEquipSkin('doraemon', 75000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:#f7f44d; border:2px dashed brown; color:brown;">B</div><div class="skin-name">SpongeBob</div><div class="skin-cost">75,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-spongebob" onclick="buyOrEquipSkin('spongebob', 75000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:black; border:2px solid purple; color:pink;">B</div><div class="skin-name">Kuromi</div><div class="skin-cost">75,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-kuromi" onclick="buyOrEquipSkin('kuromi', 75000)">BUY</button></div>

                <div class="skin-item"><div class="skin-preview" style="background:rgba(8,51,68,1); border:2px solid #06b6d4; color:#67e8f9; text-shadow:0 0 5px #06b6d4;">B</div><div class="skin-name">Neon City</div><div class="skin-cost">50,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-neon" onclick="buyOrEquipSkin('neon', 50000)">BUY</button></div>
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #451a03, #000); border:2px solid #f59e0b; color:#fcd34d; font-family:'Times New Roman',serif;">B</div><div class="skin-name">Luxury Gold</div><div class="skin-cost">100,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-gold" onclick="buyOrEquipSkin('gold', 100000)">BUY</button></div>
                <div class="skin-item"><div class="skin-preview" style="background:rgba(80, 7, 36, 1); border:2px solid #ec4899; color:#fbcfe8; border-radius:50%;">B</div><div class="skin-name">Kawaii Pink</div><div class="skin-cost">25,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-pink" onclick="buyOrEquipSkin('pink', 25000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #FFD700, #FFA500); border:2px solid #000; color:#000; box-shadow:0 0 10px #FFD700;">B</div><div class="skin-name">Electric Mouse</div><div class="skin-cost">80,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-electric-mouse" onclick="buyOrEquipSkin('electric-mouse', 80000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #FFB6D9, #9D4EDD); border:2px solid #FFD700; color:#FFE4F5; border-radius:50%;">B</div><div class="skin-name">Magic Moon</div><div class="skin-cost">85,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-magic-moon" onclick="buyOrEquipSkin('magic-moon', 85000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #FF6B00, #FF8C00); border:3px solid #0066CC; color:#fff;">B</div><div class="skin-name">Orange Ninja</div><div class="skin-cost">90,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-orange-ninja" onclick="buyOrEquipSkin('orange-ninja', 90000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #B8C5B0, #7A9D7A); border:2px solid #8B7355; color:#3D5C3D; border-radius:20px;">B</div><div class="skin-name">Forest Spirit</div><div class="skin-cost">75,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-forest-spirit" onclick="buyOrEquipSkin('forest-spirit', 75000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:radial-gradient(circle, #0066FF, #003399); border:2px solid #FF0000; color:#FFD700; border-radius:50%; box-shadow:0 0 10px #0066FF;">B</div><div class="skin-name">Blue Speedster</div><div class="skin-cost">85,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-blue-speedster" onclick="buyOrEquipSkin('blue-speedster', 85000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #8B00FF, #4B0082); border:2px solid #00FFFF; color:#00FFFF; box-shadow:0 0 10px #00FFFF;">B</div><div class="skin-name">Cyberpunk Neon</div><div class="skin-cost">95,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-cyberpunk-neon" onclick="buyOrEquipSkin('cyberpunk-neon', 95000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:radial-gradient(ellipse, #1a0033, #000000); border:1px solid #8A2BE2; color:#E6E6FA; box-shadow:0 0 15px #8A2BE2;">B</div><div class="skin-name">Galaxy Dreams</div><div class="skin-cost">100,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-galaxy-dreams" onclick="buyOrEquipSkin('galaxy-dreams', 100000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #FF71CE, #01CDFE); border:2px solid #01CDFE; color:#fff;">B</div><div class="skin-name">Vaporwave</div><div class="skin-cost">90,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-vaporwave" onclick="buyOrEquipSkin('vaporwave', 90000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #FF4500 0%, #FF6347 50%, #00CED1 50%, #4682B4 100%); border:2px solid #FFD700; color:#fff;">B</div><div class="skin-name">Fire & Ice</div><div class="skin-cost">110,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-fire-ice" onclick="buyOrEquipSkin('fire-ice', 110000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(45deg, #FF1493, #FFD700, #00CED1); border:2px solid #FFD700; color:#000; border-radius:50%; box-shadow:0 0 10px #FFD700;">B</div><div class="skin-name">Disco Fever</div><div class="skin-cost">85,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-disco-fever" onclick="buyOrEquipSkin('disco-fever', 85000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #0d2626, #1a4d4d); border:4px dashed #1a4d4d; color:#67e8f9;">B</div><div class="skin-name">Demon Slayer</div><div class="skin-cost">120,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-demon-slayer" onclick="buyOrEquipSkin('demon-slayer', 120000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #dc2626, #ef4444); border:3px solid #fef08a; color:#fef08a; font-weight:900;">B</div><div class="skin-name">Straw Hat</div><div class="skin-cost">110,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-straw-hat" onclick="buyOrEquipSkin('straw-hat', 110000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:radial-gradient(circle, #fbbf24, #f59e0b); border:2px solid #fbbf24; color:#fff; box-shadow:0 0 15px #fbbf24; font-weight:900;">B</div><div class="skin-name">Super Saiyan</div><div class="skin-cost">150,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-super-saiyan" onclick="buyOrEquipSkin('super-saiyan', 150000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #e0e7ff, #c7d2fe); border:2px solid #a78bfa; color:#4c1d95; box-shadow:0 0 10px #c4b5fd;">B</div><div class="skin-name">Shadow King</div><div class="skin-cost">130,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-shadow-king" onclick="buyOrEquipSkin('shadow-king', 130000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(90deg, #1e40af, #3b82f6); border:2px solid #ef4444; color:#fff; border-radius:50%; box-shadow:0 0 10px #3b82f6;">B</div><div class="skin-name">Blue Hedgehog</div><div class="skin-cost">90,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-blue-hedgehog" onclick="buyOrEquipSkin('blue-hedgehog', 90000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(180deg, #dc2626, #3b82f6); border:3px solid #fbbf24; color:#fbbf24; border-radius:15px;">B</div><div class="skin-name">Plumber Hero</div><div class="skin-cost">85,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-plumber-hero" onclick="buyOrEquipSkin('plumber-hero', 85000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:radial-gradient(circle, #fce7f3, #fbcfe8); border:2px solid #f9a8d4; color:#ec4899; border-radius:50%;">B</div><div class="skin-name">Pink Puffball</div><div class="skin-cost">75,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-pink-puffball" onclick="buyOrEquipSkin('pink-puffball', 75000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #dc2626, #7f1d1d, #1e3a8a); border:2px solid #1e3a8a; color:#fff;">B</div><div class="skin-name">Web Warrior</div><div class="skin-cost">120,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-web-warrior" onclick="buyOrEquipSkin('web-warrior', 120000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #3b82f6, #6366f1); border:2px solid #7c3aed; color:#c4b5fd; border-radius:20px;">B</div><div class="skin-name">Little Alien</div><div class="skin-cost">95,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-little-alien" onclick="buyOrEquipSkin('little-alien', 95000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #f0f9ff, #bae6fd); border:2px solid #7dd3fc; color:#0369a1; border-radius:50%;">B</div><div class="skin-name">Cinnamon Puppy</div><div class="skin-cost">80,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-cinnamon-puppy" onclick="buyOrEquipSkin('cinnamon-puppy', 80000)">BUY</button></div>
                
                <div class="skin-item" id="customSkinSlot" style="display:none;"><div class="skin-preview" id="customSkinPreview" style="background-size:cover;">B</div><div class="skin-name">My Custom</div><div class="skin-cost">Owned</div><button class="btn-buy-skin equip" id="btn-skin-custom" onclick="equipSkin('custom')">EQUIP</button></div>
            </div>
        </div>
        <div id="storeSection-earn" style="display:none;">
            <p style="font-size:11px; opacity:0.7; margin-bottom: var(--spacing-md); text-align:center;">Complete tasks to earn huge coins instantly.</p>
            <div class="task-list">
                <div class="task-item" style="border-color: #ef4444; background: linear-gradient(90deg, rgba(69,10,10,0.8), rgba(15,23,42,0.8));">
                    <div class="task-info"><h4 style="color:#fca5a5;">Watch Video Task</h4><p>Watch full video to unlock reward</p><span class="task-reward" style="background: rgba(239,68,68,0.2); border-color:#ef4444; color:#fca5a5;">+2,000 Coins</span></div>
                    <button class="btn-do-task" style="background:#ef4444;" id="btn-task-video" onclick="openVideoLocker('video')">WATCH</button>
                </div>
                <div class="task-item">
                    <div class="task-info"><h4>Premium Offer</h4><p>Complete simple offer to verify</p><span class="task-reward">+5,000 Coins</span></div>
                    <button class="btn-do-task" id="btn-task-premium" onclick="startTaskSafe('https://doctoredits.com/1874673', 5000, 'premium')">GO</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="supportModal" class="modal" onclick="this.style.display='none'">
    <div class="modal-content" onclick="event.stopPropagation()">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: var(--spacing-md); border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 15px;">
            <div>
                <h3 style="margin:0; font-size: 20px; font-weight: 900;">CONTACT SUPPORT</h3>
                <p style="margin: 5px 0 0 0; font-size: 11px; opacity: 0.8; font-weight: 600;">Send a message to our team</p>
            </div>
            <button onclick="document.getElementById('supportModal').style.display='none'" style="background:none; border:none; color:white; cursor:pointer;"><i data-lucide="x"></i></button>
        </div>
        
        <label class="edit-label">Subject</label>
        <input type="text" id="supportSubject" class="edit-input" placeholder="Brief description of your issue">
        
        <label class="edit-label">Message</label>
        <textarea id="supportMessage" class="edit-input" rows="6" placeholder="Please describe your issue in detail..." style="resize:vertical;"></textarea>
        
        <button onclick="submitSupportRequest()" style="width:100%; padding: var(--spacing-md); background:var(--accent); border:none; border-radius: var(--radius-md); font-weight:900; color:white; cursor:pointer; display:flex; align-items:center; justify-content:center; gap: var(--spacing-xs);">
            <i data-lucide="send" style="width:16px;"></i>
            SEND MESSAGE
        </button>
        
        <div id="myTicketsSection" style="margin-top: var(--spacing-lg); padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1);">
            <h4 style="margin:0 0 15px 0; font-size: 14px; font-weight: 800; color: var(--accent-glow); display: flex; align-items: center; gap: var(--spacing-xs);">
                <i data-lucide="inbox" style="width:16px;"></i> MY TICKETS
            </h4>
            <div id="ticketsList" style="max-height: 200px; overflow-y: auto;"></div>
        </div>
    </div>
</div>

<div id="ticketDetailModal" class="modal" onclick="this.style.display='none'">
    <div class="modal-content" onclick="event.stopPropagation()" style="max-height: 80vh; overflow-y: auto;">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: var(--spacing-md); border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 15px; position: sticky; top: 0; background: #1e293b; z-index: 10;">
            <div>
                <h3 style="margin:0; font-size: 18px; font-weight: 900;" id="ticketDetailSubject">Ticket Subject</h3>
                <p style="margin: 5px 0 0 0; font-size: 11px; opacity: 0.8; font-weight: 600;">
                    Status: <span id="ticketDetailStatus" style="color: var(--gold);">Open</span>
                </p>
            </div>
            <button onclick="closeTicketDetail()" style="background:none; border:none; color:white; cursor:pointer;"><i data-lucide="x"></i></button>
        </div>
        
        <div id="ticketRepliesContainer" style="margin-bottom: var(--spacing-md);"></div>
        
        <div style="border-top: 1px solid rgba(255,255,255,0.1); padding-top: 15px;">
            <label class="edit-label">Reply to Ticket</label>
            <textarea id="ticketReplyInput" class="edit-input" rows="4" placeholder="Type your reply here..." style="resize:vertical;"></textarea>
            <button onclick="submitTicketReply()" style="width:100%; padding: var(--spacing-sm); background:var(--accent); border:none; border-radius: var(--radius-md); font-weight:900; color:white; cursor:pointer; display:flex; align-items:center; justify-content:center; gap: var(--spacing-xs); margin-top:10px;">
                <i data-lucide="send" style="width:16px;"></i>
                SEND REPLY
            </button>
        </div>
    </div>
</div>

<div id="pwaInstallBanner">
    <div><span class="pwa-text">INSTALL APP</span><span class="pwa-sub">Download for better experience!</span></div>
    <button id="pwaBottomBtn" class="pwa-btn">INSTALL</button>
</div>



<!-- ========== COMPONENT HTML ========== -->
<header class="header">
    <div class="header-content">
        <div class="header-title" onclick="scrollToTop()" role="button" tabindex="0" onkeypress="if(event.key==='Enter'||event.key===' '){scrollToTop()}" aria-label="Scroll to top">
            <img src="https://i.imgur.com/7D8u8h6.png" alt="App Icon" class="app-icon">
            <span>Radio Bingo</span>
        </div>
        <div class="header-actions">
            <button class="header-btn" onclick="openSearchModal()" aria-label="Search users">
                <i data-lucide="search"></i>
            </button>
            <button class="header-btn" onclick="openNotifications()" aria-label="View notifications">
                <i data-lucide="bell"></i>
                <span id="notif-badge" class="notif-badge" style="display:none;">0</span>
            </button>
        </div>
    </div>
</header>

<nav class="bottom-nav">
    <div class="nav-container">
        
        <div class="nav-item active" onclick="switchTab('home')" role="button" tabindex="0" 
             onkeypress="if(event.key==='Enter'||event.key===' '){event.preventDefault();switchTab('home')}" 
             aria-label="Home tab">
            <i data-lucide="home" class="nav-icon"></i>
            <span class="nav-label">Home</span>
        </div>
        
        
        <div class="nav-item featured" onclick="switchTab('bingo')" role="button" tabindex="0" 
             onkeypress="if(event.key==='Enter'||event.key===' '){event.preventDefault();switchTab('bingo')}" 
             aria-label="Bingo tab">
            <i data-lucide="grid-3x3" class="nav-icon"></i>
            <span class="nav-label">Bingo</span>
        </div>
        
        
        <div class="nav-item" onclick="switchTab('store')" role="button" tabindex="0" 
             onkeypress="if(event.key==='Enter'||event.key===' '){event.preventDefault();switchTab('store')}" 
             aria-label="Store tab">
            <i data-lucide="shopping-bag" class="nav-icon"></i>
            <span class="nav-label">Store</span>
        </div>
        
        
        <div class="nav-item" onclick="switchTab('me')" role="button" tabindex="0" 
             onkeypress="if(event.key==='Enter'||event.key===' '){event.preventDefault();switchTab('me')}" 
             aria-label="Profile tab">
            <i data-lucide="user" class="nav-icon"></i>
            <span class="nav-label">Me</span>
        </div>
    </div>
</nav>

<div id="home-tab" class="tab-content home-tab">
    
    <div class="post-creator-modern">
        <p class="post-creator-title">
            <i data-lucide="sparkles"></i>
            Ano ang iniisip mo?
        </p>
        <textarea id="post-input" class="post-input-modern" placeholder="I-share ang iyong mga saloobin..."></textarea>
        
        
        <div class="action-buttons-row">
            <button class="action-btn-ghost" onclick="document.getElementById('post-image-input').click()" title="Litrato">
                <i data-lucide="image"></i>
            </button>
            <button class="action-btn-ghost" onclick="triggerCamera()" title="Camera">
                <i data-lucide="camera"></i>
            </button>
        </div>
        
        
        <input type="file" id="post-image-input" accept="image/*" style="display:none;" onchange="previewPostImage(event)">
        <input type="file" id="post-camera-input" accept="image/*" capture="environment" style="display:none;" onchange="previewPostImage(event)">
        
        
        <div id="post-image-preview" style="display:none; position:relative;">
            <img id="preview-img" style="width:100%; border-radius:16px; margin-top:12px;">
            <button onclick="removePostImage()" style="position:absolute; top:20px; right:8px; background:rgba(0,0,0,0.7); border:none; color:white; padding:8px 12px; border-radius:8px; cursor:pointer; font-size:12px; font-weight:600;">
                Tanggalin
            </button>
        </div>
        
        
        <div class="post-footer">
            <div class="post-footer-left">
                <div class="feelings-selector-container">
                    <div class="feelings-selector">
                        <button class="feeling-btn" onclick="selectFeeling(this, 'happy')" data-feeling="happy">
                             Happy
                        </button>
                        <button class="feeling-btn" onclick="selectFeeling(this, 'sad')" data-feeling="sad">
                             Sad
                        </button>
                        <button class="feeling-btn" onclick="selectFeeling(this, 'excited')" data-feeling="excited">
                             Excited
                        </button>
                        <button class="feeling-btn" onclick="selectFeeling(this, 'loved')" data-feeling="loved">
                             Loved
                        </button>
                        <button class="feeling-btn" onclick="selectFeeling(this, 'angry')" data-feeling="angry">
                             Angry
                        </button>
                    </div>
                </div>
            </div>
            <div class="post-footer-right">
                <button class="privacy-btn" onclick="togglePrivacy()">
                    <i data-lucide="globe"></i>
                    <span id="privacy-text">Public</span>
                </button>
                <button class="post-btn-modern" onclick="submitPost()">I-post</button>
            </div>
        </div>
    </div>

    
    <div id="posts-feed"></div>
</div>

<div id="bingo-tab" class="tab-content bingo-tab" style="display:none;">
    
    <div class="bingo-header">
        <h1> Radio Bingo Live</h1>
        <p class="bingo-subtitle">Mark your numbers and win prizes!</p>
    </div>

    
    <div class="stats-grid">
        <div class="stat-card">
            <i data-lucide="trophy" class="stat-icon"></i>
            <div class="stat-value" id="bingo-wins">0</div>
            <div class="stat-label">Total Wins</div>
        </div>
        <div class="stat-card">
            <i data-lucide="target" class="stat-icon"></i>
            <div class="stat-value" id="bingo-marked">0</div>
            <div class="stat-label">Numbers Marked</div>
        </div>
    </div>

    
    <div class="current-number">
        <p class="current-number-label">Current Number</p>
        <h2 class="current-number-value" id="current-bingo-number">--</h2>
    </div>

    
    <div class="bingo-card-container">
        <div class="bingo-grid" id="bingo-grid">
            
        </div>
        
        <div class="bingo-actions">
            <button class="bingo-btn bingo-btn-secondary" onclick="resetBingoCard()">
                <i data-lucide="refresh-cw" style="width:18px;"></i>
                Reset Card
            </button>
            <button class="bingo-btn bingo-btn-primary" onclick="checkBingo()">
                <i data-lucide="check-circle" style="width:18px;"></i>
                Check Bingo
            </button>
        </div>
    </div>

    
    <div class="called-numbers">
        <h3> Called Numbers</h3>
        <div class="numbers-list" id="called-numbers-list">
            <span class="number-chip">No numbers called yet</span>
        </div>
    </div>
</div>

<div id="store-tab" class="tab-content store-tab" style="display:none;">
    
    <div class="store-header">
        <h1> Rewards Store</h1>
        <p class="store-subtitle">Redeem your points for amazing rewards!</p>
    </div>

    
    <div class="points-balance">
        <div class="points-info">
            <div class="points-icon"></div>
            <div class="points-details">
                <h3>Your Points</h3>
                <div class="points-amount" id="user-points-display">0</div>
            </div>
        </div>
        <button class="earn-points-btn" onclick="showEarnPointsInfo()">
            Earn More
        </button>
    </div>

    
    <div class="store-categories">
        <div class="category-chip active" onclick="filterStoreItems('all')">All Items</div>
        <div class="category-chip" onclick="filterStoreItems('featured')"> Featured</div>
        <div class="category-chip" onclick="filterStoreItems('loaditems')"> Load</div>
        <div class="category-chip" onclick="filterStoreItems('gcash')"> GCash</div>
        <div class="category-chip" onclick="filterStoreItems('vouchers')"> Vouchers</div>
    </div>

    
    <div class="store-items" id="store-items-grid">
        
    </div>
</div>


<div class="modal-backdrop" id="purchase-backdrop" onclick="closePurchaseModal()"></div>
<div class="purchase-modal" id="purchase-modal">
    <div class="purchase-modal-header">
        <h2 style="margin:0; color:white; font-size:18px;">Confirm Purchase</h2>
        <button class="purchase-modal-close" onclick="closePurchaseModal()">
            <i data-lucide="x" style="width:20px;"></i>
        </button>
    </div>
    
    <div id="purchase-modal-content">
        
    </div>
</div>

<div id="view-profile" class="me-tab" style="display:none;">
    <div class="profile-header-card">
        <div style="position: relative; display: inline-block;">
            <img id="profile-img-large" src="https://via.placeholder.com/120" class="profile-avatar-large" onclick="openEditProfile()">
            <div class="edit-badge" style="position: absolute; bottom: 16px; right: 0; background: var(--accent); width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 3px solid #0f172a; cursor: pointer;">
                <i data-lucide="edit-2" style="width: 14px; height: 14px; color: white;"></i>
            </div>
        </div>
        
        <h2 id="profile-name-large" class="profile-name">Loading...</h2>
        <p id="profile-uid-display" class="profile-username">ID: ...</p>
        
        <div class="profile-stats">
            <div class="profile-stat">
                <div id="profile-points" class="profile-stat-value">0</div>
                <div class="profile-stat-label">Wallet</div>
            </div>
            <div class="profile-stat">
                <div id="profile-wins" class="profile-stat-value">0</div>
                <div class="profile-stat-label">Wins</div>
            </div>
            <div class="profile-stat">
                <div id="profile-friends" class="profile-stat-value">0</div>
                <div class="profile-stat-label">Friends</div>
            </div>
        </div>
    </div>

    <div class="profile-actions">
        <div class="profile-action-btn" onclick="openEditProfile()">
            <div class="profile-action-icon">
                <i data-lucide="user-cog"></i>
            </div>
            <div class="profile-action-label">Edit Profile</div>
        </div>
        
        <div class="profile-action-btn" onclick="openInventory()">
            <div class="profile-action-icon">
                <i data-lucide="backpack"></i>
            </div>
            <div class="profile-action-label">My Skins</div>
        </div>

        <div class="profile-action-btn" onclick="openHistory()">
            <div class="profile-action-icon">
                <i data-lucide="history"></i>
            </div>
            <div class="profile-action-label">History</div>
        </div>

        <div class="profile-action-btn" onclick="shareProfile()">
            <div class="profile-action-icon">
                <i data-lucide="share-2"></i>
            </div>
            <div class="profile-action-label">Share App</div>
        </div>
    </div>

    <div class="settings-section">
        <div class="settings-section-title">
            <i data-lucide="user"></i>
            Account Settings
        </div>

        <div class="settings-item featured" onclick="openVerificationRequestModal()">
            <div class="settings-item-info">
                <div class="settings-item-icon" style="color: #3b82f6; background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(59, 130, 246, 0.1));">
                    <i data-lucide="shield-check"></i>
                </div>
                <div class="settings-item-text">
                    <h4>Verification Badge</h4>
                    <p id="verification-status-text">Get verified to stand out</p>
                </div>
            </div>
            <div class="settings-item-arrow">
                <i data-lucide="chevron-right"></i>
            </div>
        </div>
    </div>

    <div class="settings-section">
        <div class="settings-section-title">
            <i data-lucide="settings"></i>
            Preferences
        </div>

        <div class="settings-item" onclick="toggleSound()">
            <div class="settings-item-info">
                <div class="settings-item-icon" style="color: var(--accent); background: linear-gradient(135deg, rgba(14, 165, 233, 0.15), rgba(14, 165, 233, 0.05));">
                    <i id="sound-icon" data-lucide="volume-2"></i>
                </div>
                <div class="settings-item-text">
                    <h4>Sound Effects</h4>
                    <p id="sound-status">Sounds enabled</p>
                </div>
            </div>
            <div class="toggle-switch" id="sound-toggle">
                <div class="toggle-switch-handle"></div>
            </div>
        </div>

        <div class="settings-item" onclick="toggleNotifications()">
            <div class="settings-item-info">
                <div class="settings-item-icon" style="color: #f59e0b; background: linear-gradient(135deg, rgba(245, 158, 11, 0.15), rgba(245, 158, 11, 0.05));">
                    <i id="notifications-icon" data-lucide="bell"></i>
                </div>
                <div class="settings-item-text">
                    <h4>Push Notifications</h4>
                    <p id="notifications-status">Notifications enabled</p>
                </div>
            </div>
            <div class="toggle-switch" id="notifications-toggle">
                <div class="toggle-switch-handle"></div>
            </div>
        </div>

        <div class="settings-item" onclick="openSupportModal()">
            <div class="settings-item-info">
                <div class="settings-item-icon" style="color: var(--minigame); background: linear-gradient(135deg, rgba(244, 114, 182, 0.15), rgba(244, 114, 182, 0.05));">
                    <i data-lucide="life-buoy"></i>
                </div>
                <div class="settings-item-text">
                    <h4>Support & Help</h4>
                    <p>Get assistance and report issues</p>
                </div>
            </div>
            <div class="settings-item-arrow">
                <i data-lucide="chevron-right"></i>
            </div>
        </div>
        
        <div class="settings-item" onclick="openTerms()">
            <div class="settings-item-info">
                <div class="settings-item-icon" style="color: #8b5cf6; background: linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(139, 92, 246, 0.05));">
                    <i data-lucide="file-text"></i>
                </div>
                <div class="settings-item-text">
                    <h4>Terms & Privacy</h4>
                    <p>Review our policies</p>
                </div>
            </div>
            <div class="settings-item-arrow">
                <i data-lucide="chevron-right"></i>
            </div>
        </div>
    </div>

    <div class="settings-section">
        <div class="settings-section-title">
            <i data-lucide="log-out"></i>
            Account
        </div>

        <div class="settings-item" onclick="logout()" style="background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(239, 68, 68, 0.05) 100%); border-color: rgba(239, 68, 68, 0.2);">
            <div class="settings-item-info">
                <div class="settings-item-icon" style="color: #ef4444; background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(239, 68, 68, 0.1)); border-color: rgba(239, 68, 68, 0.3);">
                    <i data-lucide="log-out"></i>
                </div>
                <div class="settings-item-text">
                    <h4 style="color: #ef4444;">Sign Out</h4>
                    <p>Log out of your account</p>
                </div>
            </div>
            <div class="settings-item-arrow" style="color: #ef4444;">
                <i data-lucide="chevron-right"></i>
            </div>
        </div>
    </div>

    <div class="app-version">
        Radio Bingo v2.5.0<br>
        UID: <span id="footer-uid">...</span>
    </div>
</div>


<div id="verificationModal" class="modal" onclick="this.style.display='none'" style="display:none;">
    <div class="modal-content" onclick="event.stopPropagation()" style="max-width: 500px;">
        <h3 style="margin-top:0; color:white; display:flex; align-items:center; gap:12px; font-size:22px; font-weight:800;">
            <i data-lucide="shield-check" style="width:28px; height:28px; color:var(--accent); filter: drop-shadow(0 0 8px rgba(14, 165, 233, 0.5));"></i>
            Request Verification Badge
        </h3>
        
        <p style="color:rgba(255,255,255,0.7); font-size:14px; margin-bottom:24px; line-height:1.6;">
            Request a verification badge to show that your account is authentic. Admins will review your request and notify you of the decision.
        </p>
        
        <div id="verificationFormContainer">
            <label class="edit-label" style="font-weight:600; margin-bottom:8px; display:block;">Reason for Verification Request</label>
            <textarea id="verificationReason" class="edit-input" placeholder="Why do you want to be verified? (e.g., I'm an active player, content creator, community leader, etc.)" rows="5" style="resize: vertical; margin-bottom:20px;"></textarea>
            
            <div style="display:flex; gap:12px; margin-top:24px;">
                <button class="btn-secondary-enhanced" onclick="document.getElementById('verificationModal').style.display='none'" style="flex:1;">Cancel</button>
                <button class="btn-primary-enhanced" onclick="submitVerificationRequest()" style="flex:1;">
                    <i data-lucide="send" style="width:16px; height:16px; display:inline-block; vertical-align:middle; margin-right:6px;"></i>
                    Submit Request
                </button>
            </div>
        </div>
        
        <div id="verificationStatusContainer" style="display:none;">
            <div id="verificationStatusMessage" style="padding:20px; border-radius:var(--radius-lg); margin-bottom:20px; font-size:14px; line-height:1.6;"></div>
            <button class="btn-secondary-enhanced" onclick="document.getElementById('verificationModal').style.display='none'" style="width:100%;">Close</button>
        </div>
    </div>
</div>


<!-- ========== COMPONENT SCRIPTS ========== -->
<script>

    function scrollToTop() {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    
    function openSearchModal() {
        document.getElementById('searchModal').style.display = 'flex';
        document.getElementById('searchModalBackdrop').style.display = 'block';
        document.getElementById('searchInput').focus();
    }
    
    function openNotifications() {
        document.getElementById('notificationModal').style.display = 'flex';
        document.getElementById('notificationBackdrop').style.display = 'block';
        loadNotifications();
    }
    
    // Update notification badge
    function updateNotificationBadge() {
        if (!auth.currentUser) return;
        
        db.ref('notifications/' + auth.currentUser.uid).on('value', snapshot => {
            let unreadCount = 0;
            snapshot.forEach(child => {
                const notif = child.val();
                if (!notif.read) unreadCount++;
            });
            
            const badge = document.getElementById('notif-badge');
            if (unreadCount > 0) {
                badge.textContent = unreadCount > 99 ? '99+' : unreadCount;
                badge.style.display = 'block';
            } else {
                badge.style.display = 'none';
            }
        });
    }


    // Current active tab
    let currentTab = 'home';

    function switchTab(tabName) {
        // Hide all tabs
        document.querySelectorAll('.tab-content').forEach(tab => {
            tab.style.display = 'none';
        });
        
        // Show selected tab
        const selectedTab = document.getElementById(tabName + '-tab');
        if (selectedTab) {
            selectedTab.style.display = 'block';
        }
        
        // Update nav items
        document.querySelectorAll('.nav-item').forEach(item => {
            item.classList.remove('active');
        });
        
        // Add active class to current nav item
        event.currentTarget.classList.add('active');
        
        // Update current tab
        currentTab = tabName;
        
        // Scroll to top
        window.scrollTo({ top: 0, behavior: 'smooth' });
        
        // Load tab-specific content
        if (tabName === 'home') {
            loadPosts();
        } else if (tabName === 'bingo') {
            loadBingoData();
        } else if (tabName === 'store') {
            loadStoreItems();
        } else if (tabName === 'me') {
            loadProfileData();
        }
        
        // Reinitialize Lucide icons
        lucide.createIcons();
    }
    
    // Initialize navigation on page load
    document.addEventListener('DOMContentLoaded', function() {
        // Set home as default active tab
        switchTab('home');
    });


    let selectedPostImage = null;
    let selectedFeeling = null;
    let postPrivacy = 'public';

    function triggerCamera() {
        document.getElementById('post-camera-input').click();
    }

    function selectFeeling(btn, feeling) {
        // Toggle selection
        if (selectedFeeling === feeling) {
            selectedFeeling = null;
            btn.classList.remove('active');
        } else {
            // Remove active class from all feeling buttons
            document.querySelectorAll('.feeling-btn').forEach(b => b.classList.remove('active'));
            selectedFeeling = feeling;
            btn.classList.add('active');
        }
    }

    function togglePrivacy() {
        const privacyIcon = document.querySelector('.privacy-btn i');
        const privacyText = document.getElementById('privacy-text');
        
        // Simple toggle between public and private (visual only)
        if (postPrivacy === 'public') {
            postPrivacy = 'private';
            privacyText.textContent = 'Private';
            privacyIcon.setAttribute('data-lucide', 'lock');
        } else {
            postPrivacy = 'public';
            privacyText.textContent = 'Public';
            privacyIcon.setAttribute('data-lucide', 'globe');
        }
        lucide.createIcons();
    }

    function previewPostImage(event) {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = (e) => {
                selectedPostImage = e.target.result;
                document.getElementById('preview-img').src = e.target.result;
                document.getElementById('post-image-preview').style.display = 'block';
            };
            reader.readAsDataURL(file);
        }
    }

    function removePostImage() {
        selectedPostImage = null;
        document.getElementById('post-image-preview').style.display = 'none';
        document.getElementById('post-image-input').value = '';
        document.getElementById('post-camera-input').value = '';
    }

    function submitPost() {
        const content = document.getElementById('post-input').value.trim();
        if (!content && !selectedPostImage) {
            alert('Magsulat ng mensahe o mag-upload ng larawan!');
            return;
        }

        if (!auth.currentUser) {
            alert('Mag-login muna!');
            return;
        }

        const postData = {
            author: auth.currentUser.uid,
            content: content,
            timestamp: Date.now(),
            likes: 0,
            comments: 0
        };

        if (selectedPostImage) {
            postData.image = selectedPostImage;
        }
        
        if (selectedFeeling) {
            postData.feeling = selectedFeeling;
        }
        
        postData.privacy = postPrivacy;

        db.ref('socialPosts').push(postData).then(() => {
            document.getElementById('post-input').value = '';
            removePostImage();
            // Reset feeling selection
            document.querySelectorAll('.feeling-btn').forEach(b => b.classList.remove('active'));
            selectedFeeling = null;
            alert('Post na-publish!');
        });
    }

    function loadPosts() {
        if (!auth.currentUser) return;
        
        const feed = document.getElementById('posts-feed');
        db.ref('socialPosts').orderByChild('timestamp').limitToLast(50).on('value', snapshot => {
            feed.innerHTML = '';
            const posts = [];
            
            snapshot.forEach(child => {
                posts.unshift({
                    key: child.key,
                    ...child.val()
                });
            });
            
            posts.forEach(post => {
                feed.appendChild(createPostElement(post));
            });
            
            lucide.createIcons();
        });
    }

    function createPostElement(post) {
        const postDiv = document.createElement('div');
        postDiv.className = 'post-card';
        
        // Get author info
        db.ref('users/' + post.author).once('value', snapshot => {
            const author = snapshot.val();
            if (author) {
                const timeAgo = getTimeAgo(post.timestamp);
                
                postDiv.innerHTML = `
                    <div class="post-header">
                        <img src="${author.photo || 'https://via.placeholder.com/48'}" 
                             alt="${author.name}" 
                             class="post-avatar"
                             onclick="openUserProfile('${post.author}')">
                        <div class="post-author-info">
                            <p class="post-author" onclick="openUserProfile('${post.author}')">${author.name}</p>
                            <p class="post-time">${timeAgo}</p>
                        </div>
                        ${post.author === auth.currentUser.uid ? `
                            <button class="post-options-btn" onclick="deletePost('${post.key}')">
                                <i data-lucide="trash-2" style="width:16px; color:rgba(255,255,255,0.4);"></i>
                            </button>
                        ` : ''}
                    </div>
                    ${post.content ? `<div class="post-content">${escapeHtml(post.content)}</div>` : ''}
                    ${post.image ? `<img src="${post.image}" class="post-image" onclick="openImageModal('${post.image}')">` : ''}
                    <div class="post-actions">
                        <button class="action-btn" id="like-btn-${post.key}" onclick="toggleLike('${post.key}', '${post.author}')">
                            <i data-lucide="heart"></i>
                            <span id="like-count-${post.key}">${post.likes || 0}</span>
                        </button>
                        <button class="action-btn" onclick="openComments('${post.key}')">
                            <i data-lucide="message-circle"></i>
                            <span>${post.comments || 0}</span>
                        </button>
                        <button class="action-btn" onclick="sharePost('${post.key}')">
                            <i data-lucide="share-2"></i>
                        </button>
                    </div>
                `;
                
                lucide.createIcons();
            }
        });
        
        return postDiv;
    }

    function getTimeAgo(timestamp) {
        const now = Date.now();
        const diff = now - timestamp;
        const seconds = Math.floor(diff / 1000);
        const minutes = Math.floor(seconds / 60);
        const hours = Math.floor(minutes / 60);
        const days = Math.floor(hours / 24);

        if (days > 0) return days + ' araw na nakaraan';
        if (hours > 0) return hours + ' oras na nakaraan';
        if (minutes > 0) return minutes + ' minuto na nakaraan';
        return 'Kailan lang';
    }

    function escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }

    function toggleLike(postKey, authorUid) {
        const myUid = auth.currentUser.uid;
        const likeRef = db.ref('postLikes/' + postKey + '/' + myUid);
        
        likeRef.once('value', snapshot => {
            if (snapshot.exists()) {
                // Unlike
                likeRef.remove();
                db.ref('socialPosts/' + postKey + '/likes').transaction(likes => (likes || 1) - 1);
            } else {
                // Like
                likeRef.set(true);
                db.ref('socialPosts/' + postKey + '/likes').transaction(likes => (likes || 0) + 1);
                
                // Notify author
                if (authorUid !== myUid) {
                    db.ref('notifications/' + authorUid).push({
                        msg: userData.name + ' nag-like ng iyong post',
                        time: Date.now(),
                        type: 'like',
                        from: myUid,
                        postId: postKey
                    });
                }
            }
        });
    }

    function deletePost(postKey) {
        if (confirm('Sigurado ka bang gusto mong tanggalin ang post na ito?')) {
            db.ref('socialPosts/' + postKey).remove();
        }
    }


    let bingoCard = [];
    let markedCells = new Set();
    let calledNumbers = [];

    function initializeBingoCard() {
        bingoCard = generateBingoCard();
        renderBingoCard();
    }

    function generateBingoCard() {
        const card = [];
        const ranges = [
            [1, 15],   // B
            [16, 30],  // I
            [31, 45],  // N
            [46, 60],  // G
            [61, 75]   // O
        ];

        for (let col = 0; col < 5; col++) {
            const column = [];
            const [min, max] = ranges[col];
            const numbers = [];
            
            // Generate unique numbers for this column
            while (numbers.length < 5) {
                const num = Math.floor(Math.random() * (max - min + 1)) + min;
                if (!numbers.includes(num)) {
                    numbers.push(num);
                }
            }
            
            card.push(numbers);
        }

        return card;
    }

    function renderBingoCard() {
        const grid = document.getElementById('bingo-grid');
        grid.innerHTML = '';

        for (let row = 0; row < 5; row++) {
            for (let col = 0; col < 5; col++) {
                const cell = document.createElement('div');
                cell.className = 'bingo-cell';
                
                // Middle cell is FREE
                if (row === 2 && col === 2) {
                    cell.textContent = 'FREE';
                    cell.classList.add('free', 'marked');
                    markedCells.add('2-2');
                } else {
                    const number = bingoCard[col][row];
                    cell.textContent = number;
                    cell.onclick = () => toggleCell(row, col, number);
                }
                
                cell.id = `cell-${row}-${col}`;
                grid.appendChild(cell);
            }
        }
    }

    function toggleCell(row, col, number) {
        const cellId = `${row}-${col}`;
        const cell = document.getElementById(`cell-${row}-${col}`);
        
        if (markedCells.has(cellId)) {
            markedCells.delete(cellId);
            cell.classList.remove('marked');
        } else {
            markedCells.add(cellId);
            cell.classList.add('marked');
        }
        
        updateBingoStats();
    }

    function resetBingoCard() {
        if (confirm('Reset your bingo card? This will clear all marks.')) {
            markedCells.clear();
            initializeBingoCard();
            updateBingoStats();
        }
    }

    function checkBingo() {
        const hasWon = checkForWin();
        
        if (hasWon) {
            // Confetti animation
            if (typeof confetti !== 'undefined') {
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
            }
            
            alert(' BINGO! You won! ');
            
            // Award points
            if (auth.currentUser) {
                db.ref('users/' + auth.currentUser.uid + '/points').transaction(p => (p || 0) + 1000);
                db.ref('users/' + auth.currentUser.uid + '/bingoWins').transaction(w => (w || 0) + 1);
            }
        } else {
            alert('Not yet! Keep playing!');
        }
    }

    function checkForWin() {
        // Check rows
        for (let row = 0; row < 5; row++) {
            let hasRow = true;
            for (let col = 0; col < 5; col++) {
                if (!markedCells.has(`${row}-${col}`)) {
                    hasRow = false;
                    break;
                }
            }
            if (hasRow) return true;
        }
        
        // Check columns
        for (let col = 0; col < 5; col++) {
            let hasCol = true;
            for (let row = 0; row < 5; row++) {
                if (!markedCells.has(`${row}-${col}`)) {
                    hasCol = false;
                    break;
                }
            }
            if (hasCol) return true;
        }
        
        // Check diagonals
        let hasDiag1 = true;
        let hasDiag2 = true;
        for (let i = 0; i < 5; i++) {
            if (!markedCells.has(`${i}-${i}`)) hasDiag1 = false;
            if (!markedCells.has(`${i}-${4-i}`)) hasDiag2 = false;
        }
        
        return hasDiag1 || hasDiag2;
    }

    function updateBingoStats() {
        document.getElementById('bingo-marked').textContent = markedCells.size;
    }

    function loadBingoData() {
        if (!auth.currentUser) return;
        
        // Load wins count
        db.ref('users/' + auth.currentUser.uid + '/bingoWins').once('value', snapshot => {
            document.getElementById('bingo-wins').textContent = snapshot.val() || 0;
        });
        
        // Load current number
        db.ref('bingoGame/currentNumber').on('value', snapshot => {
            const number = snapshot.val();
            document.getElementById('current-bingo-number').textContent = number || '--';
        });
        
        // Load called numbers
        db.ref('bingoGame/calledNumbers').on('value', snapshot => {
            const numbers = snapshot.val();
            const list = document.getElementById('called-numbers-list');
            
            if (numbers && numbers.length > 0) {
                list.innerHTML = '';
                numbers.slice(-20).reverse().forEach((num, index) => {
                    const chip = document.createElement('span');
                    chip.className = 'number-chip' + (index === 0 ? ' recent' : '');
                    chip.textContent = num;
                    list.appendChild(chip);
                });
            }
        });
        
        // Initialize card if not exists
        if (bingoCard.length === 0) {
            initializeBingoCard();
        }
    }

    // Initialize bingo when tab is first loaded
    if (document.getElementById('bingo-tab')) {
        initializeBingoCard();
    }


    const storeItems = [
        {
            id: 'load50',
            name: 'Smart/TNT 50 Load',
            price: 500,
            emoji: '',
            category: 'load',
            description: 'Regular load para sa Smart/TNT',
            featured: true
        },
        {
            id: 'load100',
            name: 'Smart/TNT 100 Load',
            price: 1000,
            emoji: '',
            category: 'load',
            description: 'Regular load para sa Smart/TNT'
        },
        {
            id: 'gcash50',
            name: 'GCash 50',
            price: 550,
            emoji: '',
            category: 'gcash',
            description: '50 pesos GCash transfer',
            featured: true
        },
        {
            id: 'gcash100',
            name: 'GCash 100',
            price: 1100,
            emoji: '',
            category: 'gcash',
            description: '100 pesos GCash transfer'
        },
        {
            id: 'grab50',
            name: 'Grab Voucher 50',
            price: 600,
            emoji: '',
            category: 'vouchers',
            description: '50 pesos Grab voucher'
        },
        {
            id: 'foodpanda50',
            name: 'Foodpanda Voucher 50',
            price: 600,
            emoji: '',
            category: 'vouchers',
            description: '50 pesos Foodpanda voucher'
        },
        {
            id: 'shopee100',
            name: 'Shopee Voucher 100',
            price: 1200,
            emoji: '',
            category: 'vouchers',
            description: '100 pesos Shopee voucher'
        },
        {
            id: 'netflix',
            name: 'Netflix 1-Month',
            price: 4500,
            emoji: '',
            category: 'vouchers',
            description: '1-month Netflix subscription',
            featured: true
        }
    ];

    function loadStoreItems() {
        renderStoreItems(storeItems);
        updateUserPoints();
    }

    function renderStoreItems(items) {
        const grid = document.getElementById('store-items-grid');
        grid.innerHTML = '';

        items.forEach(item => {
            const itemDiv = document.createElement('div');
            itemDiv.className = 'store-item';
            itemDiv.onclick = () => openPurchaseModal(item);
            
            itemDiv.innerHTML = `
                ${item.featured ? '<div class="item-badge">Featured</div>' : ''}
                <div class="item-image">${item.emoji}</div>
                <div class="item-name">${item.name}</div>
                <div class="item-price" style="color:var(--gold); font-weight:900;">
                    ${formatCurrency(item.price)}
                </div>
            `;
            
            grid.appendChild(itemDiv);
        });
        
        lucide.createIcons();
    }

    function filterStoreItems(category) {
        // Update active category
        document.querySelectorAll('.category-chip').forEach(chip => {
            chip.classList.remove('active');
        });
        event.currentTarget.classList.add('active');

        // Filter items
        let filtered = storeItems;
        if (category === 'featured') {
            filtered = storeItems.filter(item => item.featured);
        } else if (category !== 'all') {
            filtered = storeItems.filter(item => item.category === category);
        }

        renderStoreItems(filtered);
    }

    function updateUserPoints() {
        if (!auth.currentUser) return;
        
        db.ref('users/' + auth.currentUser.uid + '/points').on('value', snapshot => {
            const points = snapshot.val() || 0;
            // UPDATED: Use formatCurrency
            document.getElementById('user-points-display').textContent = formatCurrency(points);
        });
    }

    function openPurchaseModal(item) {
        const modal = document.getElementById('purchase-modal');
        const backdrop = document.getElementById('purchase-backdrop');
        const content = document.getElementById('purchase-modal-content');
        
        db.ref('users/' + auth.currentUser.uid + '/points').once('value', snapshot => {
            const userPoints = snapshot.val() || 0;
            const canAfford = userPoints >= item.price;
            
            content.innerHTML = `
                <div class="purchase-item-image">${item.emoji}</div>
                <h3 class="purchase-item-name">${item.name}</h3>
                <p class="purchase-item-description">${item.description}</p>
                
                <div class="purchase-item-price">
                    <span class="purchase-price-label">Price:</span>
                    <span class="purchase-price-value">
                        ${formatCurrency(item.price)}
                    </span>
                </div>
                
                <button class="purchase-btn" 
                        ${!canAfford ? 'disabled' : ''}
                        onclick="confirmPurchase('${item.id}', ${item.price})">
                    ${canAfford ? ' Confirm Purchase' : ' Insufficient Balance'}
                </button>
                
                ${!canAfford ? `
                    <p style="text-align:center; color:rgba(255,255,255,0.5); font-size:12px; margin-top:12px;">
                        You need ${formatCurrency(item.price - userPoints)} more
                    </p>
                ` : ''}
            `;
            
            modal.style.display = 'block';
            backdrop.style.display = 'block';
            lucide.createIcons();
        });
    }

    function closePurchaseModal() {
        document.getElementById('purchase-modal').style.display = 'none';
        document.getElementById('purchase-backdrop').style.display = 'none';
    }

    function confirmPurchase(itemId, price) {
        if (!auth.currentUser) {
            alert('Please log in first!');
            return;
        }

        const userRef = db.ref('users/' + auth.currentUser.uid);
        
        userRef.child('points').transaction(currentPoints => {
            if (currentPoints >= price) {
                return currentPoints - price;
            }
            return;
        }, (error, committed) => {
            if (error) {
                alert('Purchase failed. Please try again.');
            } else if (!committed) {
                alert('Insufficient points!');
            } else {
                // Log purchase
                db.ref('purchases/' + auth.currentUser.uid).push({
                    itemId: itemId,
                    price: price,
                    timestamp: Date.now(),
                    status: 'pending'
                });
                
                // Confetti
                if (typeof confetti !== 'undefined') {
                    confetti({
                        particleCount: 100,
                        spread: 70,
                        origin: { y: 0.6 }
                    });
                }
                
                alert(' Purchase successful! Please wait for processing.');
                closePurchaseModal();
            }
        });
    }

    function showEarnPointsInfo() {
        alert('Earn balance by:\n\n' +
              ' Posting on the feed\n' +
              ' Getting likes on your posts\n' +
              ' Commenting on posts\n' +
              ' Playing Bingo and winning\n' +
              ' Daily login bonuses');
    }


    function initProfilePage() {
        if(!auth.currentUser) return;
        
        const uid = auth.currentUser.uid;
        
        // Listen to User Data
        db.ref('users/' + uid).on('value', s => {
            const user = s.val();
            if(!user) return;
            
            document.getElementById('profile-name-large').textContent = user.name;
            document.getElementById('profile-uid-display').textContent = "ID: " + uid.substring(0,8);
            document.getElementById('footer-uid').textContent = uid;
            
            // Avatar
            document.getElementById('profile-img-large').src = user.photo || 'https://via.placeholder.com/120';
            
            // Stats - UPDATED to use formatCurrency for Points
            // Note: formatCurrency is globally available from script.js
            if(typeof formatCurrency === 'function') {
                document.getElementById('profile-points').textContent = formatCurrency(user.points);
            } else {
                document.getElementById('profile-points').textContent = user.points || 0;
            }
            
            document.getElementById('profile-wins').textContent = user.bingoWins || 0;
            
            // Update verification status display
            updateVerificationStatusDisplay(user);
            
            // Friends count
            db.ref('friends/' + uid).once('value', fSnap => {
                document.getElementById('profile-friends').textContent = fSnap.numChildren() || 0;
            });
        });

        // Initialize Sound State
        const muted = localStorage.getItem('app_muted') === 'true';
        updateSoundUI(muted);
        
        // Initialize Notifications State
        const notificationsEnabled = localStorage.getItem('notifications_enabled') !== 'false';
        updateNotificationsUI(notificationsEnabled);
    }

    function toggleSound() {
        const isMuted = localStorage.getItem('app_muted') === 'true';
        const newState = !isMuted;
        localStorage.setItem('app_muted', newState);
        updateSoundUI(newState);
        
        // Update global audio volume
        if(newState) {
            // Mute logic
            if(typeof sounds !== 'undefined') {
                Object.values(sounds).forEach(s => s.muted = true);
            }
        } else {
            // Unmute logic
            if(typeof sounds !== 'undefined') {
                Object.values(sounds).forEach(s => s.muted = false);
            }
            if(typeof playSound === 'function') playSound('click');
        }
    }

    function updateSoundUI(isMuted) {
        const statusText = document.getElementById('sound-status');
        const icon = document.getElementById('sound-icon');
        const toggle = document.getElementById('sound-toggle');
        
        if(isMuted) {
            statusText.textContent = "Sounds disabled";
            icon.setAttribute('data-lucide', 'volume-x');
            toggle.classList.remove('active');
        } else {
            statusText.textContent = "Sounds enabled";
            icon.setAttribute('data-lucide', 'volume-2');
            toggle.classList.add('active');
        }
        lucide.createIcons();
    }

    function toggleNotifications() {
        const notificationsEnabled = localStorage.getItem('notifications_enabled') !== 'false';
        const newState = !notificationsEnabled;
        
        if(newState) {
            // Request notification permission if not already granted
            if(typeof Notification !== 'undefined' && Notification.permission === 'default') {
                Notification.requestPermission().then(permission => {
                    if(permission === 'granted') {
                        localStorage.setItem('notifications_enabled', true);
                        updateNotificationsUI(true);
                        if(typeof showToast === 'function') {
                            showToast(' Notifications enabled!');
                        }
                    } else if(permission === 'denied') {
                        // Permission denied, reset to disabled state
                        localStorage.setItem('notifications_enabled', false);
                        updateNotificationsUI(false);
                        if(typeof showToast === 'function') {
                            showToast('Notification permission denied');
                        }
                    }
                }).catch(err => {
                    console.error('Error requesting notification permission:', err);
                    // Reset to disabled state on error
                    localStorage.setItem('notifications_enabled', false);
                    updateNotificationsUI(false);
                    if(typeof showToast === 'function') {
                        showToast('Error enabling notifications');
                    }
                });
            } else if(typeof Notification !== 'undefined' && Notification.permission === 'granted') {
                // Already granted, just enable
                localStorage.setItem('notifications_enabled', true);
                updateNotificationsUI(true);
                if(typeof showToast === 'function') {
                    showToast(' Notifications enabled!');
                }
            } else {
                // Notification API not available or permission denied
                localStorage.setItem('notifications_enabled', false);
                updateNotificationsUI(false);
                if(typeof showToast === 'function') {
                    showToast('Notifications not available');
                }
            }
        } else {
            // Disable notifications
            localStorage.setItem('notifications_enabled', false);
            updateNotificationsUI(false);
            if(typeof showToast === 'function') {
                showToast('Notifications disabled');
            }
        }
    }

    function updateNotificationsUI(enabled) {
        const statusText = document.getElementById('notifications-status');
        const icon = document.getElementById('notifications-icon');
        const toggle = document.getElementById('notifications-toggle');
        
        if(enabled) {
            statusText.textContent = "Notifications enabled";
            icon.setAttribute('data-lucide', 'bell');
            toggle.classList.add('active');
        } else {
            statusText.textContent = "Notifications disabled";
            icon.setAttribute('data-lucide', 'bell-off');
            toggle.classList.remove('active');
        }
        lucide.createIcons();
    }

    function openInventory() {
        if(typeof switchStoreTab === 'function') {
             switchStoreTab('skins');
             // Hide other views and show Store section
             document.querySelectorAll('.view-section').forEach(el => el.style.display = 'none'); // General hide
             document.getElementById('view-profile').style.display = 'none';
             
             // Open Store View
             const storeView = document.getElementById('view-store'); 
             if(storeView) {
                 storeView.style.display = 'block';
                 document.getElementById('nav-store').classList.add('active'); // Update nav if exists
             } else {
                 // Fallback if store is modal based or inside another view
                 const storeSkins = document.getElementById('storeSection-skins');
                 if(storeSkins) storeSkins.style.display = 'block';
             }
        }
        
        if(typeof updateSkinButtons === 'function') updateSkinButtons();
    }
    
    function openHistory() {
        if(typeof openMenuModal === 'function') {
            openMenuModal(); 
            // If history is inside menu modal, we might need to simulate click or just show it
            if(typeof loadHistory === 'function') loadHistory();
        }
    }

    function shareProfile() {
        if (navigator.share) {
            navigator.share({
                title: 'Radio Bingo',
                text: 'Join me on Radio Bingo! Play and win real prizes.',
                url: window.location.origin
            });
        } else {
            // Fallback
            const dummy = document.createElement('input');
            document.body.appendChild(dummy);
            dummy.value = window.location.origin;
            dummy.select();
            document.execCommand('copy');
            document.body.removeChild(dummy);
            if(typeof showToast === 'function') showToast("Link copied to clipboard!");
            else alert("Link copied!");
        }
    }

    function logout() {
        if(typeof showCustomConfirm === 'function') {
            showCustomConfirm("Sign Out?", "Are you sure you want to log out?", () => {
                auth.signOut().then(() => {
                    window.location.reload();
                });
            });
        } else {
            if(confirm("Sign Out?")) {
                auth.signOut().then(() => {
                    window.location.reload();
                });
            }
        }
    }

    function openTerms() {
        window.open('terms.html', '_blank');
    }

    function updateVerificationStatusDisplay(user) {
        const statusText = document.getElementById('verification-status-text');
        if(!statusText) return;
        
        if(user.verified) {
            statusText.innerHTML = '<span style="color:#10b981; font-weight:600;"> Verified Account</span>';
        } else if(user.verificationStatus === 'pending') {
            statusText.innerHTML = '<span style="color:#f59e0b; font-weight:600;"> Review in progress</span>';
        } else if(user.verificationStatus === 'rejected') {
            statusText.innerHTML = '<span style="color:#ef4444; font-weight:600;"> Try requesting again</span>';
        } else {
            statusText.textContent = 'Get verified to stand out';
        }
    }

    function openVerificationRequestModal() {
        if(!auth.currentUser) return;
        
        const uid = auth.currentUser.uid;
        db.ref('users/' + uid).once('value', s => {
            const user = s.val();
            if(!user) return;
            
            const modal = document.getElementById('verificationModal');
            const formContainer = document.getElementById('verificationFormContainer');
            const statusContainer = document.getElementById('verificationStatusContainer');
            const statusMessage = document.getElementById('verificationStatusMessage');
            
            if(user.verified) {
                // Already verified
                formContainer.style.display = 'none';
                statusContainer.style.display = 'block';
                statusMessage.style.background = 'rgba(16, 185, 129, 0.15)';
                statusMessage.style.border = '1px solid rgba(16, 185, 129, 0.3)';
                statusMessage.style.color = '#10b981';
                statusMessage.innerHTML = '<strong> Account Verified!</strong><br>Your account already has a verification badge.';
            } else if(user.verificationStatus === 'pending') {
                // Pending request
                formContainer.style.display = 'none';
                statusContainer.style.display = 'block';
                statusMessage.style.background = 'rgba(245, 158, 11, 0.15)';
                statusMessage.style.border = '1px solid rgba(245, 158, 11, 0.3)';
                statusMessage.style.color = '#f59e0b';
                statusMessage.innerHTML = '<strong> Request Pending</strong><br>Your verification request is being reviewed by admins.';
            } else {
                // Can request
                formContainer.style.display = 'block';
                statusContainer.style.display = 'none';
                document.getElementById('verificationReason').value = user.verificationReason || '';
            }
            
            modal.style.display = 'flex';
            lucide.createIcons();
        });
    }

    function submitVerificationRequest() {
        if(!auth.currentUser) return;
        
        const reason = document.getElementById('verificationReason').value.trim();
        if(reason.length < 10) {
            if(typeof showToast === 'function') {
                showToast('Please provide a reason (at least 10 characters)');
            } else {
                alert('Please provide a reason (at least 10 characters)');
            }
            return;
        }
        
        const uid = auth.currentUser.uid;
        const updates = {
            verificationStatus: 'pending',
            verificationReason: reason,
            verificationRequestedAt: Date.now()
        };
        
        db.ref('users/' + uid).update(updates).then(() => {
            if(typeof showToast === 'function') {
                showToast(' Verification request submitted!');
            }
            document.getElementById('verificationModal').style.display = 'none';
        }).catch(err => {
            console.error('Error submitting verification request:', err);
            if(typeof showToast === 'function') {
                showToast('Error submitting request. Please try again.');
            }
        });
    }

</script>
<script src="script.js"></script>
</body>
</html>
