<!DOCTYPE html>
<html lang="tl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radio Live Bingo | Interactive Stream</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>

    <style>
        :root {
            --primary: #00f2fe;
            --secondary: #4facfe;
            --accent: #ff4757;
            --bg: #0f172a;
            --glass: rgba(255, 255, 255, 0.05);
            --card-text: #333;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: radial-gradient(circle at top left, #1e293b, #0f172a);
            color: white;
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }

        /* Header Styling */
        header {
            padding: 20px;
            text-align: center;
            background: rgba(0, 0, 0, 0.3);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 2px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Main Layout */
        .main-wrapper {
            max-width: 1200px;
            margin: 20px auto;
            display: grid;
            grid-template-columns: 1.5fr 1fr;
            gap: 20px;
            padding: 0 15px;
        }

        /* Stream Section */
        .stream-card {
            background: var(--glass);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .video-container {
            width: 100%;
            aspect-ratio: 16/9;
            background: #000;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        /* Bingo Section */
        .bingo-card-container {
            background: white;
            border-radius: 20px;
            padding: 20px;
            color: var(--card-text);
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
        }

        .bingo-header {
            display: flex;
            justify-content: space-between;
            font-weight: 900;
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: var(--accent);
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
        }

        .cell {
            aspect-ratio: 1;
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .cell:hover {
            border-color: var(--secondary);
            transform: translateY(-2px);
        }

        .cell.marked {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            box-shadow: 0 4px 12px rgba(79, 172, 254, 0.4);
        }

        .cell.free {
            background: #ffeaa7;
            font-size: 0.7rem;
            color: #d63031;
        }

        /* Controls */
        .btn-claim {
            margin-top: 20px;
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 12px;
            background: var(--accent);
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 71, 87, 0.4);
            transition: 0.3s;
        }

        .btn-claim:active { transform: scale(0.95); }

        .status-badge {
            display: inline-block;
            padding: 5px 12px;
            background: rgba(46, 213, 115, 0.2);
            color: #2ed573;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-top: 10px;
        }

        /* Mobile Responsive */
        @media (max-width: 850px) {
            .main-wrapper { grid-template-columns: 1fr; }
            .bingo-card-container { max-width: 400px; margin: auto; }
        }
    </style>
</head>
<body>

<header>
    <div class="logo">üéôÔ∏è RadioBingo Live</div>
</header>

<div class="main-wrapper">
    <div class="stream-card">
        <div class="video-container">
            <iframe src="PASTE_YOUR_EMBED_LINK_HERE" allowfullscreen></iframe>
        </div>
        <div style="padding: 15px 5px;">
            <span class="status-badge">‚óè LIVE</span>
            <h2 style="margin: 10px 0 5px 0;">DJ Night Mix & Bingo</h2>
            <p style="color: #94a3b8; font-size: 0.9rem; margin: 0;">Nakikinig: <span id="viewCount">...</span> | ID: <span id="userId">Guest</span></p>
        </div>
    </div>

    <div class="bingo-card-container">
        <div class="bingo-header">
            <span>B</span><span>I</span><span>N</span><span>G</span><span>O</span>
        </div>
        <div class="grid" id="bingoGrid">
            </div>
        <button class="btn-claim" onclick="claimBingo()">ISIGAW ANG BINGO!</button>
    </div>
</div>

<script>
    const firebaseConfig = {
  apiKey: "AIzaSyDIAQXJ15atKJxu7PtcFL1W9JnO1N14pVs",
  authDomain: "radiobingo-9ac29.firebaseapp.com",
  databaseURL: "https://radiobingo-9ac29-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "radiobingo-9ac29",
  storageBucket: "radiobingo-9ac29.firebasestorage.app",
  messagingSenderId: "965903993397",
  appId: "1:965903993397:web:f6646fa05225f147eebf7c",
  measurementId: "G-RR2EG93C43"
};

    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
    const uid = "User_" + Math.floor(1000 + Math.random() * 9000);
    document.getElementById('userId').innerText = uid;

    // 2. Bingo Logic
    const grid = document.getElementById('bingoGrid');
    let markedNumbers = [];
    
    // Simple random generator per column
    function generateBingo() {
        let card = [];
        for(let i=0; i<5; i++) {
            let column = [];
            let min = (i * 15) + 1;
            let max = (i * 15) + 15;
            while(column.length < 5) {
                let r = Math.floor(Math.random() * (max - min + 1)) + min;
                if(column.indexOf(r) === -1) column.push(r);
            }
            card.push(column);
        }
        return card;
    }

    const myCardData = generateBingo();
    
    // Render Card
    for(let row=0; row<5; row++) {
        for(let col=0; col<5; col++) {
            let val = myCardData[col][row];
            let cell = document.createElement('div');
            cell.className = 'cell';
            
            if(row === 2 && col === 2) {
                cell.innerText = "FREE";
                cell.classList.add('marked', 'free');
                markedNumbers.push("FREE");
            } else {
                cell.innerText = val;
                cell.onclick = () => toggleCell(cell, val);
            }
            grid.appendChild(cell);
        }
    }

    function toggleCell(element, val) {
        element.classList.toggle('marked');
        if(element.classList.contains('marked')) {
            markedNumbers.push(val);
        } else {
            markedNumbers = markedNumbers.filter(n => n !== val);
        }
        
        // Sync to Firebase
        database.ref('players/' + uid).set({
            name: uid,
            marked: markedNumbers,
            lastSeen: Date.now()
        });
    }

    function claimBingo() {
        database.ref('winners/').push({
            name: uid,
            time: new Date().toLocaleTimeString()
        });
        alert("üéâ BINGO! Naipadala na sa DJ!");
    }
</script>

</body>
</html>
