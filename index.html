
<!DOCTYPE html>
<html lang="tl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0f172a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Radio Bingo Live | Social Ecosystem</title>
    
    <script>
        if (window.location.pathname.endsWith("index.html")) {
            var newPath = window.location.pathname.replace(/index\.html$/, "");
            window.history.replaceState({}, document.title, newPath);
        }
    </script>

    <link rel="icon" type="image/png" href="https://i.imgur.com/7D8u8h6.png">
    <link rel="apple-touch-icon" href="https://i.imgur.com/7D8u8h6.png">
    <link rel="manifest" href="manifest.json">
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&family=Comic+Neue:wght@700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-messaging.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://pl28660488.effectivegatecpm.com/9b/f5/85/9bf585b6ee39cb9b515e2fae1fa958c2.js"></script>
    <script src="https://pl28660496.effectivegatecpm.com/a6/64/bf/a664bf7e7084386b4f4b428590030df3.js"></script>

    <link rel="stylesheet" href="styles.css">
</head>
<body>

<div class="app-header">
    <div class="header-left">
        <div class="brand-logo">RB<span>LIVE</span></div>
    </div>
    <div id="userPanel" class="header-right" style="display:none;">
        <div class="header-icon-btn" onclick="openSearch()">
            <i data-lucide="search"></i>
        </div>
        <div class="header-icon-btn" onclick="openMessenger()">
            <i data-lucide="message-circle"></i>
            <span id="pmBadge" class="header-badge"></span>
        </div>
        <div class="header-icon-btn" onclick="openNotifs()">
            <i data-lucide="bell"></i>
            <span id="notifDot" class="header-badge"></span>
        </div>
        <div id="userImgContainer" class="header-avatar" onclick="openMenuModal()"></div>
    </div>
</div>

<div class="main-scroll-container">
    <div class="container">
        
        <div class="ad-container-global">
            <script type="text/javascript">
                atOptions = { 'key' : '9bf585b6ee39cb9b515e2fae1fa958c2', 'format' : 'iframe', 'height' : 50, 'width' : 320, 'params' : {} };
            </script>
            <script type="text/javascript" src="https://pl28660488.effectivegatecpm.com/9b/f5/85/9bf585b6ee39cb9b515e2fae1fa958c2.js"></script>
        </div>

        <div id="view-home" style="display:block;">
            <div id="friendRequestsSection"></div>
            
            <div class="post-creator-modern" id="mainPostCreator">
                <h4 class="post-creator-title">
                    <i data-lucide="edit-3"></i> Create Post
                </h4>
                
                <textarea id="postInput" class="post-input-modern" placeholder="What's on your mind?"></textarea>
                
                <div class="image-preview-container" id="imgPreviewCont">
                    <img id="postImgPreview" class="image-preview-img">
                    <div class="btn-remove-img" onclick="removePostImage()"><i data-lucide="x" style="width:12px;"></i></div>
                </div>

                <div class="action-buttons-row">
                    <button class="action-btn-ghost" onclick="selectMood(this, 'Happy')">
                        <i data-lucide="smile"></i> Happy
                    </button>
                    <button class="action-btn-ghost" onclick="selectMood(this, 'Sad')">
                        <i data-lucide="frown"></i> Sad
                    </button>
                    <label for="postImgInput" class="action-btn-ghost">
                        <i data-lucide="image"></i> Photo
                    </label>
                    <input type="file" id="postImgInput" accept="image/*" style="display:none" onchange="handlePostImage(this)">
                </div>

                <div class="post-tools">
                    <div class="custom-visibility-dropdown">
                        <input type="hidden" id="postVisibility" value="public">
                        <button type="button" class="visibility-trigger" onclick="toggleVisibilityDropdown()">
                            <i data-lucide="globe" id="visibilityIcon"></i>
                            <span id="visibilityText">Public</span>
                        </button>
                        <div class="visibility-dropdown-menu" id="visibilityMenu">
                            <div class="visibility-option selected" data-value="public" onclick="selectVisibility('public', 'globe', 'Public')">
                                <i data-lucide="globe"></i>
                                <span>Public</span>
                            </div>
                            <div class="visibility-option" data-value="friends" onclick="selectVisibility('friends', 'users', 'Friends Only')">
                                <i data-lucide="users"></i>
                                <span>Friends Only</span>
                            </div>
                            <div class="visibility-option" data-value="private" onclick="selectVisibility('private', 'lock', 'Only Me')">
                                <i data-lucide="lock"></i>
                                <span>Only Me</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <button class="btn-post-modern" onclick="createPost()">POST</button>
            </div>

            <div id="pymkSection" class="pymk-section" style="display:none;">
                <div class="pymk-title">People You May Know</div>
                <div class="pymk-scroll" id="pymkList"></div>
            </div>

            <div class="feed-sort-modern">
                <button class="sort-btn active" id="sort-hype" onclick="toggleFeedSort('hype')">
                    <i data-lucide="flame" style="width:14px"></i> HOT
                </button>
                <button class="sort-btn" id="sort-new" onclick="toggleFeedSort('new')">
                    <i data-lucide="clock" style="width:14px"></i> NEW
                </button>
            </div>

            <div id="socialFeed" class="social-feed-container">
                <div style="text-align:center; padding: var(--spacing-lg); opacity:0.5;">Loading Feed...</div>
            </div>
        </div>

        <div id="view-bingo" style="display:none;">
            <div class="video-feed-wrapper">
                <div class="video-container">
                    <div class="video-overlay-bl"><i data-lucide="users" style="width:14px"></i><span id="onlineCount">0</span> ONLINE</div>
                    <div id="videoOfflineState" style="display:none; position:absolute; inset:0; background:#0f172a; flex-direction:column; align-items:center; justify-content:center; z-index:20;">
                        <div style="width:60px; height:60px; background:rgba(255,255,255,0.05); border-radius:50%; display:flex; align-items:center; justify-content:center; margin-bottom: var(--spacing-md); animation:pulse-ring 2s infinite;">
                            <i data-lucide="radio" style="width:30px; height:30px; color:#94a3b8;"></i>
                        </div>
                        <h3 style="margin:0; font-size:16px; font-weight:900; color:white; letter-spacing:1px;">WAITING FOR LIVE</h3>
                        <p style="margin:5px 0 0; font-size:12px; color:#64748b;">Stand by for the next draw.</p>
                    </div>
                    <iframe id="liveVideoFrame" width="100%" height="100%" src="https://www.youtube.com/embed/4I_NSJTbdXo?autoplay=1&mute=1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen style="border:none; position:absolute; top:0; left:0; width:100%; height:100%;"></iframe>
                </div>
            </div>

            <div id="jackpotBanner">
                <div class="jp-label-new">
                    <i data-lucide="crown" style="width: 16px;"></i> JACKPOT ROUND <i data-lucide="crown" style="width: 16px;"></i>
                </div>
                <span class="jackpot-amount" id="jackpotDisplayVal">5,000</span>
                <div style="font-size: 10px; opacity: 0.7; margin-top: 5px; color: #fbbf24;">RB COINS GRAND PRIZE</div>
            </div>

            <div id="nextDrawBanner" class="next-draw-container">
                <div class="nd-icon"><i data-lucide="calendar-days"></i></div>
                <div class="nd-info">
                    <div class="next-draw-label">Susunod na Bola</div>
                    <div id="nextDrawTime" class="next-draw-time">--:-- --</div>
                </div>
            </div>
            
            <div id="winnerBanner">
                <span><i data-lucide="party-popper" style="width:24px; height:24px;"></i> BINGO WINNER!</span>
                <span class="winner-line" id="winnerPatternLine">Pattern: Normal Bingo</span>
            </div>

            <div class="draw-panel">
                <div class="prev-balls" id="ballRow"></div>
                <div class="current-ball-box"><span style="font-size:9px; font-weight:800; opacity:0.8; color:white;">NOW DRAWN</span><span id="currentBall" style="font-size:36px; font-weight:900; color:white; text-shadow:0 2px 10px rgba(0,0,0,0.5);">--</span></div>
            </div>
            
            <div class="card" id="bingoCardContainer">
                <div id="lateOverlay" class="late-overlay">
                    <i data-lucide="lock" style="color:var(--danger); width:48px; height:48px; margin-bottom: var(--spacing-md); filter: drop-shadow(0 0 10px var(--danger));"></i>
                    <div class="late-text">GAME ONGOING</div>
                    <div class="late-subtext">Sorry, ongoing na ang bola. Bawal na sumali ang late.</div>
                    <div style="margin-top: var(--spacing-lg); background:rgba(255,255,255,0.1); padding: var(--spacing-sm) 20px; border-radius: var(--radius-md); border:1px solid rgba(255,255,255,0.1);">
                        <span style="font-size:10px; display:block; opacity:0.7;">NEXT GAME:</span>
                        <strong id="lateNextSched" style="font-size:16px; color:var(--gold);">--:--</strong>
                    </div>
                </div>
                <div id="gameOverOverlay" class="game-over-overlay">
                    <i data-lucide="trophy" style="color:var(--gold); width:50px; height:50px; margin-bottom: var(--spacing-md); filter: drop-shadow(0 0 15px var(--gold));"></i>
                    <div class="late-text">Game Finished</div>
                    <div class="late-subtext" id="gameOverMsg">Better luck next time!</div>
                </div>
                <div class="change-card-wrapper" style="display:flex; justify-content:space-between; align-items:center; padding-bottom:15px;">
                    <div class="pattern-box">
                        <div class="pattern-dot"></div>
                        <span class="pattern-text" id="patternName">Normal Bingo</span>
                    </div>
                    <button class="btn-change" id="newCardBtn" onclick="generateNewCard()"><i data-lucide="refresh-cw" style="width:14px"></i> NEW CARD</button>
                </div>
                <div class="bingo-header"><div class="letter">B</div><div class="letter">I</div><div class="letter">N</div><div class="letter">G</div><div class="letter">O</div></div>
                <div class="grid" id="bingoGrid"></div>
            </div>
            
            <div class="chat-box" style="margin-top:15px;">
                <div class="chat-header">
                    <i data-lucide="message-square" style="width:18px; color:var(--accent-glow)"></i>
                    <h3>LIVE STREAM CHAT</h3>
                </div>
                <div id="chatList"></div>
                <div id="replyIndicator" class="reply-indicator" style="display:none; padding: 5px 15px; background: #374151; color: #d1d5db; font-size: 11px;">
                    <span id="replyText">Replying to...</span>
                    <button onclick="cancelReply()" style="background:none; border:none; color:white; cursor:pointer;"><i data-lucide="x" style="width:14px"></i></button>
                </div>
                <div class="chat-input-area">
                    <form class="input-wrapper" onsubmit="event.preventDefault(); sendChat();">
                        <input type="text" id="chatIn" placeholder="Say something..." autocomplete="off">
                        <button type="submit" class="send-btn">
                            <i data-lucide="send" style="width:16px"></i>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="bottom-nav">
    <button class="nav-item active" onclick="switchTab('home')" id="nav-home">
        <i data-lucide="home" class="nav-icon"></i>
        <span class="nav-label">Home</span>
    </button>
    <button class="nav-item featured" onclick="switchTab('bingo')" id="nav-bingo">
        <i data-lucide="play-circle" class="nav-icon"></i>
        <span class="nav-label">Bingo</span>
    </button>
    <div style="width: 20px;"></div>
    
    <button class="nav-item" onclick="document.getElementById('storeModal').style.display='flex'" id="nav-store">
        <i data-lucide="shopping-bag" class="nav-icon"></i>
        <span class="nav-label">Store</span>
    </button>
    <button class="nav-item" onclick="openMyProfile()" id="nav-profile">
        <i data-lucide="user" class="nav-icon"></i>
        <span class="nav-label">Me</span>
    </button>
    
    <div class="nav-center-fab" onclick="openPostCreator()">
        <i data-lucide="plus"></i>
    </div>
</div>

<div class="sticky-ad-footer">
    <script type="text/javascript">
        atOptions = { 'key' : 'a664bf7e7084386b4f4b428590030df3', 'format' : 'iframe', 'height' : 50, 'width' : 320, 'params' : {} };
    </script>
    <script type="text/javascript" src="https://pl28660496.effectivegatecpm.com/a6/64/bf/a664bf7e7084386b4f4b428590030df3.js"></script>
</div>

<div id="customPopupBanner">
    <div style="position:relative; max-width:400px; width:100%; animation: popScale 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);">
        <button onclick="closeCustomBanner()" style="position:absolute; top:-15px; right:-10px; background:linear-gradient(135deg, #ef4444, #b91c1c); color:white; border:2px solid white; border-radius:50%; width:36px; height:36px; font-weight:bold; cursor:pointer; z-index:10; display:flex; align-items:center; justify-content:center; box-shadow:0 4px 10px rgba(0,0,0,0.3);"><i data-lucide="x" style="width:20px"></i></button>
        <img id="customBannerImg" src="" style="width:100%; border-radius: var(--radius-xl); border:2px solid rgba(255,255,255,0.2); box-shadow:0 20px 50px rgba(0,0,0,0.8); cursor:pointer; object-fit:cover;" onclick="clickCustomBanner()">
    </div>
</div>

<div id="installGate">
    <div class="gate-logo">RB<span>LIVE</span></div>
    <div class="gate-title">Install to Play</div>
    <p class="gate-desc">To access the full Radio Bingo experience, you must install the official App.</p>
    <button id="gateInstallBtn" class="gate-btn-install" onclick="triggerInstall()">
        <i data-lucide="download-cloud" style="width:20px; height:20px;"></i> INSTALL APP
    </button>
    <div id="gateIosNote" class="gate-ios-note">
        <div style="font-weight:800; color:white; margin-bottom: var(--spacing-sm); text-transform:uppercase;">iOS Instructions:</div>
        <div class="ios-step"><i data-lucide="share" class="ios-icon" style="width:16px;"></i> 1. Tap the Share button below.</div>
        <div class="ios-step"><i data-lucide="plus-square" class="ios-icon" style="width:16px;"></i> 2. Scroll down & tap 'Add to Home Screen'.</div>
        <div class="ios-step"><i data-lucide="check" class="ios-icon" style="width:16px;"></i> 3. Launch App from Home Screen.</div>
    </div>
</div>

<div id="notifBlocker">
    <div class="notif-gate-icon">
        <i data-lucide="bell-ring" style="width: 40px; height: 40px; color: #3b82f6;"></i>
    </div>
    <div class="notif-gate-title">ENABLE NOTIFICATIONS</div>
    <p class="notif-gate-desc">To ensure fairness and real-time updates for Bingo Calls, this app requires push notifications to be enabled.</p>
    <button onclick="requestGatePermission()" class="btn-allow-notif">
        <i data-lucide="check-circle" style="width:20px"></i> ALLOW NOTIFICATIONS
    </button>
    <div id="blockedHelp" class="blocked-help">
        <strong style="color:var(--danger); display:block; margin-bottom:5px;">‚ö†Ô∏è NOTIFICATIONS ARE BLOCKED!</strong>
        1. Click the <b>Lock Icon üîí</b> or <b>Settings Icon</b> beside the URL bar.<br>
        2. Click <b>Permissions</b> or <b>Site Settings</b>.<br>
        3. Find <b>Notifications</b> and set to <b>Allow</b>.<br>
        4. Reload this page.
    </div>
</div>

<div id="splash-screen">
    <div class="splash-logo">RB<span>LIVE</span></div>
    <div class="splash-loader"></div>
</div>

<div id="customToast">
    <i data-lucide="info" class="toast-icon"></i>
    <span class="toast-msg" id="toastMsg">Notification!</span>
</div>

<div id="customConfirmModal">
    <div class="conf-content">
        <i data-lucide="alert-circle" style="width: 40px; height: 40px; color: var(--gold); margin-bottom: var(--spacing-md);"></i>
        <h3 class="conf-title" id="confTitle">Confirm Action</h3>
        <p class="conf-msg" id="confMsg">Are you sure you want to proceed?</p>
        <div class="conf-actions">
            <button class="btn-conf-no" onclick="closeCustomConfirm()">CANCEL</button>
            <button class="btn-conf-yes" id="confYesBtn">CONFIRM</button>
        </div>
    </div>
</div>

<div id="loginOverlay">
    <div class="login-bg-blob blob-1"></div>
    <div class="login-bg-blob blob-2"></div>
    <div class="login-app-container">
        <div class="app-logo-lg">RB<span>LIVE</span></div>
        <p class="app-tagline">The ultimate live bingo experience.<br>Play, Win, and Redeem Rewards.</p>
        <div class="promo-badge">
            <i data-lucide="gift" style="width:16px"></i> 
            <span>Register now & Get 500 Free RB Coins</span>
        </div>
        <div class="auth-btn-group">
            <button class="btn-main-auth" onclick="login()">
                <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/action/google.svg" alt="Google" style="width:20px">
                Sign in with Google
            </button>
        </div>
    </div>
    <div class="login-footer-legal">
        <div class="legal-text">
            <span>‚ö†Ô∏è DISCLAIMER: NOT A GAMBLING SITE</span>
            <span style="opacity: 0.6; font-size: 9px;">For entertainment purposes only. No real money betting.</span>
            <div style="margin-top: 5px; opacity: 0.8; font-size: 10px;">
                <a href="terms.html" style="color:#cbd5e1; text-decoration:none; margin:0 5px;">Terms</a> |
                <a href="privacy.html" style="color:#cbd5e1; text-decoration:none; margin:0 5px;">Privacy</a>
            </div>
        </div>
    </div>
</div>

<div id="grandJackpotModal" onclick="this.style.display='none'">
    <div class="jackpot-rays"></div>
    <div class="jackpot-content">
        <div class="icon-glow"><i data-lucide="crown" style="width: 80px; height: 80px;"></i></div>
        <h1 class="jp-title">JACKPOT WIN!</h1>
        <h2 class="jp-amount" id="grandPrizeAmount">10,000 RB COINS</h2>
        <div class="jp-name" id="jpWinnerName">WINNER NAME</div>
        <p style="font-size: 11px; color: white; opacity: 0.7; margin-top: var(--spacing-lg);">Tap anywhere to close</p>
    </div>
</div>

<div id="pmModal" class="pm-modal">
    <div class="pm-container">
        <div id="pmInboxView" style="display:flex; flex-direction:column; height:100%;">
            <div class="pm-header">
                <div style="display:flex; align-items:center; gap: var(--spacing-sm);">
                    <h3>Chats</h3>
                </div>
                <div style="display:flex; justify-content:center; flex:1;">
                    <button class="group-create-btn" onclick="startCreateGroup()"><i data-lucide="users" style="width:14px"></i> + Group</button>
                </div>
                <div style="display:flex; gap: var(--spacing-sm);">
                    <button onclick="document.getElementById('pmModal').style.display='none'" style="background:rgba(255,255,255,0.1); border:none; width:30px; height:30px; border-radius:50%; color:white; display:flex; align-items:center; justify-content:center;"><i data-lucide="x" style="width:16px;"></i></button>
                </div>
            </div>
            <div class="active-friends-bar" id="activeFriendsBar"></div>
            <div id="pmList" class="pm-inbox-list"></div>
        </div>
        
        <div id="pmChatView" class="pm-chat-view">
            <div class="pm-chat-header">
                <button onclick="backToInbox()" style="background:none; border:none; color:var(--messenger-blue);"><i data-lucide="arrow-left"></i></button>
                <div style="display:flex; align-items:center;">
                     <div id="chatTargetAvatarCont" style="width:36px; height:36px; margin-left:5px;"></div>
                     <div style="display:flex; flex-direction:column; margin-left:10px;">
                        <span id="chatTargetName" style="font-weight:700; font-size:15px; color:white;">User</span>
                        <span id="chatTargetStatus" style="font-size:11px; color:#b0b3b8;">Active now</span>
                     </div>
                </div>
            </div>
            <div id="pmMessages" class="pm-messages"></div>
            
            <div class="pm-footer-modern">
                <label for="pmImgInput" class="pm-attach-btn">
                    <i data-lucide="image" style="width:24px;"></i>
                </label>
                <input type="file" id="pmImgInput" accept="image/*" style="display:none" onchange="handlePmImage(this)">
                
                <form onsubmit="event.preventDefault(); sendPrivateMessage();" style="flex:1; display:flex; gap: var(--spacing-sm);">
                    <input type="text" id="pmInput" class="pm-styled-input" placeholder="Type a message..." autocomplete="off">
                    <button type="submit" style="background:none; border:none; color:var(--messenger-blue); cursor:pointer;"><i data-lucide="send" style="width:24px"></i></button>
                </form>
            </div>
            <div id="pmImgPreviewCont" style="padding: var(--spacing-sm); background:#0f172a; display:none;">
                <span style="font-size:10px; color:var(--accent-glow);">Image attached</span>
            </div>
        </div>

        <div id="pmCreateGroupView" style="display:none; flex-direction:column; height:100%; background:#000;">
            <div class="pm-header">
                <button onclick="cancelCreateGroup()" style="background:none; border:none; color:white;"><i data-lucide="arrow-left"></i></button>
                <h3>New Group</h3>
                <button onclick="finalizeCreateGroup()" style="color:var(--accent); background:none; border:none; font-weight:800;">CREATE</button>
            </div>
            <div style="padding: var(--spacing-lg);">
                <input type="text" id="newGroupName" class="styled-input" placeholder="Group Name">
                <h4 style="color:#94a3b8; margin-top: var(--spacing-lg); font-size:12px; text-transform:uppercase;">Select Friends</h4>
                <div id="friendSelectContainer" style="margin-top:10px;"></div>
            </div>
        </div>
    </div>
</div>

<div id="notifModal" class="modal" onclick="this.style.display='none'">
    <div class="modal-content" onclick="event.stopPropagation()">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: var(--spacing-lg); border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:15px;">
            <div style="display:flex; align-items:center; gap: var(--spacing-sm);">
                <div style="background:rgba(255,255,255,0.1); padding:8px; border-radius: var(--radius-sm);"><i data-lucide="bell" style="width:20px;"></i></div>
                <h3 style="margin:0; font-size:18px;">Notifications</h3>
            </div>
            <button onclick="document.getElementById('notifModal').style.display='none'" style="background:none; border:none; color:white;"><i data-lucide="x"></i></button>
        </div>
        <div id="notifList"></div>
    </div>
</div>

<div id="userOptionsModal" class="modal" onclick="this.style.display='none'">
    <div class="modal-content" onclick="event.stopPropagation()" style="text-align:center;">
        <div id="optUserAvatarCont" style="display:flex; justify-content:center; margin-bottom: var(--spacing-sm);"></div>
        <h3 id="optUserName" style="margin:0 0 20px 0; color:white;">User</h3>
        
        <button class="user-opt-btn" onclick="openUserProfile(targetUserForOpt.uid)"><i data-lucide="user"></i> View Profile</button>
        <button class="user-opt-btn" onclick="optAddFriend()"><i data-lucide="user-plus"></i> Add Friend</button>
        <button class="user-opt-btn" onclick="optSendMessage()"><i data-lucide="message-circle"></i> Send Message</button>
        <button class="user-opt-btn" onclick="document.getElementById('userOptionsModal').style.display='none'"><i data-lucide="x"></i> Close</button>
    </div>
</div>

<div id="commentModalBackdrop" class="comment-modal-backdrop" onclick="closeComments()"></div>
<div id="commentModal" class="comment-modal">
    <div class="comment-header">
        <h3 style="margin:0; font-size:16px;">Comments</h3>
        <button onclick="closeComments()" style="background:none; border:none; color:white;"><i data-lucide="x"></i></button>
    </div>
    <div id="commentList" class="comment-list"></div>
    <form class="comment-input-area" onsubmit="event.preventDefault(); sendComment();">
        <div id="commentPreviewBox" class="comment-preview-box">
            <div class="comment-preview-label">Preview</div>
            <div class="comment-preview-content">
                <img id="commentPreviewAvatar" class="comment-preview-avatar" src="https://via.placeholder.com/40" alt="Your avatar">
                <div class="comment-preview-bubble">
                    <div id="commentPreviewText" class="comment-preview-text"></div>
                </div>
            </div>
        </div>
        <div class="comment-input-row">
            <input type="text" id="commentInput" class="comment-input" placeholder="Write a comment..." autocomplete="off" oninput="updateCommentPreview()">
            <button type="submit" style="background:none; border:none; color:var(--accent);"><i data-lucide="send"></i></button>
        </div>
    </form>
</div>

<div id="shareModalBackdrop" class="share-modal-backdrop" onclick="closeShareModal()"></div>
<div id="shareModal" class="share-modal">
    <div class="share-header">
        <h3 style="margin:0; font-size:16px;">Share Post</h3>
        <button onclick="closeShareModal()" style="background:none; border:none; color:white;"><i data-lucide="x"></i></button>
    </div>
    <div class="share-content">
        <div class="share-post-preview" id="sharePreview"></div>
        <button class="share-btn-option" onclick="shareToOwnProfile()">
            <i data-lucide="user" style="width:20px;"></i>
            <span>Share to My Profile</span>
        </button>
        <button class="share-btn-option" id="nativeShareBtn" onclick="shareViaWebShare()">
            <i data-lucide="share-2" style="width:20px;"></i>
            <span>Share via...</span>
        </button>
        <button class="share-btn-option" id="copyLinkBtn" onclick="copyPostLink()" style="display:none;">
            <i data-lucide="link" style="width:20px;"></i>
            <span>Copy Link</span>
        </button>
    </div>
</div>

<div id="reactionViewerBackdrop" class="reaction-viewer-backdrop" onclick="closeReactionViewer()"></div>
<div id="reactionViewerModal" class="reaction-viewer-modal">
    <div class="reaction-viewer-header">
        <h3 style="margin:0; font-size:16px;">Reactions</h3>
        <button onclick="closeReactionViewer()" style="background:none; border:none; color:white;" aria-label="Close reactions"><i data-lucide="x"></i></button>
    </div>
    <div id="reactionViewerList" class="reaction-viewer-list"></div>
</div>

<div id="searchModal" class="search-modal-container">
    <div class="search-header">
        <button onclick="document.getElementById('searchModal').style.display='none'" style="background:none; border:none; color:white;"><i data-lucide="arrow-left"></i></button>
        <div class="search-bar-wrap">
            <i data-lucide="search" style="width:16px; opacity:0.5;"></i>
            <input type="text" id="searchInput" class="search-input" placeholder="Search users or posts..." onkeyup="handleSearch()">
        </div>
    </div>
    <div id="searchResults" class="search-results">
        <div style="text-align:center; opacity:0.5; padding: var(--spacing-lg);">Type to search...</div>
    </div>
</div>

<div id="userProfilePage" class="profile-page-container">
    <button class="profile-nav-back" onclick="closeProfilePage()">
        <i data-lucide="arrow-left"></i>
    </button>
    
    <div class="profile-cover" id="pageProfileCover"></div>
    
    <div class="profile-info-section">
        <div class="profile-avatar-container" id="pageProfileAvatarContainer">
             </div>
        
        <h2 id="pageProfileName" class="profile-page-name">User Name</h2>
        <p id="pageProfileBio" class="profile-page-bio">Radio Bingo Player</p>
        
        <div class="profile-btn-group">
            <button id="profileMainActionBtn" class="profile-action-btn" onclick="handleProfileMainAction()">Add Friend</button>
            
            <button id="giftSkinBtn" class="profile-action-btn" style="display:none; background:linear-gradient(135deg, #f59e0b, #d97706); border:none; box-shadow: 0 4px 20px rgba(245, 158, 11, 0.4); color: white;">
                <i data-lucide="gift" style="width:16px"></i> Gift Skin
            </button>
            
            <button id="unfriendBtn" class="btn-unfriend-modern" style="display:none;" onclick="unfriendUser()">
                <i data-lucide="user-x" style="width:16px"></i> Unfriend
            </button>
        </div>
        
        <div class="profile-stats-card">
            <div class="stat-item">
                <span class="stat-val" id="statFriends">0</span>
                <span class="stat-lbl"><i data-lucide="users" style="width:12px; vertical-align:middle;"></i> Friends</span>
            </div>
            <div class="stat-item">
                <span class="stat-val" id="statLikes">0</span>
                <span class="stat-lbl"><i data-lucide="heart" style="width:12px; vertical-align:middle;"></i> Likes</span>
            </div>
             <div class="stat-item">
                <span class="stat-val" id="statPosts">0</span>
                <span class="stat-lbl"><i data-lucide="image" style="width:12px; vertical-align:middle;"></i> Posts</span>
            </div>
        </div>
        
        <div id="pageProfileFeed" class="profile-feed-section"></div>
    </div>
</div>

<div id="editProfileModal" class="modal" onclick="this.style.display='none'">
    <div class="modal-content" onclick="event.stopPropagation()">
        <h3 style="margin-top:0; color:white;">Edit Profile</h3>
        
        <label class="edit-label">Display Name</label>
        <input type="text" id="editNameIn" class="edit-input" placeholder="Your Name">
        
        <label class="edit-label">Bio</label>
        <input type="text" id="editBioIn" class="edit-input" placeholder="Short bio...">
        
        <label class="edit-label">Change Profile Picture</label>
        <input type="file" id="editProfilePicInput" class="edit-input" accept="image/*" onchange="handleProfileUpload(this, 'pfp')">
        
        <label class="edit-label">Change Cover Photo</label>
        <input type="file" id="editCoverPicInput" class="edit-input" accept="image/*" onchange="handleProfileUpload(this, 'cover')">

        <button onclick="saveProfileChanges()" style="width:100%; padding: var(--spacing-md); background:var(--accent); border:none; border-radius: var(--radius-md); font-weight:900; color:white; cursor:pointer;">SAVE CHANGES</button>
    </div>
</div>

<div id="giftSkinModal" class="modal" onclick="this.style.display='none'">
    <div class="modal-content" onclick="event.stopPropagation()">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: var(--spacing-md); border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 15px;">
            <div>
                <h3 style="margin:0; font-size: 18px; font-weight: 900;" id="giftModalTitle">Gift a Skin</h3>
                <p style="margin: 5px 0 0 0; font-size: 11px; opacity: 0.8; font-weight: 600;">Select a skin to gift</p>
            </div>
            <button onclick="document.getElementById('giftSkinModal').style.display='none'" style="background:none; border:none; color:white; cursor:pointer;"><i data-lucide="x"></i></button>
        </div>
        <div id="giftableSkinsList" class="skins-grid">
            </div>
    </div>
</div>

<div id="installGuideModal" class="modal" onclick="this.style.display='none'">
    <div class="modal-content" onclick="event.stopPropagation()">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: var(--spacing-md);">
            <h3 style="margin:0; font-size:18px; font-weight:900;">INSTALL GUIDE</h3>
            <button onclick="document.getElementById('installGuideModal').style.display='none'" style="background:none; border:none; color:white;"><i data-lucide="x"></i></button>
        </div>
        <div class="install-tabs">
            <button class="install-tab-btn active" id="tabAndroid" onclick="showGuide('android')">ANDROID</button>
            <button class="install-tab-btn" id="tabIOS" onclick="showGuide('ios')">iOS</button>
        </div>
        <div id="guideAndroidContent">
            <div class="guide-step"><div class="step-num">1</div><div class="step-text">Pindutin ang <b>Three Dots (‚ãÆ)</b> sa upper right corner ng Google Chrome browser.</div></div>
            <div class="guide-step"><div class="step-num">2</div><div class="step-text">Hanapin at pindutin ang <b>"Install App"</b> o <b>"Add to Home Screen"</b>.</div></div>
            <div class="guide-step"><div class="step-num">3</div><div class="step-text">Click <b>Install</b> para mapunta ito sa iyong home screen.</div></div>
        </div>
        <div id="guideIOSContent" style="display:none;">
            <div class="guide-step"><div class="step-num">1</div><div class="step-text">Gamitin ang <b>Safari Browser</b> at pindutin ang <b>Share Icon</b> <i data-lucide="share" style="width:12px"></i> sa ibaba.</div></div>
            <div class="guide-step"><div class="step-num">2</div><div class="step-text">Mag-scroll pababa at hanapin ang <b>"Add to Home Screen"</b> <i data-lucide="plus-square" style="width:12px"></i>.</div></div>
            <div class="guide-step"><div class="step-num">3</div><div class="step-text">Click <b>Add</b> sa upper right corner.</div></div>
        </div>
    </div>
</div>

<div id="menuModal" class="modal" onclick="this.style.display='none'">
    <div class="modal-content" onclick="event.stopPropagation()">
        <div class="profile-header">
            <div id="menuAvatarContainer"></div>
            <div class="profile-name-info">
                <h2 class="profile-name" id="profileNameDisplay">User Name</h2>
                <span class="profile-uid" id="profileUidDisplay">UID: ---</span>
            </div>
            <button onclick="document.getElementById('menuModal').style.display='none'" style="background:none; border:none; color:white; opacity:0.5;"><i data-lucide="x"></i></button>
        </div>
        <div class="gcash-section">
            <span style="font-size:10px; font-weight:800; color:var(--accent-glow); text-transform:uppercase; margin-bottom: var(--spacing-sm); display:flex; align-items:center; gap:5px;"><i data-lucide="credit-card" style="width:12px"></i> Email / Redemption Info</span>
            <div style="display:flex; gap: var(--spacing-sm);">
                <input type="text" id="gcashInput" class="styled-input" placeholder="Enter email or details">
                <button onclick="saveGcash(); playSound('click');" style="background:var(--accent); border:none; color:white; padding:0 20px; border-radius: var(--radius-md); font-weight:800; font-size:12px; cursor:pointer; box-shadow:0 4px 10px rgba(59, 130, 246, 0.3);">SAVE</button>
            </div>
        </div>
        <div class="ref-container">
            <span style="font-size:10px; font-weight:800; color:var(--success); text-transform:uppercase; margin-bottom: var(--spacing-sm); display:flex; align-items:center; gap:5px;"><i data-lucide="share-2" style="width:12px"></i> Invite & Earn</span>
            <input type="text" id="refLink" readonly class="styled-input" style="background:rgba(0,0,0,0.2); text-align:center; cursor:pointer; margin-bottom: var(--spacing-sm);" onclick="this.select(); document.execCommand('copy'); showToast('Copied Link!'); playSound('click');">
            <div id="referralInputSection">
                <span style="font-size:10px; font-weight:800; color:var(--gold); text-transform:uppercase; margin-bottom: var(--spacing-sm); display:flex; align-items:center; gap:5px; margin-top:15px;"><i data-lucide="ticket" style="width:12px"></i> Claim Referral Code</span>
                <div style="display:flex; gap: var(--spacing-sm);">
                    <input type="text" id="referralInput" class="styled-input" placeholder="ENTER CODE">
                    <button onclick="claimReferral(); playSound('click');" style="background:var(--gold); border:none; color:black; padding:0 20px; border-radius: var(--radius-md); font-weight:800; font-size:12px; cursor:pointer; box-shadow:0 4px 10px rgba(251, 191, 36, 0.3);">CLAIM</button>
                </div>
            </div>
        </div>
        <div class="history-box">
            <span style="font-size:10px; font-weight:800; color:white; text-transform:uppercase; margin-bottom: var(--spacing-sm); display:flex; align-items:center; gap:5px;"><i data-lucide="history" style="width:12px"></i> Transaction History</span>
            <div id="historyList" class="history-list"></div>
        </div>
        
        <div style="margin-top:15px; border-top:1px solid rgba(255,255,255,0.1); padding-top:10px;">
            <button onclick="openSupportModal(); playSound('click');" style="display:flex; align-items:center; gap: var(--spacing-xs); color:#94a3b8; font-size:12px; padding:8px 0; text-decoration:none; background:none; border:none; cursor:pointer; width:100%; text-align:left;">
                <i data-lucide="message-square" style="width:14px;"></i>
                Contact Support
            </button>
            <a href="about.html" style="display:block; color:#94a3b8; font-size:12px; padding:8px 0; text-decoration:none;">About Us</a>
            <a href="privacy.html" style="display:block; color:#94a3b8; font-size:12px; padding:8px 0; text-decoration:none;">Privacy Policy</a>
            <a href="terms.html" style="display:block; color:#94a3b8; font-size:12px; padding:8px 0; text-decoration:none;">Terms of Service</a>
        </div>

        <button onclick="auth.signOut().then(()=>location.reload())" style="width:100%; padding:14px; background:rgba(239, 68, 68, 0.1); color:var(--danger); border:1px solid rgba(239, 68, 68, 0.2); border-radius:14px; font-weight:800; margin-top: var(--spacing-lg); cursor:pointer; display:flex; align-items:center; justify-content:center; gap: var(--spacing-xs);">
            <i data-lucide="log-out" style="width:18px"></i> Sign Out
        </button>
    </div>
</div>

<div id="storeModal" class="modal" onclick="this.style.display='none'">
    <div class="modal-content" onclick="event.stopPropagation()">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: var(--spacing-md); border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 15px;">
            <div>
                <h3 style="margin:0; font-size: 20px; font-weight: 900;">MARKETPLACE</h3>
                <p style="margin: 5px 0 0 0; font-size: 11px; opacity: 0.8; font-weight: 600;">Redeem, Shop Skins, or Earn</p>
            </div>
            <div class="points-badge" style="height:35px; border-radius: var(--radius-sm);"><i data-lucide="coins" style="width:14px"></i> <span id="storePoints">0</span></div>
        </div>
        <div class="store-nav">
            <button class="store-tab-btn active" onclick="switchStoreTab('cashout')" id="tabBtnCash">Cash Out</button>
            <button class="store-tab-btn" onclick="switchStoreTab('skins')" id="tabBtnSkins">Skins</button>
            <button class="store-tab-btn" onclick="switchStoreTab('earn')" id="tabBtnEarn" style="color:var(--gold);">Tasks</button>
        </div>
        
        <div class="glass-panel" style="padding: var(--spacing-md); border-radius: var(--radius-lg); margin-bottom: var(--spacing-lg); border: 1px dashed var(--gold); text-align: center; position: relative; overflow: hidden;">
            <h4 style="margin: 0 0 10px 0; color: var(--gold); font-size: 14px; text-transform: uppercase;">‚ö° FREE RB COINS ‚ö°</h4>
            <div id="adTimerOverlay" style="display: none; position: absolute; inset: 0; background: rgba(15, 23, 42, 0.98); z-index: 50; align-items: center; justify-content: center; flex-direction: column;">
                <div id="adStatusIcon" style="font-size: 30px; margin-bottom: var(--spacing-sm);">üì∫</div>
                <div style="font-size: 18px; font-weight: 900; color: white;" id="adCountdown">30s</div>
                <div style="font-size: 12px; color: #ef4444; padding: 0 20px; margin-top: 5px; font-weight:800;" id="adStatusText">Do not close app or switch tabs!</div>
            </div>
            <div id="adCaptchaOverlay" style="display: none; position: absolute; inset: 0; background: rgba(15, 23, 42, 0.98); z-index: 51; align-items: center; justify-content: center; flex-direction: column;">
                <div style="font-size: 14px; font-weight: 700; color: var(--accent-glow); margin-bottom: var(--spacing-sm);">HUMAN VERIFICATION</div>
                <div style="background: rgba(255,255,255,0.1); padding: var(--spacing-sm); border-radius: var(--radius-md); margin-bottom: var(--spacing-sm);">
                    <span id="mathQ" style="font-size: 20px; font-weight: 900; color: white;">5 + 3 = ?</span>
                </div>
                <div style="display: flex; gap: 5px;">
                    <input type="number" id="mathAns" style="width: 60px; padding: 8px; border-radius: var(--radius-sm); border: 1px solid var(--accent); background: #0f172a; color: white; text-align: center; font-weight: 800;">
                    <button onclick="verifyAdMath()" style="background: var(--success); border: none; padding: 8px 12px; border-radius: var(--radius-sm); color: white; font-weight: 900;">OK</button>
                </div>
            </div>
            <button id="btnWatchAd" onclick="startStrictWatch()" style="background: linear-gradient(135deg, #f59e0b, #b45309); width: 100%; border: none; padding: var(--spacing-md); border-radius: var(--radius-md); font-weight: 900; color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: var(--spacing-sm); font-size: 14px; box-shadow: 0 5px 15px rgba(245, 158, 11, 0.4); text-shadow: 0 1px 2px black;">
                <i data-lucide="play-circle" style="width: 20px;"></i> WATCH AD (+50 Coins)
            </button>
            <p style="font-size: 10px; opacity: 0.6; margin-top: 8px; color:var(--danger);">*Timer pauses if you leave the app!</p>
        </div>

        <div id="storeSection-cashout" style="display:block;">
            <div class="reward-grid">
                <div class="reward-item">
                    <div class="reward-main"><div class="reward-icon-box"><i data-lucide="gift" style="width:22px"></i></div><div class="reward-info"><b>‚Ç±20 Gift Card</b><small><i data-lucide="database" style="width:10px"></i> 50,000 Coins</small></div></div>
                    <button class="btn-redeem" onclick="redeemItem('‚Ç±20 Gift Card', 50000)">Redeem</button>
                </div>
                <div class="reward-item">
                    <div class="reward-main"><div class="reward-icon-box" style="color:var(--gold); background:rgba(251, 191, 36, 0.1); border-color:rgba(251, 191, 36, 0.3);"><i data-lucide="gift" style="width:22px"></i></div><div class="reward-info"><b>‚Ç±50 Gift Card</b><small><i data-lucide="database" style="width:10px"></i> 125,000 Coins</small></div></div>
                    <button class="btn-redeem" onclick="redeemItem('‚Ç±50 Gift Card', 125000)">Redeem</button>
                </div>
                <div class="reward-item">
                    <div class="reward-main"><div class="reward-icon-box" style="color:var(--success); background:rgba(16, 185, 129, 0.1); border-color:rgba(16, 185, 129, 0.3);"><i data-lucide="gift" style="width:22px"></i></div><div class="reward-info"><b>‚Ç±100 Gift Card</b><small><i data-lucide="database" style="width:10px"></i> 250,000 Coins</small></div></div>
                    <button class="btn-redeem" onclick="redeemItem('‚Ç±100 Gift Card', 250000)">Redeem</button>
                </div>
            </div>
            <p style="text-align: center; font-size: 10px; opacity: 0.6; margin-top: 25px; line-height: 1.5; text-shadow:0 1px 2px black;">*Processing may take 24-48 hours.<br>Make sure your redemption details are correct.</p>
        </div>

        <div id="storeSection-skins" style="display:none;">
            <p style="font-size:11px; opacity:0.7; margin-bottom: var(--spacing-md); text-align:center;">Customize your Bingo Card. Look rich, play rich.</p>
            
            <div style="margin-bottom: var(--spacing-lg); padding: var(--spacing-md); background:rgba(255,255,255,0.05); border-radius: var(--radius-md); text-align:center;">
                <label style="font-size:12px; font-weight:700; display:block; margin-bottom: var(--spacing-sm); color:var(--accent-glow);">UPLOAD CUSTOM BACKGROUND</label>
                <input type="file" accept="image/*" id="customSkinInput" style="display:none" onchange="handleCustomSkinUpload(this)">
                <button onclick="document.getElementById('customSkinInput').click()" style="background:var(--accent); color:white; border:none; padding:8px 15px; border-radius: var(--radius-sm); font-weight:800; font-size:11px; cursor:pointer;">CHOOSE IMAGE</button>
            </div>

            <div class="skins-grid">
                <div class="skin-item"><div class="skin-preview" style="background:rgba(30,41,59,0.8); border:1px solid rgba(255,255,255,0.1);">B</div><div class="skin-name">Classic</div><div class="skin-cost">Free</div><button class="btn-buy-skin equip" id="btn-skin-default" onclick="equipSkin('default')">EQUIP</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:pink; border:2px solid hotpink; color:deeppink; font-family:'Comic Neue',cursive;">B</div><div class="skin-name">Hello Kitty</div><div class="skin-cost">75,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-kitty" onclick="buyOrEquipSkin('kitty', 75000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:#0096df; border:2px solid white; color:white; border-radius:50%;">B</div><div class="skin-name">Doraemon</div><div class="skin-cost">75,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-doraemon" onclick="buyOrEquipSkin('doraemon', 75000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:#f7f44d; border:2px dashed brown; color:brown;">B</div><div class="skin-name">SpongeBob</div><div class="skin-cost">75,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-spongebob" onclick="buyOrEquipSkin('spongebob', 75000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:black; border:2px solid purple; color:pink;">B</div><div class="skin-name">Kuromi</div><div class="skin-cost">75,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-kuromi" onclick="buyOrEquipSkin('kuromi', 75000)">BUY</button></div>

                <div class="skin-item"><div class="skin-preview" style="background:rgba(8,51,68,1); border:2px solid #06b6d4; color:#67e8f9; text-shadow:0 0 5px #06b6d4;">B</div><div class="skin-name">Neon City</div><div class="skin-cost">50,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-neon" onclick="buyOrEquipSkin('neon', 50000)">BUY</button></div>
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #451a03, #000); border:2px solid #f59e0b; color:#fcd34d; font-family:'Times New Roman',serif;">B</div><div class="skin-name">Luxury Gold</div><div class="skin-cost">100,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-gold" onclick="buyOrEquipSkin('gold', 100000)">BUY</button></div>
                <div class="skin-item"><div class="skin-preview" style="background:rgba(80, 7, 36, 1); border:2px solid #ec4899; color:#fbcfe8; border-radius:50%;">B</div><div class="skin-name">Kawaii Pink</div><div class="skin-cost">25,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-pink" onclick="buyOrEquipSkin('pink', 25000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #FFD700, #FFA500); border:2px solid #000; color:#000; box-shadow:0 0 10px #FFD700;">B</div><div class="skin-name">Electric Mouse</div><div class="skin-cost">80,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-electric-mouse" onclick="buyOrEquipSkin('electric-mouse', 80000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #FFB6D9, #9D4EDD); border:2px solid #FFD700; color:#FFE4F5; border-radius:50%;">B</div><div class="skin-name">Magic Moon</div><div class="skin-cost">85,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-magic-moon" onclick="buyOrEquipSkin('magic-moon', 85000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #FF6B00, #FF8C00); border:3px solid #0066CC; color:#fff;">B</div><div class="skin-name">Orange Ninja</div><div class="skin-cost">90,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-orange-ninja" onclick="buyOrEquipSkin('orange-ninja', 90000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #B8C5B0, #7A9D7A); border:2px solid #8B7355; color:#3D5C3D; border-radius:20px;">B</div><div class="skin-name">Forest Spirit</div><div class="skin-cost">75,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-forest-spirit" onclick="buyOrEquipSkin('forest-spirit', 75000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:radial-gradient(circle, #0066FF, #003399); border:2px solid #FF0000; color:#FFD700; border-radius:50%; box-shadow:0 0 10px #0066FF;">B</div><div class="skin-name">Blue Speedster</div><div class="skin-cost">85,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-blue-speedster" onclick="buyOrEquipSkin('blue-speedster', 85000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #8B00FF, #4B0082); border:2px solid #00FFFF; color:#00FFFF; box-shadow:0 0 10px #00FFFF;">B</div><div class="skin-name">Cyberpunk Neon</div><div class="skin-cost">95,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-cyberpunk-neon" onclick="buyOrEquipSkin('cyberpunk-neon', 95000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:radial-gradient(ellipse, #1a0033, #000000); border:1px solid #8A2BE2; color:#E6E6FA; box-shadow:0 0 15px #8A2BE2;">B</div><div class="skin-name">Galaxy Dreams</div><div class="skin-cost">100,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-galaxy-dreams" onclick="buyOrEquipSkin('galaxy-dreams', 100000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #FF71CE, #01CDFE); border:2px solid #01CDFE; color:#fff;">B</div><div class="skin-name">Vaporwave</div><div class="skin-cost">90,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-vaporwave" onclick="buyOrEquipSkin('vaporwave', 90000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #FF4500 0%, #FF6347 50%, #00CED1 50%, #4682B4 100%); border:2px solid #FFD700; color:#fff;">B</div><div class="skin-name">Fire & Ice</div><div class="skin-cost">110,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-fire-ice" onclick="buyOrEquipSkin('fire-ice', 110000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(45deg, #FF1493, #FFD700, #00CED1); border:2px solid #FFD700; color:#000; border-radius:50%; box-shadow:0 0 10px #FFD700;">B</div><div class="skin-name">Disco Fever</div><div class="skin-cost">85,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-disco-fever" onclick="buyOrEquipSkin('disco-fever', 85000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #0d2626, #1a4d4d); border:4px dashed #1a4d4d; color:#67e8f9;">B</div><div class="skin-name">Demon Slayer</div><div class="skin-cost">120,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-demon-slayer" onclick="buyOrEquipSkin('demon-slayer', 120000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #dc2626, #ef4444); border:3px solid #fef08a; color:#fef08a; font-weight:900;">B</div><div class="skin-name">Straw Hat</div><div class="skin-cost">110,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-straw-hat" onclick="buyOrEquipSkin('straw-hat', 110000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:radial-gradient(circle, #fbbf24, #f59e0b); border:2px solid #fbbf24; color:#fff; box-shadow:0 0 15px #fbbf24; font-weight:900;">B</div><div class="skin-name">Super Saiyan</div><div class="skin-cost">150,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-super-saiyan" onclick="buyOrEquipSkin('super-saiyan', 150000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #e0e7ff, #c7d2fe); border:2px solid #a78bfa; color:#4c1d95; box-shadow:0 0 10px #c4b5fd;">B</div><div class="skin-name">Shadow King</div><div class="skin-cost">130,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-shadow-king" onclick="buyOrEquipSkin('shadow-king', 130000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(90deg, #1e40af, #3b82f6); border:2px solid #ef4444; color:#fff; border-radius:50%; box-shadow:0 0 10px #3b82f6;">B</div><div class="skin-name">Blue Hedgehog</div><div class="skin-cost">90,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-blue-hedgehog" onclick="buyOrEquipSkin('blue-hedgehog', 90000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(180deg, #dc2626, #3b82f6); border:3px solid #fbbf24; color:#fbbf24; border-radius:15px;">B</div><div class="skin-name">Plumber Hero</div><div class="skin-cost">85,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-plumber-hero" onclick="buyOrEquipSkin('plumber-hero', 85000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:radial-gradient(circle, #fce7f3, #fbcfe8); border:2px solid #f9a8d4; color:#ec4899; border-radius:50%;">B</div><div class="skin-name">Pink Puffball</div><div class="skin-cost">75,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-pink-puffball" onclick="buyOrEquipSkin('pink-puffball', 75000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #dc2626, #7f1d1d, #1e3a8a); border:2px solid #1e3a8a; color:#fff;">B</div><div class="skin-name">Web Warrior</div><div class="skin-cost">120,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-web-warrior" onclick="buyOrEquipSkin('web-warrior', 120000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #3b82f6, #6366f1); border:2px solid #7c3aed; color:#c4b5fd; border-radius:20px;">B</div><div class="skin-name">Little Alien</div><div class="skin-cost">95,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-little-alien" onclick="buyOrEquipSkin('little-alien', 95000)">BUY</button></div>
                
                <div class="skin-item"><div class="skin-preview" style="background:linear-gradient(135deg, #f0f9ff, #bae6fd); border:2px solid #7dd3fc; color:#0369a1; border-radius:50%;">B</div><div class="skin-name">Cinnamon Puppy</div><div class="skin-cost">80,000 Coins</div><button class="btn-buy-skin buy" id="btn-skin-cinnamon-puppy" onclick="buyOrEquipSkin('cinnamon-puppy', 80000)">BUY</button></div>
                
                <div class="skin-item" id="customSkinSlot" style="display:none;"><div class="skin-preview" id="customSkinPreview" style="background-size:cover;">B</div><div class="skin-name">My Custom</div><div class="skin-cost">Owned</div><button class="btn-buy-skin equip" id="btn-skin-custom" onclick="equipSkin('custom')">EQUIP</button></div>
            </div>
        </div>
        <div id="storeSection-earn" style="display:none;">
            <p style="font-size:11px; opacity:0.7; margin-bottom: var(--spacing-md); text-align:center;">Complete tasks to earn huge coins instantly.</p>
            <div class="task-list">
                <div class="task-item" style="border-color: #ef4444; background: linear-gradient(90deg, rgba(69,10,10,0.8), rgba(15,23,42,0.8));">
                    <div class="task-info"><h4 style="color:#fca5a5;">Watch Video Task</h4><p>Watch full video to unlock reward</p><span class="task-reward" style="background: rgba(239,68,68,0.2); border-color:#ef4444; color:#fca5a5;">+2,000 Coins</span></div>
                    <button class="btn-do-task" style="background:#ef4444;" id="btn-task-video" onclick="openVideoLocker('video')">WATCH</button>
                </div>
                <div class="task-item">
                    <div class="task-info"><h4>Premium Offer</h4><p>Complete simple offer to verify</p><span class="task-reward">+5,000 Coins</span></div>
                    <button class="btn-do-task" id="btn-task-premium" onclick="startTaskSafe('https://doctoredits.com/1874673', 5000, 'premium')">GO</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="supportModal" class="modal" onclick="this.style.display='none'">
    <div class="modal-content" onclick="event.stopPropagation()">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: var(--spacing-md); border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 15px;">
            <div>
                <h3 style="margin:0; font-size: 20px; font-weight: 900;">CONTACT SUPPORT</h3>
                <p style="margin: 5px 0 0 0; font-size: 11px; opacity: 0.8; font-weight: 600;">Send a message to our team</p>
            </div>
            <button onclick="document.getElementById('supportModal').style.display='none'" style="background:none; border:none; color:white; cursor:pointer;"><i data-lucide="x"></i></button>
        </div>
        
        <label class="edit-label">Subject</label>
        <input type="text" id="supportSubject" class="edit-input" placeholder="Brief description of your issue">
        
        <label class="edit-label">Message</label>
        <textarea id="supportMessage" class="edit-input" rows="6" placeholder="Please describe your issue in detail..." style="resize:vertical;"></textarea>
        
        <button onclick="submitSupportRequest()" style="width:100%; padding: var(--spacing-md); background:var(--accent); border:none; border-radius: var(--radius-md); font-weight:900; color:white; cursor:pointer; display:flex; align-items:center; justify-content:center; gap: var(--spacing-xs);">
            <i data-lucide="send" style="width:16px;"></i>
            SEND MESSAGE
        </button>
        
        <div id="myTicketsSection" style="margin-top: var(--spacing-lg); padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1);">
            <h4 style="margin:0 0 15px 0; font-size: 14px; font-weight: 800; color: var(--accent-glow); display: flex; align-items: center; gap: var(--spacing-xs);">
                <i data-lucide="inbox" style="width:16px;"></i> MY TICKETS
            </h4>
            <div id="ticketsList" style="max-height: 200px; overflow-y: auto;"></div>
        </div>
    </div>
</div>

<div id="ticketDetailModal" class="modal" onclick="this.style.display='none'">
    <div class="modal-content" onclick="event.stopPropagation()" style="max-height: 80vh; overflow-y: auto;">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: var(--spacing-md); border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 15px; position: sticky; top: 0; background: #1e293b; z-index: 10;">
            <div>
                <h3 style="margin:0; font-size: 18px; font-weight: 900;" id="ticketDetailSubject">Ticket Subject</h3>
                <p style="margin: 5px 0 0 0; font-size: 11px; opacity: 0.8; font-weight: 600;">
                    Status: <span id="ticketDetailStatus" style="color: var(--gold);">Open</span>
                </p>
            </div>
            <button onclick="closeTicketDetail()" style="background:none; border:none; color:white; cursor:pointer;"><i data-lucide="x"></i></button>
        </div>
        
        <div id="ticketRepliesContainer" style="margin-bottom: var(--spacing-md);"></div>
        
        <div style="border-top: 1px solid rgba(255,255,255,0.1); padding-top: 15px;">
            <label class="edit-label">Reply to Ticket</label>
            <textarea id="ticketReplyInput" class="edit-input" rows="4" placeholder="Type your reply here..." style="resize:vertical;"></textarea>
            <button onclick="submitTicketReply()" style="width:100%; padding: var(--spacing-sm); background:var(--accent); border:none; border-radius: var(--radius-md); font-weight:900; color:white; cursor:pointer; display:flex; align-items:center; justify-content:center; gap: var(--spacing-xs); margin-top:10px;">
                <i data-lucide="send" style="width:16px;"></i>
                SEND REPLY
            </button>
        </div>
    </div>
</div>

<div id="pwaInstallBanner">
    <div><span class="pwa-text">INSTALL APP</span><span class="pwa-sub">Download for better experience!</span></div>
    <button id="pwaBottomBtn" class="pwa-btn">INSTALL</button>
</div>

<script src="script.js"></script>
</body>
</html>
